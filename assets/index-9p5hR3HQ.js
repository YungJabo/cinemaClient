(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();var B0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bc={exports:{}},Ms={},Uc={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ga=Symbol.for("react.element"),U0=Symbol.for("react.portal"),G0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),z0=Symbol.for("react.provider"),V0=Symbol.for("react.context"),H0=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),Y0=Symbol.for("react.memo"),X0=Symbol.for("react.lazy"),yf=Symbol.iterator;function $0(e){return e===null||typeof e!="object"?null:(e=yf&&e[yf]||e["@@iterator"],typeof e=="function"?e:null)}var Gc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jc=Object.assign,Kc={};function mi(e,t,r){this.props=e,this.context=t,this.refs=Kc,this.updater=r||Gc}mi.prototype.isReactComponent={};mi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zc(){}zc.prototype=mi.prototype;function Ul(e,t,r){this.props=e,this.context=t,this.refs=Kc,this.updater=r||Gc}var Gl=Ul.prototype=new zc;Gl.constructor=Ul;jc(Gl,mi.prototype);Gl.isPureReactComponent=!0;var xf=Array.isArray,Vc=Object.prototype.hasOwnProperty,jl={current:null},Hc={key:!0,ref:!0,__self:!0,__source:!0};function Wc(e,t,r){var i,o={},f=null,p=null;if(t!=null)for(i in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(f=""+t.key),t)Vc.call(t,i)&&!Hc.hasOwnProperty(i)&&(o[i]=t[i]);var m=arguments.length-2;if(m===1)o.children=r;else if(1<m){for(var w=Array(m),g=0;g<m;g++)w[g]=arguments[g+2];o.children=w}if(e&&e.defaultProps)for(i in m=e.defaultProps,m)o[i]===void 0&&(o[i]=m[i]);return{$$typeof:ga,type:e,key:f,ref:p,props:o,_owner:jl.current}}function q0(e,t){return{$$typeof:ga,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ga}function Q0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ef=/\/+/g;function co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Q0(""+e.key):t.toString(36)}function qa(e,t,r,i,o){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(f){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case ga:case U0:p=!0}}if(p)return p=e,o=o(p),e=i===""?"."+co(p,0):i,xf(o)?(r="",e!=null&&(r=e.replace(Ef,"$&/")+"/"),qa(o,t,r,"",function(g){return g})):o!=null&&(Kl(o)&&(o=q0(o,r+(!o.key||p&&p.key===o.key?"":(""+o.key).replace(Ef,"$&/")+"/")+e)),t.push(o)),1;if(p=0,i=i===""?".":i+":",xf(e))for(var m=0;m<e.length;m++){f=e[m];var w=i+co(f,m);p+=qa(f,t,r,w,o)}else if(w=$0(e),typeof w=="function")for(e=w.call(e),m=0;!(f=e.next()).done;)f=f.value,w=i+co(f,m++),p+=qa(f,t,r,w,o);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Da(e,t,r){if(e==null)return e;var i=[],o=0;return qa(e,i,"","",function(f){return t.call(r,f,o++)}),i}function J0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},Qa={transition:null},Z0={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:jl};Ie.Children={map:Da,forEach:function(e,t,r){Da(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Da(e,function(){t++}),t},toArray:function(e){return Da(e,function(t){return t})||[]},only:function(e){if(!Kl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=mi;Ie.Fragment=G0;Ie.Profiler=K0;Ie.PureComponent=Ul;Ie.StrictMode=j0;Ie.Suspense=W0;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z0;Ie.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=jc({},e.props),o=e.key,f=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,p=jl.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(w in t)Vc.call(t,w)&&!Hc.hasOwnProperty(w)&&(i[w]=t[w]===void 0&&m!==void 0?m[w]:t[w])}var w=arguments.length-2;if(w===1)i.children=r;else if(1<w){m=Array(w);for(var g=0;g<w;g++)m[g]=arguments[g+2];i.children=m}return{$$typeof:ga,type:e.type,key:o,ref:f,props:i,_owner:p}};Ie.createContext=function(e){return e={$$typeof:V0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:z0,_context:e},e.Consumer=e};Ie.createElement=Wc;Ie.createFactory=function(e){var t=Wc.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:H0,render:e}};Ie.isValidElement=Kl;Ie.lazy=function(e){return{$$typeof:X0,_payload:{_status:-1,_result:e},_init:J0}};Ie.memo=function(e,t){return{$$typeof:Y0,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=Qa.transition;Qa.transition={};try{e()}finally{Qa.transition=t}};Ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ie.useCallback=function(e,t){return bt.current.useCallback(e,t)};Ie.useContext=function(e){return bt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return bt.current.useEffect(e,t)};Ie.useId=function(){return bt.current.useId()};Ie.useImperativeHandle=function(e,t,r){return bt.current.useImperativeHandle(e,t,r)};Ie.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return bt.current.useMemo(e,t)};Ie.useReducer=function(e,t,r){return bt.current.useReducer(e,t,r)};Ie.useRef=function(e){return bt.current.useRef(e)};Ie.useState=function(e){return bt.current.useState(e)};Ie.useSyncExternalStore=function(e,t,r){return bt.current.useSyncExternalStore(e,t,r)};Ie.useTransition=function(){return bt.current.useTransition()};Ie.version="18.2.0";Uc.exports=Ie;var qt=Uc.exports;const Ja=bc(qt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg=qt,tg=Symbol.for("react.element"),rg=Symbol.for("react.fragment"),ng=Object.prototype.hasOwnProperty,ig=eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ag={key:!0,ref:!0,__self:!0,__source:!0};function Yc(e,t,r){var i,o={},f=null,p=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)ng.call(t,i)&&!ag.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)o[i]===void 0&&(o[i]=t[i]);return{$$typeof:tg,type:e,key:f,ref:p,props:o,_owner:ig.current}}Ms.Fragment=rg;Ms.jsx=Yc;Ms.jsxs=Yc;Bc.exports=Ms;var st=Bc.exports,Go={},Xc={exports:{}},tr={},$c={exports:{}},qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(le,pe){var me=le.length;le.push(pe);e:for(;0<me;){var we=me-1>>>1,ge=le[we];if(0<o(ge,pe))le[we]=pe,le[me]=ge,me=we;else break e}}function r(le){return le.length===0?null:le[0]}function i(le){if(le.length===0)return null;var pe=le[0],me=le.pop();if(me!==pe){le[0]=me;e:for(var we=0,ge=le.length,nt=ge>>>1;we<nt;){var Le=2*(we+1)-1,Xt=le[Le],mt=Le+1,De=le[mt];if(0>o(Xt,me))mt<ge&&0>o(De,Xt)?(le[we]=De,le[mt]=me,we=mt):(le[we]=Xt,le[Le]=me,we=Le);else if(mt<ge&&0>o(De,me))le[we]=De,le[mt]=me,we=mt;else break e}}return pe}function o(le,pe){var me=le.sortIndex-pe.sortIndex;return me!==0?me:le.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var p=Date,m=p.now();e.unstable_now=function(){return p.now()-m}}var w=[],g=[],E=1,B=null,T=3,D=!1,P=!1,C=!1,z=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(le){for(var pe=r(g);pe!==null;){if(pe.callback===null)i(g);else if(pe.startTime<=le)i(g),pe.sortIndex=pe.expirationTime,t(w,pe);else break;pe=r(g)}}function b(le){if(C=!1,F(le),!P)if(r(w)!==null)P=!0,Ue(V);else{var pe=r(g);pe!==null&&ze(b,pe.startTime-le)}}function V(le,pe){P=!1,C&&(C=!1,A(Q),Q=-1),D=!0;var me=T;try{for(F(pe),B=r(w);B!==null&&(!(B.expirationTime>pe)||le&&!_e());){var we=B.callback;if(typeof we=="function"){B.callback=null,T=B.priorityLevel;var ge=we(B.expirationTime<=pe);pe=e.unstable_now(),typeof ge=="function"?B.callback=ge:B===r(w)&&i(w),F(pe)}else i(w);B=r(w)}if(B!==null)var nt=!0;else{var Le=r(g);Le!==null&&ze(b,Le.startTime-pe),nt=!1}return nt}finally{B=null,T=me,D=!1}}var Y=!1,X=null,Q=-1,se=5,oe=-1;function _e(){return!(e.unstable_now()-oe<se)}function Be(){if(X!==null){var le=e.unstable_now();oe=le;var pe=!0;try{pe=X(!0,le)}finally{pe?je():(Y=!1,X=null)}}else Y=!1}var je;if(typeof _=="function")je=function(){_(Be)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Ut=be.port2;be.port1.onmessage=Be,je=function(){Ut.postMessage(null)}}else je=function(){z(Be,0)};function Ue(le){X=le,Y||(Y=!0,je())}function ze(le,pe){Q=z(function(){le(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(le){le.callback=null},e.unstable_continueExecution=function(){P||D||(P=!0,Ue(V))},e.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<le?Math.floor(1e3/le):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(le){switch(T){case 1:case 2:case 3:var pe=3;break;default:pe=T}var me=T;T=pe;try{return le()}finally{T=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(le,pe){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var me=T;T=le;try{return pe()}finally{T=me}},e.unstable_scheduleCallback=function(le,pe,me){var we=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?we+me:we):me=we,le){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=me+ge,le={id:E++,callback:pe,priorityLevel:le,startTime:me,expirationTime:ge,sortIndex:-1},me>we?(le.sortIndex=me,t(g,le),r(w)===null&&le===r(g)&&(C?(A(Q),Q=-1):C=!0,ze(b,me-we))):(le.sortIndex=ge,t(w,le),P||D||(P=!0,Ue(V))),le},e.unstable_shouldYield=_e,e.unstable_wrapCallback=function(le){var pe=T;return function(){var me=T;T=pe;try{return le.apply(this,arguments)}finally{T=me}}}})(qc);$c.exports=qc;var sg=$c.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=qt,er=sg;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jc=new Set,Ji={};function Mn(e,t){fi(e,t),fi(e+"Capture",t)}function fi(e,t){for(Ji[e]=t,e=0;e<t.length;e++)Jc.add(t[e])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jo=Object.prototype.hasOwnProperty,og=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sf={},Tf={};function lg(e){return jo.call(Tf,e)?!0:jo.call(Sf,e)?!1:og.test(e)?Tf[e]=!0:(Sf[e]=!0,!1)}function ug(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fg(e,t,r,i){if(t===null||typeof t>"u"||ug(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bt(e,t,r,i,o,f,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=p}var wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wt[e]=new Bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wt[t]=new Bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wt[e]=new Bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wt[e]=new Bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wt[e]=new Bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wt[e]=new Bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wt[e]=new Bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wt[e]=new Bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wt[e]=new Bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var zl=/[\-:]([a-z])/g;function Vl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zl,Vl);wt[t]=new Bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zl,Vl);wt[t]=new Bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zl,Vl);wt[t]=new Bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wt[e]=new Bt(e,1,!1,e.toLowerCase(),null,!1,!1)});wt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wt[e]=new Bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hl(e,t,r,i){var o=wt.hasOwnProperty(t)?wt[t]:null;(o!==null?o.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fg(t,r,o,i)&&(r=null),i||o===null?lg(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Wr=Qc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ca=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Wl=Symbol.for("react.strict_mode"),Ko=Symbol.for("react.profiler"),Zc=Symbol.for("react.provider"),ed=Symbol.for("react.context"),Yl=Symbol.for("react.forward_ref"),zo=Symbol.for("react.suspense"),Vo=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),td=Symbol.for("react.offscreen"),_f=Symbol.iterator;function Li(e){return e===null||typeof e!="object"?null:(e=_f&&e[_f]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,ho;function bi(e){if(ho===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ho=t&&t[1]||""}return`
`+ho+e}var po=!1;function go(e,t){if(!e||po)return"";po=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var i=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){i=g}e.call(t.prototype)}else{try{throw Error()}catch(g){i=g}e()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),f=i.stack.split(`
`),p=o.length-1,m=f.length-1;1<=p&&0<=m&&o[p]!==f[m];)m--;for(;1<=p&&0<=m;p--,m--)if(o[p]!==f[m]){if(p!==1||m!==1)do if(p--,m--,0>m||o[p]!==f[m]){var w=`
`+o[p].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=p&&0<=m);break}}}finally{po=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bi(e):""}function cg(e){switch(e.tag){case 5:return bi(e.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 2:case 15:return e=go(e.type,!1),e;case 11:return e=go(e.type.render,!1),e;case 1:return e=go(e.type,!0),e;default:return""}}function Ho(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Wn:return"Portal";case Ko:return"Profiler";case Wl:return"StrictMode";case zo:return"Suspense";case Vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ed:return(e.displayName||"Context")+".Consumer";case Zc:return(e._context.displayName||"Context")+".Provider";case Yl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Ho(e.type)||"Memo";case qr:t=e._payload,e=e._init;try{return Ho(e(t))}catch{}}return null}function dg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ho(t);case 8:return t===Wl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hg(e){var t=rd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(p){i=""+p,f.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ia(e){e._valueTracker||(e._valueTracker=hg(e))}function nd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=rd(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wo(e,t){var r=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function wf(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=cn(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function id(e,t){t=t.checked,t!=null&&Hl(e,"checked",t,!1)}function Yo(e,t){id(e,t);var r=cn(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xo(e,t.type,cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Af(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xo(e,t,r){(t!=="number"||ds(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bi=Array.isArray;function ii(e,t,r,i){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+cn(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function $o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ie(92));if(Bi(r)){if(1<r.length)throw Error(ie(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:cn(r)}}function ad(e,t){var r=cn(t.value),i=cn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function kf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Oa,od=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pg=["Webkit","ms","Moz","O"];Object.keys(Ki).forEach(function(e){pg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ki[t]=Ki[e]})});function ld(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ki.hasOwnProperty(e)&&Ki[e]?(""+t).trim():t+"px"}function ud(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=ld(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var gg=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qo(e,t){if(t){if(gg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function Jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=null;function $l(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var el=null,ai=null,si=null;function Lf(e){if(e=ya(e)){if(typeof el!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=js(t),el(e.stateNode,e.type,t))}}function fd(e){ai?si?si.push(e):si=[e]:ai=e}function cd(){if(ai){var e=ai,t=si;if(si=ai=null,Lf(e),t)for(e=0;e<t.length;e++)Lf(t[e])}}function dd(e,t){return e(t)}function hd(){}var vo=!1;function pd(e,t,r){if(vo)return e(t,r);vo=!0;try{return dd(e,t,r)}finally{vo=!1,(ai!==null||si!==null)&&(hd(),cd())}}function ea(e,t){var r=e.stateNode;if(r===null)return null;var i=js(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ie(231,t,typeof r));return r}var tl=!1;if(Kr)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){tl=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{tl=!1}function vg(e,t,r,i,o,f,p,m,w){var g=Array.prototype.slice.call(arguments,3);try{t.apply(r,g)}catch(E){this.onError(E)}}var zi=!1,hs=null,ps=!1,rl=null,mg={onError:function(e){zi=!0,hs=e}};function yg(e,t,r,i,o,f,p,m,w){zi=!1,hs=null,vg.apply(mg,arguments)}function xg(e,t,r,i,o,f,p,m,w){if(yg.apply(this,arguments),zi){if(zi){var g=hs;zi=!1,hs=null}else throw Error(ie(198));ps||(ps=!0,rl=g)}}function bn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Df(e){if(bn(e)!==e)throw Error(ie(188))}function Eg(e){var t=e.alternate;if(!t){if(t=bn(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var r=e,i=t;;){var o=r.return;if(o===null)break;var f=o.alternate;if(f===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===r)return Df(o),e;if(f===i)return Df(o),t;f=f.sibling}throw Error(ie(188))}if(r.return!==i.return)r=o,i=f;else{for(var p=!1,m=o.child;m;){if(m===r){p=!0,r=o,i=f;break}if(m===i){p=!0,i=o,r=f;break}m=m.sibling}if(!p){for(m=f.child;m;){if(m===r){p=!0,r=f,i=o;break}if(m===i){p=!0,i=f,r=o;break}m=m.sibling}if(!p)throw Error(ie(189))}}if(r.alternate!==i)throw Error(ie(190))}if(r.tag!==3)throw Error(ie(188));return r.stateNode.current===r?e:t}function vd(e){return e=Eg(e),e!==null?md(e):null}function md(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=md(e);if(t!==null)return t;e=e.sibling}return null}var yd=er.unstable_scheduleCallback,Cf=er.unstable_cancelCallback,Sg=er.unstable_shouldYield,Tg=er.unstable_requestPaint,rt=er.unstable_now,_g=er.unstable_getCurrentPriorityLevel,ql=er.unstable_ImmediatePriority,xd=er.unstable_UserBlockingPriority,gs=er.unstable_NormalPriority,wg=er.unstable_LowPriority,Ed=er.unstable_IdlePriority,bs=null,Cr=null;function Ag(e){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(bs,e,void 0,(e.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:Lg,Rg=Math.log,kg=Math.LN2;function Lg(e){return e>>>=0,e===0?32:31-(Rg(e)/kg|0)|0}var Pa=64,Fa=4194304;function Ui(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,f=e.pingedLanes,p=r&268435455;if(p!==0){var m=p&~o;m!==0?i=Ui(m):(f&=p,f!==0&&(i=Ui(f)))}else p=r&~o,p!==0?i=Ui(p):f!==0&&(i=Ui(f));if(i===0)return 0;if(t!==0&&t!==i&&!(t&o)&&(o=i&-i,f=t&-t,o>=f||o===16&&(f&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Sr(t),o=1<<r,i|=e[r],t&=~o;return i}function Dg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes;0<f;){var p=31-Sr(f),m=1<<p,w=o[p];w===-1?(!(m&r)||m&i)&&(o[p]=Dg(m,t)):w<=t&&(e.expiredLanes|=m),f&=~m}}function nl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sd(){var e=Pa;return Pa<<=1,!(Pa&4194240)&&(Pa=64),e}function mo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function va(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sr(t),e[t]=r}function Ig(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Sr(r),f=1<<o;t[o]=0,i[o]=-1,e[o]=-1,r&=~f}}function Ql(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Sr(r),o=1<<i;o&t|e[i]&t&&(e[i]|=t),r&=~o}}var Ge=0;function Td(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var _d,Jl,wd,Ad,Rd,il=!1,Na=[],rn=null,nn=null,an=null,ta=new Map,ra=new Map,Jr=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function If(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":ta.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(t.pointerId)}}function Ci(e,t,r,i,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[o]},t!==null&&(t=ya(t),t!==null&&Jl(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Pg(e,t,r,i,o){switch(t){case"focusin":return rn=Ci(rn,e,t,r,i,o),!0;case"dragenter":return nn=Ci(nn,e,t,r,i,o),!0;case"mouseover":return an=Ci(an,e,t,r,i,o),!0;case"pointerover":var f=o.pointerId;return ta.set(f,Ci(ta.get(f)||null,e,t,r,i,o)),!0;case"gotpointercapture":return f=o.pointerId,ra.set(f,Ci(ra.get(f)||null,e,t,r,i,o)),!0}return!1}function kd(e){var t=Rn(e.target);if(t!==null){var r=bn(t);if(r!==null){if(t=r.tag,t===13){if(t=gd(r),t!==null){e.blockedOn=t,Rd(e.priority,function(){wd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Za(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=al(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Zo=i,r.target.dispatchEvent(i),Zo=null}else return t=ya(r),t!==null&&Jl(t),e.blockedOn=r,!1;t.shift()}return!0}function Of(e,t,r){Za(e)&&r.delete(t)}function Fg(){il=!1,rn!==null&&Za(rn)&&(rn=null),nn!==null&&Za(nn)&&(nn=null),an!==null&&Za(an)&&(an=null),ta.forEach(Of),ra.forEach(Of)}function Ii(e,t){e.blockedOn===t&&(e.blockedOn=null,il||(il=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Fg)))}function na(e){function t(o){return Ii(o,e)}if(0<Na.length){Ii(Na[0],e);for(var r=1;r<Na.length;r++){var i=Na[r];i.blockedOn===e&&(i.blockedOn=null)}}for(rn!==null&&Ii(rn,e),nn!==null&&Ii(nn,e),an!==null&&Ii(an,e),ta.forEach(t),ra.forEach(t),r=0;r<Jr.length;r++)i=Jr[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)kd(r),r.blockedOn===null&&Jr.shift()}var oi=Wr.ReactCurrentBatchConfig,ms=!0;function Ng(e,t,r,i){var o=Ge,f=oi.transition;oi.transition=null;try{Ge=1,Zl(e,t,r,i)}finally{Ge=o,oi.transition=f}}function Mg(e,t,r,i){var o=Ge,f=oi.transition;oi.transition=null;try{Ge=4,Zl(e,t,r,i)}finally{Ge=o,oi.transition=f}}function Zl(e,t,r,i){if(ms){var o=al(e,t,r,i);if(o===null)ko(e,t,i,ys,r),If(e,i);else if(Pg(o,e,t,r,i))i.stopPropagation();else if(If(e,i),t&4&&-1<Og.indexOf(e)){for(;o!==null;){var f=ya(o);if(f!==null&&_d(f),f=al(e,t,r,i),f===null&&ko(e,t,i,ys,r),f===o)break;o=f}o!==null&&i.stopPropagation()}else ko(e,t,i,null,r)}}var ys=null;function al(e,t,r,i){if(ys=null,e=$l(i),e=Rn(e),e!==null)if(t=bn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ys=e,null}function Ld(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_g()){case ql:return 1;case xd:return 4;case gs:case wg:return 16;case Ed:return 536870912;default:return 16}default:return 16}}var en=null,eu=null,es=null;function Dd(){if(es)return es;var e,t=eu,r=t.length,i,o="value"in en?en.value:en.textContent,f=o.length;for(e=0;e<r&&t[e]===o[e];e++);var p=r-e;for(i=1;i<=p&&t[r-i]===o[f-i];i++);return es=o.slice(e,1<i?1-i:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ma(){return!0}function Pf(){return!1}function rr(e){function t(r,i,o,f,p){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=f,this.target=p,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(r=e[m],this[m]=r?r(f):f[m]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ma:Pf,this.isPropagationStopped=Pf,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),t}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tu=rr(yi),ma=Ze({},yi,{view:0,detail:0}),bg=rr(ma),yo,xo,Oi,Bs=Ze({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oi&&(Oi&&e.type==="mousemove"?(yo=e.screenX-Oi.screenX,xo=e.screenY-Oi.screenY):xo=yo=0,Oi=e),yo)},movementY:function(e){return"movementY"in e?e.movementY:xo}}),Ff=rr(Bs),Bg=Ze({},Bs,{dataTransfer:0}),Ug=rr(Bg),Gg=Ze({},ma,{relatedTarget:0}),Eo=rr(Gg),jg=Ze({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Kg=rr(jg),zg=Ze({},yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vg=rr(zg),Hg=Ze({},yi,{data:0}),Nf=rr(Hg),Wg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $g(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xg[e])?!!t[e]:!1}function ru(){return $g}var qg=Ze({},ma,{key:function(e){if(e.key){var t=Wg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ts(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(e){return e.type==="keypress"?ts(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ts(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qg=rr(qg),Jg=Ze({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mf=rr(Jg),Zg=Ze({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),ev=rr(Zg),tv=Ze({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),rv=rr(tv),nv=Ze({},Bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iv=rr(nv),av=[9,13,27,32],nu=Kr&&"CompositionEvent"in window,Vi=null;Kr&&"documentMode"in document&&(Vi=document.documentMode);var sv=Kr&&"TextEvent"in window&&!Vi,Cd=Kr&&(!nu||Vi&&8<Vi&&11>=Vi),bf=" ",Bf=!1;function Id(e,t){switch(e){case"keyup":return av.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Od(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xn=!1;function ov(e,t){switch(e){case"compositionend":return Od(t);case"keypress":return t.which!==32?null:(Bf=!0,bf);case"textInput":return e=t.data,e===bf&&Bf?null:e;default:return null}}function lv(e,t){if(Xn)return e==="compositionend"||!nu&&Id(e,t)?(e=Dd(),es=eu=en=null,Xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cd&&t.locale!=="ko"?null:t.data;default:return null}}var uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uv[e.type]:t==="textarea"}function Pd(e,t,r,i){fd(i),t=xs(t,"onChange"),0<t.length&&(r=new tu("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Hi=null,ia=null;function fv(e){Vd(e,0)}function Us(e){var t=Qn(e);if(nd(t))return e}function cv(e,t){if(e==="change")return t}var Fd=!1;if(Kr){var So;if(Kr){var To="oninput"in document;if(!To){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),To=typeof Gf.oninput=="function"}So=To}else So=!1;Fd=So&&(!document.documentMode||9<document.documentMode)}function jf(){Hi&&(Hi.detachEvent("onpropertychange",Nd),ia=Hi=null)}function Nd(e){if(e.propertyName==="value"&&Us(ia)){var t=[];Pd(t,ia,e,$l(e)),pd(fv,t)}}function dv(e,t,r){e==="focusin"?(jf(),Hi=t,ia=r,Hi.attachEvent("onpropertychange",Nd)):e==="focusout"&&jf()}function hv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Us(ia)}function pv(e,t){if(e==="click")return Us(t)}function gv(e,t){if(e==="input"||e==="change")return Us(t)}function vv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _r=typeof Object.is=="function"?Object.is:vv;function aa(e,t){if(_r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!jo.call(t,o)||!_r(e[o],t[o]))return!1}return!0}function Kf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zf(e,t){var r=Kf(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kf(r)}}function Md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bd(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ds(e.document)}return t}function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mv(e){var t=bd(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Md(r.ownerDocument.documentElement,r)){if(i!==null&&iu(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,f=Math.min(i.start,o);i=i.end===void 0?f:Math.min(i.end,o),!e.extend&&f>i&&(o=i,i=f,f=o),o=zf(r,f);var p=zf(r,i);o&&p&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yv=Kr&&"documentMode"in document&&11>=document.documentMode,$n=null,sl=null,Wi=null,ol=!1;function Vf(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ol||$n==null||$n!==ds(i)||(i=$n,"selectionStart"in i&&iu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Wi&&aa(Wi,i)||(Wi=i,i=xs(sl,"onSelect"),0<i.length&&(t=new tu("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=$n)))}function ba(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var qn={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},_o={},Bd={};Kr&&(Bd=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Gs(e){if(_o[e])return _o[e];if(!qn[e])return e;var t=qn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Bd)return _o[e]=t[r];return e}var Ud=Gs("animationend"),Gd=Gs("animationiteration"),jd=Gs("animationstart"),Kd=Gs("transitionend"),zd=new Map,Hf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){zd.set(e,t),Mn(t,[e])}for(var wo=0;wo<Hf.length;wo++){var Ao=Hf[wo],xv=Ao.toLowerCase(),Ev=Ao[0].toUpperCase()+Ao.slice(1);hn(xv,"on"+Ev)}hn(Ud,"onAnimationEnd");hn(Gd,"onAnimationIteration");hn(jd,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(Kd,"onTransitionEnd");fi("onMouseEnter",["mouseout","mouseover"]);fi("onMouseLeave",["mouseout","mouseover"]);fi("onPointerEnter",["pointerout","pointerover"]);fi("onPointerLeave",["pointerout","pointerover"]);Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gi));function Wf(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,xg(i,t,void 0,e),e.currentTarget=null}function Vd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var p=i.length-1;0<=p;p--){var m=i[p],w=m.instance,g=m.currentTarget;if(m=m.listener,w!==f&&o.isPropagationStopped())break e;Wf(o,m,g),f=w}else for(p=0;p<i.length;p++){if(m=i[p],w=m.instance,g=m.currentTarget,m=m.listener,w!==f&&o.isPropagationStopped())break e;Wf(o,m,g),f=w}}}if(ps)throw e=rl,ps=!1,rl=null,e}function Xe(e,t){var r=t[dl];r===void 0&&(r=t[dl]=new Set);var i=e+"__bubble";r.has(i)||(Hd(t,e,2,!1),r.add(i))}function Ro(e,t,r){var i=0;t&&(i|=4),Hd(r,e,i,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function sa(e){if(!e[Ba]){e[Ba]=!0,Jc.forEach(function(r){r!=="selectionchange"&&(Sv.has(r)||Ro(r,!1,e),Ro(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ba]||(t[Ba]=!0,Ro("selectionchange",!1,t))}}function Hd(e,t,r,i){switch(Ld(t)){case 1:var o=Ng;break;case 4:o=Mg;break;default:o=Zl}r=o.bind(null,t,r,e),o=void 0,!tl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function ko(e,t,r,i,o){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var m=i.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(p===4)for(p=i.return;p!==null;){var w=p.tag;if((w===3||w===4)&&(w=p.stateNode.containerInfo,w===o||w.nodeType===8&&w.parentNode===o))return;p=p.return}for(;m!==null;){if(p=Rn(m),p===null)return;if(w=p.tag,w===5||w===6){i=f=p;continue e}m=m.parentNode}}i=i.return}pd(function(){var g=f,E=$l(r),B=[];e:{var T=zd.get(e);if(T!==void 0){var D=tu,P=e;switch(e){case"keypress":if(ts(r)===0)break e;case"keydown":case"keyup":D=Qg;break;case"focusin":P="focus",D=Eo;break;case"focusout":P="blur",D=Eo;break;case"beforeblur":case"afterblur":D=Eo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=ev;break;case Ud:case Gd:case jd:D=Kg;break;case Kd:D=rv;break;case"scroll":D=bg;break;case"wheel":D=iv;break;case"copy":case"cut":case"paste":D=Vg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=Mf}var C=(t&4)!==0,z=!C&&e==="scroll",A=C?T!==null?T+"Capture":null:T;C=[];for(var _=g,F;_!==null;){F=_;var b=F.stateNode;if(F.tag===5&&b!==null&&(F=b,A!==null&&(b=ea(_,A),b!=null&&C.push(oa(_,b,F)))),z)break;_=_.return}0<C.length&&(T=new D(T,P,null,r,E),B.push({event:T,listeners:C}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",T&&r!==Zo&&(P=r.relatedTarget||r.fromElement)&&(Rn(P)||P[zr]))break e;if((D||T)&&(T=E.window===E?E:(T=E.ownerDocument)?T.defaultView||T.parentWindow:window,D?(P=r.relatedTarget||r.toElement,D=g,P=P?Rn(P):null,P!==null&&(z=bn(P),P!==z||P.tag!==5&&P.tag!==6)&&(P=null)):(D=null,P=g),D!==P)){if(C=Ff,b="onMouseLeave",A="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(C=Mf,b="onPointerLeave",A="onPointerEnter",_="pointer"),z=D==null?T:Qn(D),F=P==null?T:Qn(P),T=new C(b,_+"leave",D,r,E),T.target=z,T.relatedTarget=F,b=null,Rn(E)===g&&(C=new C(A,_+"enter",P,r,E),C.target=F,C.relatedTarget=z,b=C),z=b,D&&P)t:{for(C=D,A=P,_=0,F=C;F;F=Vn(F))_++;for(F=0,b=A;b;b=Vn(b))F++;for(;0<_-F;)C=Vn(C),_--;for(;0<F-_;)A=Vn(A),F--;for(;_--;){if(C===A||A!==null&&C===A.alternate)break t;C=Vn(C),A=Vn(A)}C=null}else C=null;D!==null&&Yf(B,T,D,C,!1),P!==null&&z!==null&&Yf(B,z,P,C,!0)}}e:{if(T=g?Qn(g):window,D=T.nodeName&&T.nodeName.toLowerCase(),D==="select"||D==="input"&&T.type==="file")var V=cv;else if(Uf(T))if(Fd)V=gv;else{V=hv;var Y=dv}else(D=T.nodeName)&&D.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(V=pv);if(V&&(V=V(e,g))){Pd(B,V,r,E);break e}Y&&Y(e,T,g),e==="focusout"&&(Y=T._wrapperState)&&Y.controlled&&T.type==="number"&&Xo(T,"number",T.value)}switch(Y=g?Qn(g):window,e){case"focusin":(Uf(Y)||Y.contentEditable==="true")&&($n=Y,sl=g,Wi=null);break;case"focusout":Wi=sl=$n=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,Vf(B,r,E);break;case"selectionchange":if(yv)break;case"keydown":case"keyup":Vf(B,r,E)}var X;if(nu)e:{switch(e){case"compositionstart":var Q="onCompositionStart";break e;case"compositionend":Q="onCompositionEnd";break e;case"compositionupdate":Q="onCompositionUpdate";break e}Q=void 0}else Xn?Id(e,r)&&(Q="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Q="onCompositionStart");Q&&(Cd&&r.locale!=="ko"&&(Xn||Q!=="onCompositionStart"?Q==="onCompositionEnd"&&Xn&&(X=Dd()):(en=E,eu="value"in en?en.value:en.textContent,Xn=!0)),Y=xs(g,Q),0<Y.length&&(Q=new Nf(Q,e,null,r,E),B.push({event:Q,listeners:Y}),X?Q.data=X:(X=Od(r),X!==null&&(Q.data=X)))),(X=sv?ov(e,r):lv(e,r))&&(g=xs(g,"onBeforeInput"),0<g.length&&(E=new Nf("onBeforeInput","beforeinput",null,r,E),B.push({event:E,listeners:g}),E.data=X))}Vd(B,t)})}function oa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xs(e,t){for(var r=t+"Capture",i=[];e!==null;){var o=e,f=o.stateNode;o.tag===5&&f!==null&&(o=f,f=ea(e,r),f!=null&&i.unshift(oa(e,f,o)),f=ea(e,t),f!=null&&i.push(oa(e,f,o))),e=e.return}return i}function Vn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yf(e,t,r,i,o){for(var f=t._reactName,p=[];r!==null&&r!==i;){var m=r,w=m.alternate,g=m.stateNode;if(w!==null&&w===i)break;m.tag===5&&g!==null&&(m=g,o?(w=ea(r,f),w!=null&&p.unshift(oa(r,w,m))):o||(w=ea(r,f),w!=null&&p.push(oa(r,w,m)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var Tv=/\r\n?/g,_v=/\u0000|\uFFFD/g;function Xf(e){return(typeof e=="string"?e:""+e).replace(Tv,`
`).replace(_v,"")}function Ua(e,t,r){if(t=Xf(t),Xf(e)!==t&&r)throw Error(ie(425))}function Es(){}var ll=null,ul=null;function fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cl=typeof setTimeout=="function"?setTimeout:void 0,wv=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,Av=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(Rv)}:cl;function Rv(e){setTimeout(function(){throw e})}function Lo(e,t){var r=t,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),na(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);na(t)}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Dr="__reactFiber$"+xi,la="__reactProps$"+xi,zr="__reactContainer$"+xi,dl="__reactEvents$"+xi,kv="__reactListeners$"+xi,Lv="__reactHandles$"+xi;function Rn(e){var t=e[Dr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zr]||r[Dr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qf(e);e!==null;){if(r=e[Dr])return r;e=qf(e)}return t}e=r,r=e.parentNode}return null}function ya(e){return e=e[Dr]||e[zr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function js(e){return e[la]||null}var hl=[],Jn=-1;function pn(e){return{current:e}}function $e(e){0>Jn||(e.current=hl[Jn],hl[Jn]=null,Jn--)}function Ve(e,t){Jn++,hl[Jn]=e.current,e.current=t}var dn={},It=pn(dn),Ht=pn(!1),In=dn;function ci(e,t){var r=e.type.contextTypes;if(!r)return dn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={},f;for(f in r)o[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Wt(e){return e=e.childContextTypes,e!=null}function Ss(){$e(Ht),$e(It)}function Qf(e,t,r){if(It.current!==dn)throw Error(ie(168));Ve(It,t),Ve(Ht,r)}function Wd(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in t))throw Error(ie(108,dg(e)||"Unknown",o));return Ze({},r,i)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,In=It.current,Ve(It,e),Ve(Ht,Ht.current),!0}function Jf(e,t,r){var i=e.stateNode;if(!i)throw Error(ie(169));r?(e=Wd(e,t,In),i.__reactInternalMemoizedMergedChildContext=e,$e(Ht),$e(It),Ve(It,e)):$e(Ht),Ve(Ht,r)}var Br=null,Ks=!1,Do=!1;function Yd(e){Br===null?Br=[e]:Br.push(e)}function Dv(e){Ks=!0,Yd(e)}function gn(){if(!Do&&Br!==null){Do=!0;var e=0,t=Ge;try{var r=Br;for(Ge=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Br=null,Ks=!1}catch(o){throw Br!==null&&(Br=Br.slice(e+1)),yd(ql,gn),o}finally{Ge=t,Do=!1}}return null}var Zn=[],ei=0,_s=null,ws=0,ir=[],ar=0,On=null,Ur=1,Gr="";function wn(e,t){Zn[ei++]=ws,Zn[ei++]=_s,_s=e,ws=t}function Xd(e,t,r){ir[ar++]=Ur,ir[ar++]=Gr,ir[ar++]=On,On=e;var i=Ur;e=Gr;var o=32-Sr(i)-1;i&=~(1<<o),r+=1;var f=32-Sr(t)+o;if(30<f){var p=o-o%5;f=(i&(1<<p)-1).toString(32),i>>=p,o-=p,Ur=1<<32-Sr(t)+o|r<<o|i,Gr=f+e}else Ur=1<<f|r<<o|i,Gr=e}function au(e){e.return!==null&&(wn(e,1),Xd(e,1,0))}function su(e){for(;e===_s;)_s=Zn[--ei],Zn[ei]=null,ws=Zn[--ei],Zn[ei]=null;for(;e===On;)On=ir[--ar],ir[ar]=null,Gr=ir[--ar],ir[ar]=null,Ur=ir[--ar],ir[ar]=null}var Zt=null,Jt=null,qe=!1,Er=null;function $d(e,t){var r=or(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Zf(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,Jt=sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,Jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=On!==null?{id:Ur,overflow:Gr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=or(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Zt=e,Jt=null,!0):!1;default:return!1}}function pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(qe){var t=Jt;if(t){var r=t;if(!Zf(e,t)){if(pl(e))throw Error(ie(418));t=sn(r.nextSibling);var i=Zt;t&&Zf(e,t)?$d(i,r):(e.flags=e.flags&-4097|2,qe=!1,Zt=e)}}else{if(pl(e))throw Error(ie(418));e.flags=e.flags&-4097|2,qe=!1,Zt=e}}}function ec(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Ga(e){if(e!==Zt)return!1;if(!qe)return ec(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fl(e.type,e.memoizedProps)),t&&(t=Jt)){if(pl(e))throw qd(),Error(ie(418));for(;t;)$d(e,t),t=sn(t.nextSibling)}if(ec(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jt=sn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jt=null}}else Jt=Zt?sn(e.stateNode.nextSibling):null;return!0}function qd(){for(var e=Jt;e;)e=sn(e.nextSibling)}function di(){Jt=Zt=null,qe=!1}function ou(e){Er===null?Er=[e]:Er.push(e)}var Cv=Wr.ReactCurrentBatchConfig;function mr(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var As=pn(null),Rs=null,ti=null,lu=null;function uu(){lu=ti=Rs=null}function fu(e){var t=As.current;$e(As),e._currentValue=t}function vl(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function li(e,t){Rs=e,lu=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vt=!0),e.firstContext=null)}function ur(e){var t=e._currentValue;if(lu!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(Rs===null)throw Error(ie(308));ti=e,Rs.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var kn=null;function cu(e){kn===null?kn=[e]:kn.push(e)}function Qd(e,t,r,i){var o=t.interleaved;return o===null?(r.next=r,cu(t)):(r.next=o.next,o.next=r),t.interleaved=r,Vr(e,i)}function Vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qr=!1;function du(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,Vr(e,r)}return o=i.interleaved,o===null?(t.next=t,cu(i)):(t.next=o.next,o.next=t),i.interleaved=t,Vr(e,r)}function rs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Ql(e,r)}}function tc(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?o=f=p:f=f.next=p,r=r.next}while(r!==null);f===null?o=f=t:f=f.next=t}else o=f=t;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ks(e,t,r,i){var o=e.updateQueue;Qr=!1;var f=o.firstBaseUpdate,p=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var w=m,g=w.next;w.next=null,p===null?f=g:p.next=g,p=w;var E=e.alternate;E!==null&&(E=E.updateQueue,m=E.lastBaseUpdate,m!==p&&(m===null?E.firstBaseUpdate=g:m.next=g,E.lastBaseUpdate=w))}if(f!==null){var B=o.baseState;p=0,E=g=w=null,m=f;do{var T=m.lane,D=m.eventTime;if((i&T)===T){E!==null&&(E=E.next={eventTime:D,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var P=e,C=m;switch(T=t,D=r,C.tag){case 1:if(P=C.payload,typeof P=="function"){B=P.call(D,B,T);break e}B=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=C.payload,T=typeof P=="function"?P.call(D,B,T):P,T==null)break e;B=Ze({},B,T);break e;case 2:Qr=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,T=o.effects,T===null?o.effects=[m]:T.push(m))}else D={eventTime:D,lane:T,tag:m.tag,payload:m.payload,callback:m.callback,next:null},E===null?(g=E=D,w=B):E=E.next=D,p|=T;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;T=m,m=T.next,T.next=null,o.lastBaseUpdate=T,o.shared.pending=null}}while(!0);if(E===null&&(w=B),o.baseState=w,o.firstBaseUpdate=g,o.lastBaseUpdate=E,t=o.shared.interleaved,t!==null){o=t;do p|=o.lane,o=o.next;while(o!==t)}else f===null&&(o.shared.lanes=0);Fn|=p,e.lanes=p,e.memoizedState=B}}function rc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(ie(191,o));o.call(i)}}}var Zd=new Qc.Component().refs;function ml(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zs={isMounted:function(e){return(e=e._reactInternals)?bn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Mt(),o=un(e),f=jr(i,o);f.payload=t,r!=null&&(f.callback=r),t=on(e,f,o),t!==null&&(Tr(t,e,o,i),rs(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Mt(),o=un(e),f=jr(i,o);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=on(e,f,o),t!==null&&(Tr(t,e,o,i),rs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mt(),i=un(e),o=jr(r,i);o.tag=2,t!=null&&(o.callback=t),t=on(e,o,i),t!==null&&(Tr(t,e,i,r),rs(t,e,i))}};function nc(e,t,r,i,o,f,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,p):t.prototype&&t.prototype.isPureReactComponent?!aa(r,i)||!aa(o,f):!0}function eh(e,t,r){var i=!1,o=dn,f=t.contextType;return typeof f=="object"&&f!==null?f=ur(f):(o=Wt(t)?In:It.current,i=t.contextTypes,f=(i=i!=null)?ci(e,o):dn),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=f),t}function ic(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function yl(e,t,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Zd,du(e);var f=t.contextType;typeof f=="object"&&f!==null?o.context=ur(f):(f=Wt(t)?In:It.current,o.context=ci(e,f)),o.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ml(e,t,f,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&zs.enqueueReplaceState(o,o.state,null),ks(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Pi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ie(309));var i=r.stateNode}if(!i)throw Error(ie(147,e));var o=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(p){var m=o.refs;m===Zd&&(m=o.refs={}),p===null?delete m[f]:m[f]=p},t._stringRef=f,t)}if(typeof e!="string")throw Error(ie(284));if(!r._owner)throw Error(ie(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ac(e){var t=e._init;return t(e._payload)}function th(e){function t(A,_){if(e){var F=A.deletions;F===null?(A.deletions=[_],A.flags|=16):F.push(_)}}function r(A,_){if(!e)return null;for(;_!==null;)t(A,_),_=_.sibling;return null}function i(A,_){for(A=new Map;_!==null;)_.key!==null?A.set(_.key,_):A.set(_.index,_),_=_.sibling;return A}function o(A,_){return A=fn(A,_),A.index=0,A.sibling=null,A}function f(A,_,F){return A.index=F,e?(F=A.alternate,F!==null?(F=F.index,F<_?(A.flags|=2,_):F):(A.flags|=2,_)):(A.flags|=1048576,_)}function p(A){return e&&A.alternate===null&&(A.flags|=2),A}function m(A,_,F,b){return _===null||_.tag!==6?(_=Mo(F,A.mode,b),_.return=A,_):(_=o(_,F),_.return=A,_)}function w(A,_,F,b){var V=F.type;return V===Yn?E(A,_,F.props.children,b,F.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===qr&&ac(V)===_.type)?(b=o(_,F.props),b.ref=Pi(A,_,F),b.return=A,b):(b=ls(F.type,F.key,F.props,null,A.mode,b),b.ref=Pi(A,_,F),b.return=A,b)}function g(A,_,F,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==F.containerInfo||_.stateNode.implementation!==F.implementation?(_=bo(F,A.mode,b),_.return=A,_):(_=o(_,F.children||[]),_.return=A,_)}function E(A,_,F,b,V){return _===null||_.tag!==7?(_=Cn(F,A.mode,b,V),_.return=A,_):(_=o(_,F),_.return=A,_)}function B(A,_,F){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Mo(""+_,A.mode,F),_.return=A,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ca:return F=ls(_.type,_.key,_.props,null,A.mode,F),F.ref=Pi(A,null,_),F.return=A,F;case Wn:return _=bo(_,A.mode,F),_.return=A,_;case qr:var b=_._init;return B(A,b(_._payload),F)}if(Bi(_)||Li(_))return _=Cn(_,A.mode,F,null),_.return=A,_;ja(A,_)}return null}function T(A,_,F,b){var V=_!==null?_.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return V!==null?null:m(A,_,""+F,b);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ca:return F.key===V?w(A,_,F,b):null;case Wn:return F.key===V?g(A,_,F,b):null;case qr:return V=F._init,T(A,_,V(F._payload),b)}if(Bi(F)||Li(F))return V!==null?null:E(A,_,F,b,null);ja(A,F)}return null}function D(A,_,F,b,V){if(typeof b=="string"&&b!==""||typeof b=="number")return A=A.get(F)||null,m(_,A,""+b,V);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ca:return A=A.get(b.key===null?F:b.key)||null,w(_,A,b,V);case Wn:return A=A.get(b.key===null?F:b.key)||null,g(_,A,b,V);case qr:var Y=b._init;return D(A,_,F,Y(b._payload),V)}if(Bi(b)||Li(b))return A=A.get(F)||null,E(_,A,b,V,null);ja(_,b)}return null}function P(A,_,F,b){for(var V=null,Y=null,X=_,Q=_=0,se=null;X!==null&&Q<F.length;Q++){X.index>Q?(se=X,X=null):se=X.sibling;var oe=T(A,X,F[Q],b);if(oe===null){X===null&&(X=se);break}e&&X&&oe.alternate===null&&t(A,X),_=f(oe,_,Q),Y===null?V=oe:Y.sibling=oe,Y=oe,X=se}if(Q===F.length)return r(A,X),qe&&wn(A,Q),V;if(X===null){for(;Q<F.length;Q++)X=B(A,F[Q],b),X!==null&&(_=f(X,_,Q),Y===null?V=X:Y.sibling=X,Y=X);return qe&&wn(A,Q),V}for(X=i(A,X);Q<F.length;Q++)se=D(X,A,Q,F[Q],b),se!==null&&(e&&se.alternate!==null&&X.delete(se.key===null?Q:se.key),_=f(se,_,Q),Y===null?V=se:Y.sibling=se,Y=se);return e&&X.forEach(function(_e){return t(A,_e)}),qe&&wn(A,Q),V}function C(A,_,F,b){var V=Li(F);if(typeof V!="function")throw Error(ie(150));if(F=V.call(F),F==null)throw Error(ie(151));for(var Y=V=null,X=_,Q=_=0,se=null,oe=F.next();X!==null&&!oe.done;Q++,oe=F.next()){X.index>Q?(se=X,X=null):se=X.sibling;var _e=T(A,X,oe.value,b);if(_e===null){X===null&&(X=se);break}e&&X&&_e.alternate===null&&t(A,X),_=f(_e,_,Q),Y===null?V=_e:Y.sibling=_e,Y=_e,X=se}if(oe.done)return r(A,X),qe&&wn(A,Q),V;if(X===null){for(;!oe.done;Q++,oe=F.next())oe=B(A,oe.value,b),oe!==null&&(_=f(oe,_,Q),Y===null?V=oe:Y.sibling=oe,Y=oe);return qe&&wn(A,Q),V}for(X=i(A,X);!oe.done;Q++,oe=F.next())oe=D(X,A,Q,oe.value,b),oe!==null&&(e&&oe.alternate!==null&&X.delete(oe.key===null?Q:oe.key),_=f(oe,_,Q),Y===null?V=oe:Y.sibling=oe,Y=oe);return e&&X.forEach(function(Be){return t(A,Be)}),qe&&wn(A,Q),V}function z(A,_,F,b){if(typeof F=="object"&&F!==null&&F.type===Yn&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Ca:e:{for(var V=F.key,Y=_;Y!==null;){if(Y.key===V){if(V=F.type,V===Yn){if(Y.tag===7){r(A,Y.sibling),_=o(Y,F.props.children),_.return=A,A=_;break e}}else if(Y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===qr&&ac(V)===Y.type){r(A,Y.sibling),_=o(Y,F.props),_.ref=Pi(A,Y,F),_.return=A,A=_;break e}r(A,Y);break}else t(A,Y);Y=Y.sibling}F.type===Yn?(_=Cn(F.props.children,A.mode,b,F.key),_.return=A,A=_):(b=ls(F.type,F.key,F.props,null,A.mode,b),b.ref=Pi(A,_,F),b.return=A,A=b)}return p(A);case Wn:e:{for(Y=F.key;_!==null;){if(_.key===Y)if(_.tag===4&&_.stateNode.containerInfo===F.containerInfo&&_.stateNode.implementation===F.implementation){r(A,_.sibling),_=o(_,F.children||[]),_.return=A,A=_;break e}else{r(A,_);break}else t(A,_);_=_.sibling}_=bo(F,A.mode,b),_.return=A,A=_}return p(A);case qr:return Y=F._init,z(A,_,Y(F._payload),b)}if(Bi(F))return P(A,_,F,b);if(Li(F))return C(A,_,F,b);ja(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,_!==null&&_.tag===6?(r(A,_.sibling),_=o(_,F),_.return=A,A=_):(r(A,_),_=Mo(F,A.mode,b),_.return=A,A=_),p(A)):r(A,_)}return z}var hi=th(!0),rh=th(!1),xa={},Ir=pn(xa),ua=pn(xa),fa=pn(xa);function Ln(e){if(e===xa)throw Error(ie(174));return e}function hu(e,t){switch(Ve(fa,t),Ve(ua,e),Ve(Ir,xa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qo(t,e)}$e(Ir),Ve(Ir,t)}function pi(){$e(Ir),$e(ua),$e(fa)}function nh(e){Ln(fa.current);var t=Ln(Ir.current),r=qo(t,e.type);t!==r&&(Ve(ua,e),Ve(Ir,r))}function pu(e){ua.current===e&&($e(Ir),$e(ua))}var Qe=pn(0);function Ls(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Co=[];function gu(){for(var e=0;e<Co.length;e++)Co[e]._workInProgressVersionPrimary=null;Co.length=0}var ns=Wr.ReactCurrentDispatcher,Io=Wr.ReactCurrentBatchConfig,Pn=0,Je=null,ct=null,gt=null,Ds=!1,Yi=!1,ca=0,Iv=0;function Lt(){throw Error(ie(321))}function vu(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_r(e[r],t[r]))return!1;return!0}function mu(e,t,r,i,o,f){if(Pn=f,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ns.current=e===null||e.memoizedState===null?Nv:Mv,e=r(i,o),Yi){f=0;do{if(Yi=!1,ca=0,25<=f)throw Error(ie(301));f+=1,gt=ct=null,t.updateQueue=null,ns.current=bv,e=r(i,o)}while(Yi)}if(ns.current=Cs,t=ct!==null&&ct.next!==null,Pn=0,gt=ct=Je=null,Ds=!1,t)throw Error(ie(300));return e}function yu(){var e=ca!==0;return ca=0,e}function Lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Je.memoizedState=gt=e:gt=gt.next=e,gt}function fr(){if(ct===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=ct.next;var t=gt===null?Je.memoizedState:gt.next;if(t!==null)gt=t,ct=e;else{if(e===null)throw Error(ie(310));ct=e,e={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?Je.memoizedState=gt=e:gt=gt.next=e}return gt}function da(e,t){return typeof t=="function"?t(e):t}function Oo(e){var t=fr(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var i=ct,o=i.baseQueue,f=r.pending;if(f!==null){if(o!==null){var p=o.next;o.next=f.next,f.next=p}i.baseQueue=o=f,r.pending=null}if(o!==null){f=o.next,i=i.baseState;var m=p=null,w=null,g=f;do{var E=g.lane;if((Pn&E)===E)w!==null&&(w=w.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:e(i,g.action);else{var B={lane:E,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};w===null?(m=w=B,p=i):w=w.next=B,Je.lanes|=E,Fn|=E}g=g.next}while(g!==null&&g!==f);w===null?p=i:w.next=m,_r(i,t.memoizedState)||(Vt=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=w,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do f=o.lane,Je.lanes|=f,Fn|=f,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Po(e){var t=fr(),r=t.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,f=t.memoizedState;if(o!==null){r.pending=null;var p=o=o.next;do f=e(f,p.action),p=p.next;while(p!==o);_r(f,t.memoizedState)||(Vt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function ih(){}function ah(e,t){var r=Je,i=fr(),o=t(),f=!_r(i.memoizedState,o);if(f&&(i.memoizedState=o,Vt=!0),i=i.queue,xu(lh.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,ha(9,oh.bind(null,r,i,o,t),void 0,null),vt===null)throw Error(ie(349));Pn&30||sh(r,t,o)}return o}function sh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function oh(e,t,r,i){t.value=r,t.getSnapshot=i,uh(t)&&fh(e)}function lh(e,t,r){return r(function(){uh(t)&&fh(e)})}function uh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_r(e,r)}catch{return!0}}function fh(e){var t=Vr(e,1);t!==null&&Tr(t,e,1,-1)}function sc(e){var t=Lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t.queue=e,e=e.dispatch=Fv.bind(null,Je,e),[t.memoizedState,e]}function ha(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function ch(){return fr().memoizedState}function is(e,t,r,i){var o=Lr();Je.flags|=e,o.memoizedState=ha(1|t,r,void 0,i===void 0?null:i)}function Vs(e,t,r,i){var o=fr();i=i===void 0?null:i;var f=void 0;if(ct!==null){var p=ct.memoizedState;if(f=p.destroy,i!==null&&vu(i,p.deps)){o.memoizedState=ha(t,r,f,i);return}}Je.flags|=e,o.memoizedState=ha(1|t,r,f,i)}function oc(e,t){return is(8390656,8,e,t)}function xu(e,t){return Vs(2048,8,e,t)}function dh(e,t){return Vs(4,2,e,t)}function hh(e,t){return Vs(4,4,e,t)}function ph(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gh(e,t,r){return r=r!=null?r.concat([e]):null,Vs(4,4,ph.bind(null,t,e),r)}function Eu(){}function vh(e,t){var r=fr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&vu(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function mh(e,t){var r=fr();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&vu(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function yh(e,t,r){return Pn&21?(_r(r,t)||(r=Sd(),Je.lanes|=r,Fn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vt=!0),e.memoizedState=r)}function Ov(e,t){var r=Ge;Ge=r!==0&&4>r?r:4,e(!0);var i=Io.transition;Io.transition={};try{e(!1),t()}finally{Ge=r,Io.transition=i}}function xh(){return fr().memoizedState}function Pv(e,t,r){var i=un(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Eh(e))Sh(t,r);else if(r=Qd(e,t,r,i),r!==null){var o=Mt();Tr(r,e,i,o),Th(r,t,i)}}function Fv(e,t,r){var i=un(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eh(e))Sh(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var p=t.lastRenderedState,m=f(p,r);if(o.hasEagerState=!0,o.eagerState=m,_r(m,p)){var w=t.interleaved;w===null?(o.next=o,cu(t)):(o.next=w.next,w.next=o),t.interleaved=o;return}}catch{}finally{}r=Qd(e,t,o,i),r!==null&&(o=Mt(),Tr(r,e,i,o),Th(r,t,i))}}function Eh(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Sh(e,t){Yi=Ds=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Th(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Ql(e,r)}}var Cs={readContext:ur,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},Nv={readContext:ur,useCallback:function(e,t){return Lr().memoizedState=[e,t===void 0?null:t],e},useContext:ur,useEffect:oc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,is(4194308,4,ph.bind(null,t,e),r)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){return is(4,2,e,t)},useMemo:function(e,t){var r=Lr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Lr();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Pv.bind(null,Je,e),[i.memoizedState,e]},useRef:function(e){var t=Lr();return e={current:e},t.memoizedState=e},useState:sc,useDebugValue:Eu,useDeferredValue:function(e){return Lr().memoizedState=e},useTransition:function(){var e=sc(!1),t=e[0];return e=Ov.bind(null,e[1]),Lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Je,o=Lr();if(qe){if(r===void 0)throw Error(ie(407));r=r()}else{if(r=t(),vt===null)throw Error(ie(349));Pn&30||sh(i,t,r)}o.memoizedState=r;var f={value:r,getSnapshot:t};return o.queue=f,oc(lh.bind(null,i,f,e),[e]),i.flags|=2048,ha(9,oh.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=Lr(),t=vt.identifierPrefix;if(qe){var r=Gr,i=Ur;r=(i&~(1<<32-Sr(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=ca++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Iv++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mv={readContext:ur,useCallback:vh,useContext:ur,useEffect:xu,useImperativeHandle:gh,useInsertionEffect:dh,useLayoutEffect:hh,useMemo:mh,useReducer:Oo,useRef:ch,useState:function(){return Oo(da)},useDebugValue:Eu,useDeferredValue:function(e){var t=fr();return yh(t,ct.memoizedState,e)},useTransition:function(){var e=Oo(da)[0],t=fr().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:ah,useId:xh,unstable_isNewReconciler:!1},bv={readContext:ur,useCallback:vh,useContext:ur,useEffect:xu,useImperativeHandle:gh,useInsertionEffect:dh,useLayoutEffect:hh,useMemo:mh,useReducer:Po,useRef:ch,useState:function(){return Po(da)},useDebugValue:Eu,useDeferredValue:function(e){var t=fr();return ct===null?t.memoizedState=e:yh(t,ct.memoizedState,e)},useTransition:function(){var e=Po(da)[0],t=fr().memoizedState;return[e,t]},useMutableSource:ih,useSyncExternalStore:ah,useId:xh,unstable_isNewReconciler:!1};function gi(e,t){try{var r="",i=t;do r+=cg(i),i=i.return;while(i);var o=r}catch(f){o=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:o,digest:null}}function Fo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Bv=typeof WeakMap=="function"?WeakMap:Map;function _h(e,t,r){r=jr(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Os||(Os=!0,Dl=i),xl(e,t)},r}function wh(e,t,r){r=jr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=t.value;r.payload=function(){return i(o)},r.callback=function(){xl(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){xl(e,t),typeof i!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function lc(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Bv;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(r)||(o.add(r),e=Jv.bind(null,e,t,r),t.then(e,e))}function uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fc(e,t,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=jr(-1,1),t.tag=2,on(r,t,1))),r.lanes|=1),e)}var Uv=Wr.ReactCurrentOwner,Vt=!1;function Nt(e,t,r,i){t.child=e===null?rh(t,null,r,i):hi(t,e.child,r,i)}function cc(e,t,r,i,o){r=r.render;var f=t.ref;return li(t,o),i=mu(e,t,r,i,f,o),r=yu(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hr(e,t,o)):(qe&&r&&au(t),t.flags|=1,Nt(e,t,i,o),t.child)}function dc(e,t,r,i,o){if(e===null){var f=r.type;return typeof f=="function"&&!Lu(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,Ah(e,t,f,i,o)):(e=ls(r.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&o)){var p=f.memoizedProps;if(r=r.compare,r=r!==null?r:aa,r(p,i)&&e.ref===t.ref)return Hr(e,t,o)}return t.flags|=1,e=fn(f,i),e.ref=t.ref,e.return=t,t.child=e}function Ah(e,t,r,i,o){if(e!==null){var f=e.memoizedProps;if(aa(f,i)&&e.ref===t.ref)if(Vt=!1,t.pendingProps=i=f,(e.lanes&o)!==0)e.flags&131072&&(Vt=!0);else return t.lanes=e.lanes,Hr(e,t,o)}return El(e,t,r,i,o)}function Rh(e,t,r){var i=t.pendingProps,o=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(ni,Qt),Qt|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(ni,Qt),Qt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,Ve(ni,Qt),Qt|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,Ve(ni,Qt),Qt|=i;return Nt(e,t,o,r),t.child}function kh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,r,i,o){var f=Wt(r)?In:It.current;return f=ci(t,f),li(t,o),r=mu(e,t,r,i,f,o),i=yu(),e!==null&&!Vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hr(e,t,o)):(qe&&i&&au(t),t.flags|=1,Nt(e,t,r,o),t.child)}function hc(e,t,r,i,o){if(Wt(r)){var f=!0;Ts(t)}else f=!1;if(li(t,o),t.stateNode===null)as(e,t),eh(t,r,i),yl(t,r,i,o),i=!0;else if(e===null){var p=t.stateNode,m=t.memoizedProps;p.props=m;var w=p.context,g=r.contextType;typeof g=="object"&&g!==null?g=ur(g):(g=Wt(r)?In:It.current,g=ci(t,g));var E=r.getDerivedStateFromProps,B=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function";B||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(m!==i||w!==g)&&ic(t,p,i,g),Qr=!1;var T=t.memoizedState;p.state=T,ks(t,i,p,o),w=t.memoizedState,m!==i||T!==w||Ht.current||Qr?(typeof E=="function"&&(ml(t,r,E,i),w=t.memoizedState),(m=Qr||nc(t,r,m,i,T,w,g))?(B||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=w),p.props=i,p.state=w,p.context=g,i=m):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,Jd(e,t),m=t.memoizedProps,g=t.type===t.elementType?m:mr(t.type,m),p.props=g,B=t.pendingProps,T=p.context,w=r.contextType,typeof w=="object"&&w!==null?w=ur(w):(w=Wt(r)?In:It.current,w=ci(t,w));var D=r.getDerivedStateFromProps;(E=typeof D=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(m!==B||T!==w)&&ic(t,p,i,w),Qr=!1,T=t.memoizedState,p.state=T,ks(t,i,p,o);var P=t.memoizedState;m!==B||T!==P||Ht.current||Qr?(typeof D=="function"&&(ml(t,r,D,i),P=t.memoizedState),(g=Qr||nc(t,r,g,i,T,P,w)||!1)?(E||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,P,w),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,P,w)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=P),p.props=i,p.state=P,p.context=w,i=g):(typeof p.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),i=!1)}return Sl(e,t,r,i,f,o)}function Sl(e,t,r,i,o,f){kh(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return o&&Jf(t,r,!1),Hr(e,t,f);i=t.stateNode,Uv.current=t;var m=p&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=hi(t,e.child,null,f),t.child=hi(t,null,m,f)):Nt(e,t,m,f),t.memoizedState=i.state,o&&Jf(t,r,!0),t.child}function Lh(e){var t=e.stateNode;t.pendingContext?Qf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qf(e,t.context,!1),hu(e,t.containerInfo)}function pc(e,t,r,i,o){return di(),ou(o),t.flags|=256,Nt(e,t,r,i),t.child}var Tl={dehydrated:null,treeContext:null,retryLane:0};function _l(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dh(e,t,r){var i=t.pendingProps,o=Qe.current,f=!1,p=(t.flags&128)!==0,m;if((m=p)||(m=e!==null&&e.memoizedState===null?!1:(o&2)!==0),m?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ve(Qe,o&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=i.children,e=i.fallback,f?(i=t.mode,f=t.child,p={mode:"hidden",children:p},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=p):f=Ys(p,i,0,null),e=Cn(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=_l(r),t.memoizedState=Tl,e):Su(t,p));if(o=e.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return Gv(e,t,p,i,m,o,r);if(f){f=i.fallback,p=t.mode,o=e.child,m=o.sibling;var w={mode:"hidden",children:i.children};return!(p&1)&&t.child!==o?(i=t.child,i.childLanes=0,i.pendingProps=w,t.deletions=null):(i=fn(o,w),i.subtreeFlags=o.subtreeFlags&14680064),m!==null?f=fn(m,f):(f=Cn(f,p,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,p=e.child.memoizedState,p=p===null?_l(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},f.memoizedState=p,f.childLanes=e.childLanes&~r,t.memoizedState=Tl,i}return f=e.child,e=f.sibling,i=fn(f,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Su(e,t){return t=Ys({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ka(e,t,r,i){return i!==null&&ou(i),hi(t,e.child,null,r),e=Su(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gv(e,t,r,i,o,f,p){if(r)return t.flags&256?(t.flags&=-257,i=Fo(Error(ie(422))),Ka(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,o=t.mode,i=Ys({mode:"visible",children:i.children},o,0,null),f=Cn(f,o,p,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,t.mode&1&&hi(t,e.child,null,p),t.child.memoizedState=_l(p),t.memoizedState=Tl,f);if(!(t.mode&1))return Ka(e,t,p,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var m=i.dgst;return i=m,f=Error(ie(419)),i=Fo(f,i,void 0),Ka(e,t,p,i)}if(m=(p&e.childLanes)!==0,Vt||m){if(i=vt,i!==null){switch(p&-p){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|p)?0:o,o!==0&&o!==f.retryLane&&(f.retryLane=o,Vr(e,o),Tr(i,e,o,-1))}return ku(),i=Fo(Error(ie(421))),Ka(e,t,p,i)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Zv.bind(null,e),o._reactRetry=t,null):(e=f.treeContext,Jt=sn(o.nextSibling),Zt=t,qe=!0,Er=null,e!==null&&(ir[ar++]=Ur,ir[ar++]=Gr,ir[ar++]=On,Ur=e.id,Gr=e.overflow,On=t),t=Su(t,i.children),t.flags|=4096,t)}function gc(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),vl(e.return,t,r)}function No(e,t,r,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=o)}function Ch(e,t,r){var i=t.pendingProps,o=i.revealOrder,f=i.tail;if(Nt(e,t,i.children,r),i=Qe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gc(e,r,t);else if(e.tag===19)gc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ve(Qe,i),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Ls(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),No(t,!1,o,r,f);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ls(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}No(t,!0,r,null,f);break;case"together":No(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function as(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,r=fn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=fn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function jv(e,t,r){switch(t.tag){case 3:Lh(t),di();break;case 5:nh(t);break;case 1:Wt(t.type)&&Ts(t);break;case 4:hu(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,o=t.memoizedProps.value;Ve(As,i._currentValue),i._currentValue=o;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ve(Qe,Qe.current&1),t.flags|=128,null):r&t.child.childLanes?Dh(e,t,r):(Ve(Qe,Qe.current&1),e=Hr(e,t,r),e!==null?e.sibling:null);Ve(Qe,Qe.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Ch(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(Qe,Qe.current),i)break;return null;case 22:case 23:return t.lanes=0,Rh(e,t,r)}return Hr(e,t,r)}var Ih,wl,Oh,Ph;Ih=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wl=function(){};Oh=function(e,t,r,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Ln(Ir.current);var f=null;switch(r){case"input":o=Wo(e,o),i=Wo(e,i),f=[];break;case"select":o=Ze({},o,{value:void 0}),i=Ze({},i,{value:void 0}),f=[];break;case"textarea":o=$o(e,o),i=$o(e,i),f=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Es)}Qo(r,i);var p;r=null;for(g in o)if(!i.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var m=o[g];for(p in m)m.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Ji.hasOwnProperty(g)?f||(f=[]):(f=f||[]).push(g,null));for(g in i){var w=i[g];if(m=o!=null?o[g]:void 0,i.hasOwnProperty(g)&&w!==m&&(w!=null||m!=null))if(g==="style")if(m){for(p in m)!m.hasOwnProperty(p)||w&&w.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in w)w.hasOwnProperty(p)&&m[p]!==w[p]&&(r||(r={}),r[p]=w[p])}else r||(f||(f=[]),f.push(g,r)),r=w;else g==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,m=m?m.__html:void 0,w!=null&&m!==w&&(f=f||[]).push(g,w)):g==="children"?typeof w!="string"&&typeof w!="number"||(f=f||[]).push(g,""+w):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Ji.hasOwnProperty(g)?(w!=null&&g==="onScroll"&&Xe("scroll",e),f||m===w||(f=[])):(f=f||[]).push(g,w))}r&&(f=f||[]).push("style",r);var g=f;(t.updateQueue=g)&&(t.flags|=4)}};Ph=function(e,t,r,i){r!==i&&(t.flags|=4)};function Fi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Kv(e,t,r){var i=t.pendingProps;switch(su(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(t),null;case 1:return Wt(t.type)&&Ss(),Dt(t),null;case 3:return i=t.stateNode,pi(),$e(Ht),$e(It),gu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ga(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(Ol(Er),Er=null))),wl(e,t),Dt(t),null;case 5:pu(t);var o=Ln(fa.current);if(r=t.type,e!==null&&t.stateNode!=null)Oh(e,t,r,i,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ie(166));return Dt(t),null}if(e=Ln(Ir.current),Ga(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[Dr]=t,i[la]=f,e=(t.mode&1)!==0,r){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(o=0;o<Gi.length;o++)Xe(Gi[o],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":wf(i,f),Xe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Xe("invalid",i);break;case"textarea":Rf(i,f),Xe("invalid",i)}Qo(r,f),o=null;for(var p in f)if(f.hasOwnProperty(p)){var m=f[p];p==="children"?typeof m=="string"?i.textContent!==m&&(f.suppressHydrationWarning!==!0&&Ua(i.textContent,m,e),o=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(f.suppressHydrationWarning!==!0&&Ua(i.textContent,m,e),o=["children",""+m]):Ji.hasOwnProperty(p)&&m!=null&&p==="onScroll"&&Xe("scroll",i)}switch(r){case"input":Ia(i),Af(i,f,!0);break;case"textarea":Ia(i),kf(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=Es)}i=o,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(r,{is:i.is}):(e=p.createElement(r),r==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,r),e[Dr]=t,e[la]=i,Ih(e,t,!1,!1),t.stateNode=e;e:{switch(p=Jo(r,i),r){case"dialog":Xe("cancel",e),Xe("close",e),o=i;break;case"iframe":case"object":case"embed":Xe("load",e),o=i;break;case"video":case"audio":for(o=0;o<Gi.length;o++)Xe(Gi[o],e);o=i;break;case"source":Xe("error",e),o=i;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),o=i;break;case"details":Xe("toggle",e),o=i;break;case"input":wf(e,i),o=Wo(e,i),Xe("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=Ze({},i,{value:void 0}),Xe("invalid",e);break;case"textarea":Rf(e,i),o=$o(e,i),Xe("invalid",e);break;default:o=i}Qo(r,o),m=o;for(f in m)if(m.hasOwnProperty(f)){var w=m[f];f==="style"?ud(e,w):f==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&od(e,w)):f==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Zi(e,w):typeof w=="number"&&Zi(e,""+w):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Ji.hasOwnProperty(f)?w!=null&&f==="onScroll"&&Xe("scroll",e):w!=null&&Hl(e,f,w,p))}switch(r){case"input":Ia(e),Af(e,i,!1);break;case"textarea":Ia(e),kf(e);break;case"option":i.value!=null&&e.setAttribute("value",""+cn(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?ii(e,!!i.multiple,f,!1):i.defaultValue!=null&&ii(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Es)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dt(t),null;case 6:if(e&&t.stateNode!=null)Ph(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ie(166));if(r=Ln(fa.current),Ln(Ir.current),Ga(t)){if(i=t.stateNode,r=t.memoizedProps,i[Dr]=t,(f=i.nodeValue!==r)&&(e=Zt,e!==null))switch(e.tag){case 3:Ua(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ua(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Dr]=t,t.stateNode=i}return Dt(t),null;case 13:if($e(Qe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Jt!==null&&t.mode&1&&!(t.flags&128))qd(),di(),t.flags|=98560,f=!1;else if(f=Ga(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(ie(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(ie(317));f[Dr]=t}else di(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dt(t),f=!1}else Er!==null&&(Ol(Er),Er=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?dt===0&&(dt=3):ku())),t.updateQueue!==null&&(t.flags|=4),Dt(t),null);case 4:return pi(),wl(e,t),e===null&&sa(t.stateNode.containerInfo),Dt(t),null;case 10:return fu(t.type._context),Dt(t),null;case 17:return Wt(t.type)&&Ss(),Dt(t),null;case 19:if($e(Qe),f=t.memoizedState,f===null)return Dt(t),null;if(i=(t.flags&128)!==0,p=f.rendering,p===null)if(i)Fi(f,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=Ls(e),p!==null){for(t.flags|=128,Fi(f,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,p=f.alternate,p===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=p.childLanes,f.lanes=p.lanes,f.child=p.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=p.memoizedProps,f.memoizedState=p.memoizedState,f.updateQueue=p.updateQueue,f.type=p.type,e=p.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ve(Qe,Qe.current&1|2),t.child}e=e.sibling}f.tail!==null&&rt()>vi&&(t.flags|=128,i=!0,Fi(f,!1),t.lanes=4194304)}else{if(!i)if(e=Ls(p),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fi(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!qe)return Dt(t),null}else 2*rt()-f.renderingStartTime>vi&&r!==1073741824&&(t.flags|=128,i=!0,Fi(f,!1),t.lanes=4194304);f.isBackwards?(p.sibling=t.child,t.child=p):(r=f.last,r!==null?r.sibling=p:t.child=p,f.last=p)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=rt(),t.sibling=null,r=Qe.current,Ve(Qe,i?r&1|2:r&1),t):(Dt(t),null);case 22:case 23:return Ru(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Qt&1073741824&&(Dt(t),t.subtreeFlags&6&&(t.flags|=8192)):Dt(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function zv(e,t){switch(su(t),t.tag){case 1:return Wt(t.type)&&Ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pi(),$e(Ht),$e(It),gu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pu(t),null;case 13:if($e(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Qe),null;case 4:return pi(),null;case 10:return fu(t.type._context),null;case 22:case 23:return Ru(),null;case 24:return null;default:return null}}var za=!1,Ct=!1,Vv=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ri(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){tt(e,t,i)}else r.current=null}function Al(e,t,r){try{r()}catch(i){tt(e,t,i)}}var vc=!1;function Hv(e,t){if(ll=ms,e=bd(),iu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var p=0,m=-1,w=-1,g=0,E=0,B=e,T=null;t:for(;;){for(var D;B!==r||o!==0&&B.nodeType!==3||(m=p+o),B!==f||i!==0&&B.nodeType!==3||(w=p+i),B.nodeType===3&&(p+=B.nodeValue.length),(D=B.firstChild)!==null;)T=B,B=D;for(;;){if(B===e)break t;if(T===r&&++g===o&&(m=p),T===f&&++E===i&&(w=p),(D=B.nextSibling)!==null)break;B=T,T=B.parentNode}B=D}r=m===-1||w===-1?null:{start:m,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(ul={focusedElem:e,selectionRange:r},ms=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var P=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var C=P.memoizedProps,z=P.memoizedState,A=t.stateNode,_=A.getSnapshotBeforeUpdate(t.elementType===t.type?C:mr(t.type,C),z);A.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(b){tt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return P=vc,vc=!1,P}function Xi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var f=o.destroy;o.destroy=void 0,f!==void 0&&Al(t,r,f)}o=o.next}while(o!==i)}}function Hs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Rl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Fh(e){var t=e.alternate;t!==null&&(e.alternate=null,Fh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dr],delete t[la],delete t[dl],delete t[kv],delete t[Lv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nh(e){return e.tag===5||e.tag===3||e.tag===4}function mc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Es));else if(i!==4&&(e=e.child,e!==null))for(kl(e,t,r),e=e.sibling;e!==null;)kl(e,t,r),e=e.sibling}function Ll(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ll(e,t,r),e=e.sibling;e!==null;)Ll(e,t,r),e=e.sibling}var Tt=null,yr=!1;function Xr(e,t,r){for(r=r.child;r!==null;)Mh(e,t,r),r=r.sibling}function Mh(e,t,r){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(bs,r)}catch{}switch(r.tag){case 5:Ct||ri(r,t);case 6:var i=Tt,o=yr;Tt=null,Xr(e,t,r),Tt=i,yr=o,Tt!==null&&(yr?(e=Tt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Tt.removeChild(r.stateNode));break;case 18:Tt!==null&&(yr?(e=Tt,r=r.stateNode,e.nodeType===8?Lo(e.parentNode,r):e.nodeType===1&&Lo(e,r),na(e)):Lo(Tt,r.stateNode));break;case 4:i=Tt,o=yr,Tt=r.stateNode.containerInfo,yr=!0,Xr(e,t,r),Tt=i,yr=o;break;case 0:case 11:case 14:case 15:if(!Ct&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var f=o,p=f.destroy;f=f.tag,p!==void 0&&(f&2||f&4)&&Al(r,t,p),o=o.next}while(o!==i)}Xr(e,t,r);break;case 1:if(!Ct&&(ri(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(m){tt(r,t,m)}Xr(e,t,r);break;case 21:Xr(e,t,r);break;case 22:r.mode&1?(Ct=(i=Ct)||r.memoizedState!==null,Xr(e,t,r),Ct=i):Xr(e,t,r);break;default:Xr(e,t,r)}}function yc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Vv),t.forEach(function(i){var o=em.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function vr(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var f=e,p=t,m=p;e:for(;m!==null;){switch(m.tag){case 5:Tt=m.stateNode,yr=!1;break e;case 3:Tt=m.stateNode.containerInfo,yr=!0;break e;case 4:Tt=m.stateNode.containerInfo,yr=!0;break e}m=m.return}if(Tt===null)throw Error(ie(160));Mh(f,p,o),Tt=null,yr=!1;var w=o.alternate;w!==null&&(w.return=null),o.return=null}catch(g){tt(o,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bh(t,e),t=t.sibling}function bh(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),kr(e),i&4){try{Xi(3,e,e.return),Hs(3,e)}catch(C){tt(e,e.return,C)}try{Xi(5,e,e.return)}catch(C){tt(e,e.return,C)}}break;case 1:vr(t,e),kr(e),i&512&&r!==null&&ri(r,r.return);break;case 5:if(vr(t,e),kr(e),i&512&&r!==null&&ri(r,r.return),e.flags&32){var o=e.stateNode;try{Zi(o,"")}catch(C){tt(e,e.return,C)}}if(i&4&&(o=e.stateNode,o!=null)){var f=e.memoizedProps,p=r!==null?r.memoizedProps:f,m=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{m==="input"&&f.type==="radio"&&f.name!=null&&id(o,f),Jo(m,p);var g=Jo(m,f);for(p=0;p<w.length;p+=2){var E=w[p],B=w[p+1];E==="style"?ud(o,B):E==="dangerouslySetInnerHTML"?od(o,B):E==="children"?Zi(o,B):Hl(o,E,B,g)}switch(m){case"input":Yo(o,f);break;case"textarea":ad(o,f);break;case"select":var T=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!f.multiple;var D=f.value;D!=null?ii(o,!!f.multiple,D,!1):T!==!!f.multiple&&(f.defaultValue!=null?ii(o,!!f.multiple,f.defaultValue,!0):ii(o,!!f.multiple,f.multiple?[]:"",!1))}o[la]=f}catch(C){tt(e,e.return,C)}}break;case 6:if(vr(t,e),kr(e),i&4){if(e.stateNode===null)throw Error(ie(162));o=e.stateNode,f=e.memoizedProps;try{o.nodeValue=f}catch(C){tt(e,e.return,C)}}break;case 3:if(vr(t,e),kr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{na(t.containerInfo)}catch(C){tt(e,e.return,C)}break;case 4:vr(t,e),kr(e);break;case 13:vr(t,e),kr(e),o=e.child,o.flags&8192&&(f=o.memoizedState!==null,o.stateNode.isHidden=f,!f||o.alternate!==null&&o.alternate.memoizedState!==null||(wu=rt())),i&4&&yc(e);break;case 22:if(E=r!==null&&r.memoizedState!==null,e.mode&1?(Ct=(g=Ct)||E,vr(t,e),Ct=g):vr(t,e),kr(e),i&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!E&&e.mode&1)for(ce=e,E=e.child;E!==null;){for(B=ce=E;ce!==null;){switch(T=ce,D=T.child,T.tag){case 0:case 11:case 14:case 15:Xi(4,T,T.return);break;case 1:ri(T,T.return);var P=T.stateNode;if(typeof P.componentWillUnmount=="function"){i=T,r=T.return;try{t=i,P.props=t.memoizedProps,P.state=t.memoizedState,P.componentWillUnmount()}catch(C){tt(i,r,C)}}break;case 5:ri(T,T.return);break;case 22:if(T.memoizedState!==null){Ec(B);continue}}D!==null?(D.return=T,ce=D):Ec(B)}E=E.sibling}e:for(E=null,B=e;;){if(B.tag===5){if(E===null){E=B;try{o=B.stateNode,g?(f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(m=B.stateNode,w=B.memoizedProps.style,p=w!=null&&w.hasOwnProperty("display")?w.display:null,m.style.display=ld("display",p))}catch(C){tt(e,e.return,C)}}}else if(B.tag===6){if(E===null)try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(C){tt(e,e.return,C)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;E===B&&(E=null),B=B.return}E===B&&(E=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:vr(t,e),kr(e),i&4&&yc(e);break;case 21:break;default:vr(t,e),kr(e)}}function kr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Nh(r)){var i=r;break e}r=r.return}throw Error(ie(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Zi(o,""),i.flags&=-33);var f=mc(e);Ll(e,f,o);break;case 3:case 4:var p=i.stateNode.containerInfo,m=mc(e);kl(e,m,p);break;default:throw Error(ie(161))}}catch(w){tt(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wv(e,t,r){ce=e,Bh(e)}function Bh(e,t,r){for(var i=(e.mode&1)!==0;ce!==null;){var o=ce,f=o.child;if(o.tag===22&&i){var p=o.memoizedState!==null||za;if(!p){var m=o.alternate,w=m!==null&&m.memoizedState!==null||Ct;m=za;var g=Ct;if(za=p,(Ct=w)&&!g)for(ce=o;ce!==null;)p=ce,w=p.child,p.tag===22&&p.memoizedState!==null?Sc(o):w!==null?(w.return=p,ce=w):Sc(o);for(;f!==null;)ce=f,Bh(f),f=f.sibling;ce=o,za=m,Ct=g}xc(e)}else o.subtreeFlags&8772&&f!==null?(f.return=o,ce=f):xc(e)}}function xc(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ct||Hs(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ct)if(r===null)i.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:mr(t.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&rc(t,f,i);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rc(t,p,r)}break;case 5:var m=t.stateNode;if(r===null&&t.flags&4){r=m;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var E=g.memoizedState;if(E!==null){var B=E.dehydrated;B!==null&&na(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ct||t.flags&512&&Rl(t)}catch(T){tt(t,t.return,T)}}if(t===e){ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,ce=r;break}ce=t.return}}function Ec(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ce=r;break}ce=t.return}}function Sc(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hs(4,t)}catch(w){tt(t,r,w)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var o=t.return;try{i.componentDidMount()}catch(w){tt(t,o,w)}}var f=t.return;try{Rl(t)}catch(w){tt(t,f,w)}break;case 5:var p=t.return;try{Rl(t)}catch(w){tt(t,p,w)}}}catch(w){tt(t,t.return,w)}if(t===e){ce=null;break}var m=t.sibling;if(m!==null){m.return=t.return,ce=m;break}ce=t.return}}var Yv=Math.ceil,Is=Wr.ReactCurrentDispatcher,Tu=Wr.ReactCurrentOwner,lr=Wr.ReactCurrentBatchConfig,Ne=0,vt=null,ot=null,_t=0,Qt=0,ni=pn(0),dt=0,pa=null,Fn=0,Ws=0,_u=0,$i=null,zt=null,wu=0,vi=1/0,br=null,Os=!1,Dl=null,ln=null,Va=!1,tn=null,Ps=0,qi=0,Cl=null,ss=-1,os=0;function Mt(){return Ne&6?rt():ss!==-1?ss:ss=rt()}function un(e){return e.mode&1?Ne&2&&_t!==0?_t&-_t:Cv.transition!==null?(os===0&&(os=Sd()),os):(e=Ge,e!==0||(e=window.event,e=e===void 0?16:Ld(e.type)),e):1}function Tr(e,t,r,i){if(50<qi)throw qi=0,Cl=null,Error(ie(185));va(e,r,i),(!(Ne&2)||e!==vt)&&(e===vt&&(!(Ne&2)&&(Ws|=r),dt===4&&Zr(e,_t)),Yt(e,i),r===1&&Ne===0&&!(t.mode&1)&&(vi=rt()+500,Ks&&gn()))}function Yt(e,t){var r=e.callbackNode;Cg(e,t);var i=vs(e,e===vt?_t:0);if(i===0)r!==null&&Cf(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&Cf(r),t===1)e.tag===0?Dv(Tc.bind(null,e)):Yd(Tc.bind(null,e)),Av(function(){!(Ne&6)&&gn()}),r=null;else{switch(Td(i)){case 1:r=ql;break;case 4:r=xd;break;case 16:r=gs;break;case 536870912:r=Ed;break;default:r=gs}r=Wh(r,Uh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Uh(e,t){if(ss=-1,os=0,Ne&6)throw Error(ie(327));var r=e.callbackNode;if(ui()&&e.callbackNode!==r)return null;var i=vs(e,e===vt?_t:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Fs(e,i);else{t=i;var o=Ne;Ne|=2;var f=jh();(vt!==e||_t!==t)&&(br=null,vi=rt()+500,Dn(e,t));do try{qv();break}catch(m){Gh(e,m)}while(!0);uu(),Is.current=f,Ne=o,ot!==null?t=0:(vt=null,_t=0,t=dt)}if(t!==0){if(t===2&&(o=nl(e),o!==0&&(i=o,t=Il(e,o))),t===1)throw r=pa,Dn(e,0),Zr(e,i),Yt(e,rt()),r;if(t===6)Zr(e,i);else{if(o=e.current.alternate,!(i&30)&&!Xv(o)&&(t=Fs(e,i),t===2&&(f=nl(e),f!==0&&(i=f,t=Il(e,f))),t===1))throw r=pa,Dn(e,0),Zr(e,i),Yt(e,rt()),r;switch(e.finishedWork=o,e.finishedLanes=i,t){case 0:case 1:throw Error(ie(345));case 2:An(e,zt,br);break;case 3:if(Zr(e,i),(i&130023424)===i&&(t=wu+500-rt(),10<t)){if(vs(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){Mt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=cl(An.bind(null,e,zt,br),t);break}An(e,zt,br);break;case 4:if(Zr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,o=-1;0<i;){var p=31-Sr(i);f=1<<p,p=t[p],p>o&&(o=p),i&=~f}if(i=o,i=rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yv(i/1960))-i,10<i){e.timeoutHandle=cl(An.bind(null,e,zt,br),i);break}An(e,zt,br);break;case 5:An(e,zt,br);break;default:throw Error(ie(329))}}}return Yt(e,rt()),e.callbackNode===r?Uh.bind(null,e):null}function Il(e,t){var r=$i;return e.current.memoizedState.isDehydrated&&(Dn(e,t).flags|=256),e=Fs(e,t),e!==2&&(t=zt,zt=r,t!==null&&Ol(t)),e}function Ol(e){zt===null?zt=e:zt.push.apply(zt,e)}function Xv(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],f=o.getSnapshot;o=o.value;try{if(!_r(f(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zr(e,t){for(t&=~_u,t&=~Ws,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Sr(t),i=1<<r;e[r]=-1,t&=~i}}function Tc(e){if(Ne&6)throw Error(ie(327));ui();var t=vs(e,0);if(!(t&1))return Yt(e,rt()),null;var r=Fs(e,t);if(e.tag!==0&&r===2){var i=nl(e);i!==0&&(t=i,r=Il(e,i))}if(r===1)throw r=pa,Dn(e,0),Zr(e,t),Yt(e,rt()),r;if(r===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,An(e,zt,br),Yt(e,rt()),null}function Au(e,t){var r=Ne;Ne|=1;try{return e(t)}finally{Ne=r,Ne===0&&(vi=rt()+500,Ks&&gn())}}function Nn(e){tn!==null&&tn.tag===0&&!(Ne&6)&&ui();var t=Ne;Ne|=1;var r=lr.transition,i=Ge;try{if(lr.transition=null,Ge=1,e)return e()}finally{Ge=i,lr.transition=r,Ne=t,!(Ne&6)&&gn()}}function Ru(){Qt=ni.current,$e(ni)}function Dn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wv(r)),ot!==null)for(r=ot.return;r!==null;){var i=r;switch(su(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ss();break;case 3:pi(),$e(Ht),$e(It),gu();break;case 5:pu(i);break;case 4:pi();break;case 13:$e(Qe);break;case 19:$e(Qe);break;case 10:fu(i.type._context);break;case 22:case 23:Ru()}r=r.return}if(vt=e,ot=e=fn(e.current,null),_t=Qt=t,dt=0,pa=null,_u=Ws=Fn=0,zt=$i=null,kn!==null){for(t=0;t<kn.length;t++)if(r=kn[t],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,f=r.pending;if(f!==null){var p=f.next;f.next=o,i.next=p}r.pending=i}kn=null}return e}function Gh(e,t){do{var r=ot;try{if(uu(),ns.current=Cs,Ds){for(var i=Je.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ds=!1}if(Pn=0,gt=ct=Je=null,Yi=!1,ca=0,Tu.current=null,r===null||r.return===null){dt=1,pa=t,ot=null;break}e:{var f=e,p=r.return,m=r,w=t;if(t=_t,m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var g=w,E=m,B=E.tag;if(!(E.mode&1)&&(B===0||B===11||B===15)){var T=E.alternate;T?(E.updateQueue=T.updateQueue,E.memoizedState=T.memoizedState,E.lanes=T.lanes):(E.updateQueue=null,E.memoizedState=null)}var D=uc(p);if(D!==null){D.flags&=-257,fc(D,p,m,f,t),D.mode&1&&lc(f,g,t),t=D,w=g;var P=t.updateQueue;if(P===null){var C=new Set;C.add(w),t.updateQueue=C}else P.add(w);break e}else{if(!(t&1)){lc(f,g,t),ku();break e}w=Error(ie(426))}}else if(qe&&m.mode&1){var z=uc(p);if(z!==null){!(z.flags&65536)&&(z.flags|=256),fc(z,p,m,f,t),ou(gi(w,m));break e}}f=w=gi(w,m),dt!==4&&(dt=2),$i===null?$i=[f]:$i.push(f),f=p;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var A=_h(f,w,t);tc(f,A);break e;case 1:m=w;var _=f.type,F=f.stateNode;if(!(f.flags&128)&&(typeof _.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(ln===null||!ln.has(F)))){f.flags|=65536,t&=-t,f.lanes|=t;var b=wh(f,m,t);tc(f,b);break e}}f=f.return}while(f!==null)}zh(r)}catch(V){t=V,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function jh(){var e=Is.current;return Is.current=Cs,e===null?Cs:e}function ku(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Fn&268435455)&&!(Ws&268435455)||Zr(vt,_t)}function Fs(e,t){var r=Ne;Ne|=2;var i=jh();(vt!==e||_t!==t)&&(br=null,Dn(e,t));do try{$v();break}catch(o){Gh(e,o)}while(!0);if(uu(),Ne=r,Is.current=i,ot!==null)throw Error(ie(261));return vt=null,_t=0,dt}function $v(){for(;ot!==null;)Kh(ot)}function qv(){for(;ot!==null&&!Sg();)Kh(ot)}function Kh(e){var t=Hh(e.alternate,e,Qt);e.memoizedProps=e.pendingProps,t===null?zh(e):ot=t,Tu.current=null}function zh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zv(r,t),r!==null){r.flags&=32767,ot=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,ot=null;return}}else if(r=Kv(r,t,Qt),r!==null){ot=r;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);dt===0&&(dt=5)}function An(e,t,r){var i=Ge,o=lr.transition;try{lr.transition=null,Ge=1,Qv(e,t,r,i)}finally{lr.transition=o,Ge=i}return null}function Qv(e,t,r,i){do ui();while(tn!==null);if(Ne&6)throw Error(ie(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(Ig(e,f),e===vt&&(ot=vt=null,_t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Va||(Va=!0,Wh(gs,function(){return ui(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=lr.transition,lr.transition=null;var p=Ge;Ge=1;var m=Ne;Ne|=4,Tu.current=null,Hv(e,r),bh(r,e),mv(ul),ms=!!ll,ul=ll=null,e.current=r,Wv(r),Tg(),Ne=m,Ge=p,lr.transition=f}else e.current=r;if(Va&&(Va=!1,tn=e,Ps=o),f=e.pendingLanes,f===0&&(ln=null),Ag(r.stateNode),Yt(e,rt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(Os)throw Os=!1,e=Dl,Dl=null,e;return Ps&1&&e.tag!==0&&ui(),f=e.pendingLanes,f&1?e===Cl?qi++:(qi=0,Cl=e):qi=0,gn(),null}function ui(){if(tn!==null){var e=Td(Ps),t=lr.transition,r=Ge;try{if(lr.transition=null,Ge=16>e?16:e,tn===null)var i=!1;else{if(e=tn,tn=null,Ps=0,Ne&6)throw Error(ie(331));var o=Ne;for(Ne|=4,ce=e.current;ce!==null;){var f=ce,p=f.child;if(ce.flags&16){var m=f.deletions;if(m!==null){for(var w=0;w<m.length;w++){var g=m[w];for(ce=g;ce!==null;){var E=ce;switch(E.tag){case 0:case 11:case 15:Xi(8,E,f)}var B=E.child;if(B!==null)B.return=E,ce=B;else for(;ce!==null;){E=ce;var T=E.sibling,D=E.return;if(Fh(E),E===g){ce=null;break}if(T!==null){T.return=D,ce=T;break}ce=D}}}var P=f.alternate;if(P!==null){var C=P.child;if(C!==null){P.child=null;do{var z=C.sibling;C.sibling=null,C=z}while(C!==null)}}ce=f}}if(f.subtreeFlags&2064&&p!==null)p.return=f,ce=p;else e:for(;ce!==null;){if(f=ce,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Xi(9,f,f.return)}var A=f.sibling;if(A!==null){A.return=f.return,ce=A;break e}ce=f.return}}var _=e.current;for(ce=_;ce!==null;){p=ce;var F=p.child;if(p.subtreeFlags&2064&&F!==null)F.return=p,ce=F;else e:for(p=_;ce!==null;){if(m=ce,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Hs(9,m)}}catch(V){tt(m,m.return,V)}if(m===p){ce=null;break e}var b=m.sibling;if(b!==null){b.return=m.return,ce=b;break e}ce=m.return}}if(Ne=o,gn(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(bs,e)}catch{}i=!0}return i}finally{Ge=r,lr.transition=t}}return!1}function _c(e,t,r){t=gi(r,t),t=_h(e,t,1),e=on(e,t,1),t=Mt(),e!==null&&(va(e,1,t),Yt(e,t))}function tt(e,t,r){if(e.tag===3)_c(e,e,r);else for(;t!==null;){if(t.tag===3){_c(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ln===null||!ln.has(i))){e=gi(r,e),e=wh(t,e,1),t=on(t,e,1),e=Mt(),t!==null&&(va(t,1,e),Yt(t,e));break}}t=t.return}}function Jv(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Mt(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(_t&r)===r&&(dt===4||dt===3&&(_t&130023424)===_t&&500>rt()-wu?Dn(e,0):_u|=r),Yt(e,t)}function Vh(e,t){t===0&&(e.mode&1?(t=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):t=1);var r=Mt();e=Vr(e,t),e!==null&&(va(e,t,r),Yt(e,r))}function Zv(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Vh(e,r)}function em(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ie(314))}i!==null&&i.delete(t),Vh(e,r)}var Hh;Hh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Vt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Vt=!1,jv(e,t,r);Vt=!!(e.flags&131072)}else Vt=!1,qe&&t.flags&1048576&&Xd(t,ws,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;as(e,t),e=t.pendingProps;var o=ci(t,It.current);li(t,r),o=mu(null,t,i,e,o,r);var f=yu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(i)?(f=!0,Ts(t)):f=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,du(t),o.updater=zs,t.stateNode=o,o._reactInternals=t,yl(t,i,e,r),t=Sl(null,t,i,!0,f,r)):(t.tag=0,qe&&f&&au(t),Nt(null,t,o,r),t=t.child),t;case 16:i=t.elementType;e:{switch(as(e,t),e=t.pendingProps,o=i._init,i=o(i._payload),t.type=i,o=t.tag=rm(i),e=mr(i,e),o){case 0:t=El(null,t,i,e,r);break e;case 1:t=hc(null,t,i,e,r);break e;case 11:t=cc(null,t,i,e,r);break e;case 14:t=dc(null,t,i,mr(i.type,e),r);break e}throw Error(ie(306,i,""))}return t;case 0:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mr(i,o),El(e,t,i,o,r);case 1:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mr(i,o),hc(e,t,i,o,r);case 3:e:{if(Lh(t),e===null)throw Error(ie(387));i=t.pendingProps,f=t.memoizedState,o=f.element,Jd(e,t),ks(t,i,null,r);var p=t.memoizedState;if(i=p.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){o=gi(Error(ie(423)),t),t=pc(e,t,i,r,o);break e}else if(i!==o){o=gi(Error(ie(424)),t),t=pc(e,t,i,r,o);break e}else for(Jt=sn(t.stateNode.containerInfo.firstChild),Zt=t,qe=!0,Er=null,r=rh(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(di(),i===o){t=Hr(e,t,r);break e}Nt(e,t,i,r)}t=t.child}return t;case 5:return nh(t),e===null&&gl(t),i=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,p=o.children,fl(i,o)?p=null:f!==null&&fl(i,f)&&(t.flags|=32),kh(e,t),Nt(e,t,p,r),t.child;case 6:return e===null&&gl(t),null;case 13:return Dh(e,t,r);case 4:return hu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=hi(t,null,i,r):Nt(e,t,i,r),t.child;case 11:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mr(i,o),cc(e,t,i,o,r);case 7:return Nt(e,t,t.pendingProps,r),t.child;case 8:return Nt(e,t,t.pendingProps.children,r),t.child;case 12:return Nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,o=t.pendingProps,f=t.memoizedProps,p=o.value,Ve(As,i._currentValue),i._currentValue=p,f!==null)if(_r(f.value,p)){if(f.children===o.children&&!Ht.current){t=Hr(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){p=f.child;for(var w=m.firstContext;w!==null;){if(w.context===i){if(f.tag===1){w=jr(-1,r&-r),w.tag=2;var g=f.updateQueue;if(g!==null){g=g.shared;var E=g.pending;E===null?w.next=w:(w.next=E.next,E.next=w),g.pending=w}}f.lanes|=r,w=f.alternate,w!==null&&(w.lanes|=r),vl(f.return,r,t),m.lanes|=r;break}w=w.next}}else if(f.tag===10)p=f.type===t.type?null:f.child;else if(f.tag===18){if(p=f.return,p===null)throw Error(ie(341));p.lanes|=r,m=p.alternate,m!==null&&(m.lanes|=r),vl(p,r,t),p=f.sibling}else p=f.child;if(p!==null)p.return=f;else for(p=f;p!==null;){if(p===t){p=null;break}if(f=p.sibling,f!==null){f.return=p.return,p=f;break}p=p.return}f=p}Nt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps.children,li(t,r),o=ur(o),i=i(o),t.flags|=1,Nt(e,t,i,r),t.child;case 14:return i=t.type,o=mr(i,t.pendingProps),o=mr(i.type,o),dc(e,t,i,o,r);case 15:return Ah(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,o=t.pendingProps,o=t.elementType===i?o:mr(i,o),as(e,t),t.tag=1,Wt(i)?(e=!0,Ts(t)):e=!1,li(t,r),eh(t,i,o),yl(t,i,o,r),Sl(null,t,i,!0,e,r);case 19:return Ch(e,t,r);case 22:return Rh(e,t,r)}throw Error(ie(156,t.tag))};function Wh(e,t){return yd(e,t)}function tm(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(e,t,r,i){return new tm(e,t,r,i)}function Lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rm(e){if(typeof e=="function")return Lu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yl)return 11;if(e===Xl)return 14}return 2}function fn(e,t){var r=e.alternate;return r===null?(r=or(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ls(e,t,r,i,o,f){var p=2;if(i=e,typeof e=="function")Lu(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Yn:return Cn(r.children,o,f,t);case Wl:p=8,o|=8;break;case Ko:return e=or(12,r,t,o|2),e.elementType=Ko,e.lanes=f,e;case zo:return e=or(13,r,t,o),e.elementType=zo,e.lanes=f,e;case Vo:return e=or(19,r,t,o),e.elementType=Vo,e.lanes=f,e;case td:return Ys(r,o,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zc:p=10;break e;case ed:p=9;break e;case Yl:p=11;break e;case Xl:p=14;break e;case qr:p=16,i=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=or(p,r,t,o),t.elementType=e,t.type=i,t.lanes=f,t}function Cn(e,t,r,i){return e=or(7,e,i,t),e.lanes=r,e}function Ys(e,t,r,i){return e=or(22,e,i,t),e.elementType=td,e.lanes=r,e.stateNode={isHidden:!1},e}function Mo(e,t,r){return e=or(6,e,null,t),e.lanes=r,e}function bo(e,t,r){return t=or(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nm(e,t,r,i,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mo(0),this.expirationTimes=mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mo(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Du(e,t,r,i,o,f,p,m,w){return e=new nm(e,t,r,m,w),t===1?(t=1,f===!0&&(t|=8)):t=0,f=or(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},du(f),e}function im(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Yh(e){if(!e)return dn;e=e._reactInternals;e:{if(bn(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var r=e.type;if(Wt(r))return Wd(e,r,t)}return t}function Xh(e,t,r,i,o,f,p,m,w){return e=Du(r,i,!0,e,o,f,p,m,w),e.context=Yh(null),r=e.current,i=Mt(),o=un(r),f=jr(i,o),f.callback=t??null,on(r,f,o),e.current.lanes=o,va(e,o,i),Yt(e,i),e}function Xs(e,t,r,i){var o=t.current,f=Mt(),p=un(o);return r=Yh(r),t.context===null?t.context=r:t.pendingContext=r,t=jr(f,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=on(o,t,p),e!==null&&(Tr(e,o,p,f),rs(e,o,p)),p}function Ns(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Cu(e,t){wc(e,t),(e=e.alternate)&&wc(e,t)}function am(){return null}var $h=typeof reportError=="function"?reportError:function(e){console.error(e)};function Iu(e){this._internalRoot=e}$s.prototype.render=Iu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));Xs(e,t,null,null)};$s.prototype.unmount=Iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nn(function(){Xs(null,e,null,null)}),t[zr]=null}};function $s(e){this._internalRoot=e}$s.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ad();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Jr.length&&t!==0&&t<Jr[r].priority;r++);Jr.splice(r,0,e),r===0&&kd(e)}};function Ou(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ac(){}function sm(e,t,r,i,o){if(o){if(typeof i=="function"){var f=i;i=function(){var g=Ns(p);f.call(g)}}var p=Xh(t,i,e,0,null,!1,!1,"",Ac);return e._reactRootContainer=p,e[zr]=p.current,sa(e.nodeType===8?e.parentNode:e),Nn(),p}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var m=i;i=function(){var g=Ns(w);m.call(g)}}var w=Du(e,0,!1,null,null,!1,!1,"",Ac);return e._reactRootContainer=w,e[zr]=w.current,sa(e.nodeType===8?e.parentNode:e),Nn(function(){Xs(t,w,r,i)}),w}function Qs(e,t,r,i,o){var f=r._reactRootContainer;if(f){var p=f;if(typeof o=="function"){var m=o;o=function(){var w=Ns(p);m.call(w)}}Xs(t,p,e,o)}else p=sm(r,t,e,o,i);return Ns(p)}_d=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ui(t.pendingLanes);r!==0&&(Ql(t,r|1),Yt(t,rt()),!(Ne&6)&&(vi=rt()+500,gn()))}break;case 13:Nn(function(){var i=Vr(e,1);if(i!==null){var o=Mt();Tr(i,e,1,o)}}),Cu(e,1)}};Jl=function(e){if(e.tag===13){var t=Vr(e,134217728);if(t!==null){var r=Mt();Tr(t,e,134217728,r)}Cu(e,134217728)}};wd=function(e){if(e.tag===13){var t=un(e),r=Vr(e,t);if(r!==null){var i=Mt();Tr(r,e,t,i)}Cu(e,t)}};Ad=function(){return Ge};Rd=function(e,t){var r=Ge;try{return Ge=e,t()}finally{Ge=r}};el=function(e,t,r){switch(t){case"input":if(Yo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var o=js(i);if(!o)throw Error(ie(90));nd(i),Yo(i,o)}}}break;case"textarea":ad(e,r);break;case"select":t=r.value,t!=null&&ii(e,!!r.multiple,t,!1)}};dd=Au;hd=Nn;var om={usingClientEntryPoint:!1,Events:[ya,Qn,js,fd,cd,Au]},Ni={findFiberByHostInstance:Rn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lm={bundleType:Ni.bundleType,version:Ni.version,rendererPackageName:Ni.rendererPackageName,rendererConfig:Ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ni.findFiberByHostInstance||am,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ha.isDisabled&&Ha.supportsFiber)try{bs=Ha.inject(lm),Cr=Ha}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=om;tr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ou(t))throw Error(ie(200));return im(e,t,null,r)};tr.createRoot=function(e,t){if(!Ou(e))throw Error(ie(299));var r=!1,i="",o=$h;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Du(e,1,!1,null,null,r,!1,i,o),e[zr]=t.current,sa(e.nodeType===8?e.parentNode:e),new Iu(t)};tr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=vd(t),e=e===null?null:e.stateNode,e};tr.flushSync=function(e){return Nn(e)};tr.hydrate=function(e,t,r){if(!qs(t))throw Error(ie(200));return Qs(null,e,t,!0,r)};tr.hydrateRoot=function(e,t,r){if(!Ou(e))throw Error(ie(405));var i=r!=null&&r.hydratedSources||null,o=!1,f="",p=$h;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=Xh(t,null,e,1,r??null,o,!1,f,p),e[zr]=t.current,sa(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new $s(t)};tr.render=function(e,t,r){if(!qs(t))throw Error(ie(200));return Qs(null,e,t,!1,r)};tr.unmountComponentAtNode=function(e){if(!qs(e))throw Error(ie(40));return e._reactRootContainer?(Nn(function(){Qs(null,null,e,!1,function(){e._reactRootContainer=null,e[zr]=null})}),!0):!1};tr.unstable_batchedUpdates=Au;tr.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!qs(r))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return Qs(e,t,r,!1,i)};tr.version="18.2.0-next-9e3b772b8-20220608";function qh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qh)}catch(e){console.error(e)}}qh(),Xc.exports=tr;var um=Xc.exports,Rc=um;Go.createRoot=Rc.createRoot,Go.hydrateRoot=Rc.hydrateRoot;var Qh={exports:{}};(function(e,t){typeof window<"u"&&function(i,o){e.exports=o()}(B0,function(){return function(r){var i={};function o(f){if(i[f])return i[f].exports;var p=i[f]={i:f,l:!1,exports:{}};return r[f].call(p.exports,p,p.exports,o),p.l=!0,p.exports}return o.m=r,o.c=i,o.d=function(f,p,m){o.o(f,p)||Object.defineProperty(f,p,{enumerable:!0,get:m})},o.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},o.t=function(f,p){if(p&1&&(f=o(f)),p&8||p&4&&typeof f=="object"&&f&&f.__esModule)return f;var m=Object.create(null);if(o.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:f}),p&2&&typeof f!="string")for(var w in f)o.d(m,w,(function(g){return f[g]}).bind(null,w));return m},o.n=function(f){var p=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(p,"a",p),p},o.o=function(f,p){return Object.prototype.hasOwnProperty.call(f,p)},o.p="/dist/",o(o.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(r,i,o){var f=Object.prototype.hasOwnProperty,p="~";function m(){}Object.create&&(m.prototype=Object.create(null),new m().__proto__||(p=!1));function w(T,D,P){this.fn=T,this.context=D,this.once=P||!1}function g(T,D,P,C,z){if(typeof P!="function")throw new TypeError("The listener must be a function");var A=new w(P,C||T,z),_=p?p+D:D;return T._events[_]?T._events[_].fn?T._events[_]=[T._events[_],A]:T._events[_].push(A):(T._events[_]=A,T._eventsCount++),T}function E(T,D){--T._eventsCount===0?T._events=new m:delete T._events[D]}function B(){this._events=new m,this._eventsCount=0}B.prototype.eventNames=function(){var D=[],P,C;if(this._eventsCount===0)return D;for(C in P=this._events)f.call(P,C)&&D.push(p?C.slice(1):C);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(P)):D},B.prototype.listeners=function(D){var P=p?p+D:D,C=this._events[P];if(!C)return[];if(C.fn)return[C.fn];for(var z=0,A=C.length,_=new Array(A);z<A;z++)_[z]=C[z].fn;return _},B.prototype.listenerCount=function(D){var P=p?p+D:D,C=this._events[P];return C?C.fn?1:C.length:0},B.prototype.emit=function(D,P,C,z,A,_){var F=p?p+D:D;if(!this._events[F])return!1;var b=this._events[F],V=arguments.length,Y,X;if(b.fn){switch(b.once&&this.removeListener(D,b.fn,void 0,!0),V){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,P),!0;case 3:return b.fn.call(b.context,P,C),!0;case 4:return b.fn.call(b.context,P,C,z),!0;case 5:return b.fn.call(b.context,P,C,z,A),!0;case 6:return b.fn.call(b.context,P,C,z,A,_),!0}for(X=1,Y=new Array(V-1);X<V;X++)Y[X-1]=arguments[X];b.fn.apply(b.context,Y)}else{var Q=b.length,se;for(X=0;X<Q;X++)switch(b[X].once&&this.removeListener(D,b[X].fn,void 0,!0),V){case 1:b[X].fn.call(b[X].context);break;case 2:b[X].fn.call(b[X].context,P);break;case 3:b[X].fn.call(b[X].context,P,C);break;case 4:b[X].fn.call(b[X].context,P,C,z);break;default:if(!Y)for(se=1,Y=new Array(V-1);se<V;se++)Y[se-1]=arguments[se];b[X].fn.apply(b[X].context,Y)}}return!0},B.prototype.on=function(D,P,C){return g(this,D,P,C,!1)},B.prototype.once=function(D,P,C){return g(this,D,P,C,!0)},B.prototype.removeListener=function(D,P,C,z){var A=p?p+D:D;if(!this._events[A])return this;if(!P)return E(this,A),this;var _=this._events[A];if(_.fn)_.fn===P&&(!z||_.once)&&(!C||_.context===C)&&E(this,A);else{for(var F=0,b=[],V=_.length;F<V;F++)(_[F].fn!==P||z&&!_[F].once||C&&_[F].context!==C)&&b.push(_[F]);b.length?this._events[A]=b.length===1?b[0]:b:E(this,A)}return this},B.prototype.removeAllListeners=function(D){var P;return D?(P=p?p+D:D,this._events[P]&&E(this,P)):(this._events=new m,this._eventsCount=0),this},B.prototype.off=B.prototype.removeListener,B.prototype.addListener=B.prototype.on,B.prefixed=p,B.EventEmitter=B,r.exports=B},"./node_modules/url-toolkit/src/url-toolkit.js":function(r,i,o){(function(f){var p=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,m=/^([^\/?#]*)(.*)$/,w=/(?:\/|^)\.(?=\/)/g,g=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,E={buildAbsoluteURL:function(B,T,D){if(D=D||{},B=B.trim(),T=T.trim(),!T){if(!D.alwaysNormalize)return B;var P=E.parseURL(B);if(!P)throw new Error("Error trying to parse base URL.");return P.path=E.normalizePath(P.path),E.buildURLFromParts(P)}var C=E.parseURL(T);if(!C)throw new Error("Error trying to parse relative URL.");if(C.scheme)return D.alwaysNormalize?(C.path=E.normalizePath(C.path),E.buildURLFromParts(C)):T;var z=E.parseURL(B);if(!z)throw new Error("Error trying to parse base URL.");if(!z.netLoc&&z.path&&z.path[0]!=="/"){var A=m.exec(z.path);z.netLoc=A[1],z.path=A[2]}z.netLoc&&!z.path&&(z.path="/");var _={scheme:z.scheme,netLoc:C.netLoc,path:null,params:C.params,query:C.query,fragment:C.fragment};if(!C.netLoc&&(_.netLoc=z.netLoc,C.path[0]!=="/"))if(!C.path)_.path=z.path,C.params||(_.params=z.params,C.query||(_.query=z.query));else{var F=z.path,b=F.substring(0,F.lastIndexOf("/")+1)+C.path;_.path=E.normalizePath(b)}return _.path===null&&(_.path=D.alwaysNormalize?E.normalizePath(C.path):C.path),E.buildURLFromParts(_)},parseURL:function(B){var T=p.exec(B);return T?{scheme:T[1]||"",netLoc:T[2]||"",path:T[3]||"",params:T[4]||"",query:T[5]||"",fragment:T[6]||""}:null},normalizePath:function(B){for(B=B.split("").reverse().join("").replace(w,"");B.length!==(B=B.replace(g,"")).length;);return B.split("").reverse().join("")},buildURLFromParts:function(B){return B.scheme+B.netLoc+B.path+B.params+B.query+B.fragment}};r.exports=E})()},"./node_modules/webworkify-webpack/index.js":function(r,i,o){function f(D){var P={};function C(A){if(P[A])return P[A].exports;var _=P[A]={i:A,l:!1,exports:{}};return D[A].call(_.exports,_,_.exports,C),_.l=!0,_.exports}C.m=D,C.c=P,C.i=function(A){return A},C.d=function(A,_,F){C.o(A,_)||Object.defineProperty(A,_,{configurable:!1,enumerable:!0,get:F})},C.r=function(A){Object.defineProperty(A,"__esModule",{value:!0})},C.n=function(A){var _=A&&A.__esModule?function(){return A.default}:function(){return A};return C.d(_,"a",_),_},C.o=function(A,_){return Object.prototype.hasOwnProperty.call(A,_)},C.p="/",C.oe=function(A){throw console.error(A),A};var z=C(C.s=ENTRY_MODULE);return z.default||z}var p="[\\.|\\-|\\+|\\w|/|@]+",m="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+p+").*?\\)";function w(D){return(D+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function g(D){return!isNaN(1*D)}function E(D,P,C){var z={};z[C]=[];var A=P.toString(),_=A.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!_)return z;for(var F=_[1],b=new RegExp("(\\\\n|\\W)"+w(F)+m,"g"),V;V=b.exec(A);)V[3]!=="dll-reference"&&z[C].push(V[3]);for(b=new RegExp("\\("+w(F)+'\\("(dll-reference\\s('+p+'))"\\)\\)'+m,"g");V=b.exec(A);)D[V[2]]||(z[C].push(V[1]),D[V[2]]=o(V[1]).m),z[V[2]]=z[V[2]]||[],z[V[2]].push(V[4]);for(var Y=Object.keys(z),X=0;X<Y.length;X++)for(var Q=0;Q<z[Y[X]].length;Q++)g(z[Y[X]][Q])&&(z[Y[X]][Q]=1*z[Y[X]][Q]);return z}function B(D){var P=Object.keys(D);return P.reduce(function(C,z){return C||D[z].length>0},!1)}function T(D,P){for(var C={main:[P]},z={main:[]},A={main:{}};B(C);)for(var _=Object.keys(C),F=0;F<_.length;F++){var b=_[F],V=C[b],Y=V.pop();if(A[b]=A[b]||{},!(A[b][Y]||!D[b][Y])){A[b][Y]=!0,z[b]=z[b]||[],z[b].push(Y);for(var X=E(D,D[b][Y],b),Q=Object.keys(X),se=0;se<Q.length;se++)C[Q[se]]=C[Q[se]]||[],C[Q[se]]=C[Q[se]].concat(X[Q[se]])}}return z}r.exports=function(D,P){P=P||{};var C={main:o.m},z=P.all?{main:Object.keys(C.main)}:T(C,D),A="";Object.keys(z).filter(function(Y){return Y!=="main"}).forEach(function(Y){for(var X=0;z[Y][X];)X++;z[Y].push(X),C[Y][X]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",A=A+"var "+Y+" = ("+f.toString().replace("ENTRY_MODULE",JSON.stringify(X))+")({"+z[Y].map(function(Q){return""+JSON.stringify(Q)+": "+C[Y][Q].toString()}).join(",")+`});
`}),A=A+"new (("+f.toString().replace("ENTRY_MODULE",JSON.stringify(D))+")({"+z.main.map(function(Y){return""+JSON.stringify(Y)+": "+C.main[Y].toString()}).join(",")+"}))(self);";var _=new window.Blob([A],{type:"text/javascript"});if(P.bare)return _;var F=window.URL||window.webkitURL||window.mozURL||window.msURL,b=F.createObjectURL(_),V=new window.Worker(b);return V.objectURL=b,V}},"./src/crypt/decrypter.js":function(r,i,o){o.r(i);var f=function(){function A(F,b){this.subtle=F,this.aesIV=b}var _=A.prototype;return _.decrypt=function(b,V){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},V,b)},A}(),p=function(){function A(F,b){this.subtle=F,this.key=b}var _=A.prototype;return _.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},A}(),m=p;function w(A){var _=A.byteLength,F=_&&new DataView(A).getUint8(_-1);return F?A.slice(0,_-F):A}var g=function(){function A(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var _=A.prototype;return _.uint8ArrayToUint32Array_=function(b){for(var V=new DataView(b),Y=new Uint32Array(4),X=0;X<4;X++)Y[X]=V.getUint32(X*4);return Y},_.initTable=function(){var b=this.sBox,V=this.invSBox,Y=this.subMix,X=Y[0],Q=Y[1],se=Y[2],oe=Y[3],_e=this.invSubMix,Be=_e[0],je=_e[1],be=_e[2],Ut=_e[3],Ue=new Uint32Array(256),ze=0,le=0,pe=0;for(pe=0;pe<256;pe++)pe<128?Ue[pe]=pe<<1:Ue[pe]=pe<<1^283;for(pe=0;pe<256;pe++){var me=le^le<<1^le<<2^le<<3^le<<4;me=me>>>8^me&255^99,b[ze]=me,V[me]=ze;var we=Ue[ze],ge=Ue[we],nt=Ue[ge],Le=Ue[me]*257^me*16843008;X[ze]=Le<<24|Le>>>8,Q[ze]=Le<<16|Le>>>16,se[ze]=Le<<8|Le>>>24,oe[ze]=Le,Le=nt*16843009^ge*65537^we*257^ze*16843008,Be[me]=Le<<24|Le>>>8,je[me]=Le<<16|Le>>>16,be[me]=Le<<8|Le>>>24,Ut[me]=Le,ze?(ze=we^Ue[Ue[Ue[nt^we]]],le^=Ue[Ue[le]]):ze=le=1}},_.expandKey=function(b){for(var V=this.uint8ArrayToUint32Array_(b),Y=!0,X=0;X<V.length&&Y;)Y=V[X]===this.key[X],X++;if(!Y){this.key=V;var Q=this.keySize=V.length;if(Q!==4&&Q!==6&&Q!==8)throw new Error("Invalid aes key size="+Q);var se=this.ksRows=(Q+6+1)*4,oe,_e,Be=this.keySchedule=new Uint32Array(se),je=this.invKeySchedule=new Uint32Array(se),be=this.sBox,Ut=this.rcon,Ue=this.invSubMix,ze=Ue[0],le=Ue[1],pe=Ue[2],me=Ue[3],we,ge;for(oe=0;oe<se;oe++){if(oe<Q){we=Be[oe]=V[oe];continue}ge=we,oe%Q===0?(ge=ge<<8|ge>>>24,ge=be[ge>>>24]<<24|be[ge>>>16&255]<<16|be[ge>>>8&255]<<8|be[ge&255],ge^=Ut[oe/Q|0]<<24):Q>6&&oe%Q===4&&(ge=be[ge>>>24]<<24|be[ge>>>16&255]<<16|be[ge>>>8&255]<<8|be[ge&255]),Be[oe]=we=(Be[oe-Q]^ge)>>>0}for(_e=0;_e<se;_e++)oe=se-_e,_e&3?ge=Be[oe]:ge=Be[oe-4],_e<4||oe<=4?je[_e]=ge:je[_e]=ze[be[ge>>>24]]^le[be[ge>>>16&255]]^pe[be[ge>>>8&255]]^me[be[ge&255]],je[_e]=je[_e]>>>0}},_.networkToHostOrderSwap=function(b){return b<<24|(b&65280)<<8|(b&16711680)>>8|b>>>24},_.decrypt=function(b,V,Y,X){for(var Q=this.keySize+6,se=this.invKeySchedule,oe=this.invSBox,_e=this.invSubMix,Be=_e[0],je=_e[1],be=_e[2],Ut=_e[3],Ue=this.uint8ArrayToUint32Array_(Y),ze=Ue[0],le=Ue[1],pe=Ue[2],me=Ue[3],we=new Int32Array(b),ge=new Int32Array(we.length),nt,Le,Xt,mt,De,At,Ot,Gt,wr,vn,Rt,Fr,yt,mn,jt=this.networkToHostOrderSwap;V<we.length;){for(wr=jt(we[V]),vn=jt(we[V+1]),Rt=jt(we[V+2]),Fr=jt(we[V+3]),De=wr^se[0],At=Fr^se[1],Ot=Rt^se[2],Gt=vn^se[3],yt=4,mn=1;mn<Q;mn++)nt=Be[De>>>24]^je[At>>16&255]^be[Ot>>8&255]^Ut[Gt&255]^se[yt],Le=Be[At>>>24]^je[Ot>>16&255]^be[Gt>>8&255]^Ut[De&255]^se[yt+1],Xt=Be[Ot>>>24]^je[Gt>>16&255]^be[De>>8&255]^Ut[At&255]^se[yt+2],mt=Be[Gt>>>24]^je[De>>16&255]^be[At>>8&255]^Ut[Ot&255]^se[yt+3],De=nt,At=Le,Ot=Xt,Gt=mt,yt=yt+4;nt=oe[De>>>24]<<24^oe[At>>16&255]<<16^oe[Ot>>8&255]<<8^oe[Gt&255]^se[yt],Le=oe[At>>>24]<<24^oe[Ot>>16&255]<<16^oe[Gt>>8&255]<<8^oe[De&255]^se[yt+1],Xt=oe[Ot>>>24]<<24^oe[Gt>>16&255]<<16^oe[De>>8&255]<<8^oe[At&255]^se[yt+2],mt=oe[Gt>>>24]<<24^oe[De>>16&255]<<16^oe[At>>8&255]<<8^oe[Ot&255]^se[yt+3],yt=yt+3,ge[V]=jt(nt^ze),ge[V+1]=jt(mt^le),ge[V+2]=jt(Xt^pe),ge[V+3]=jt(Le^me),ze=wr,le=vn,pe=Rt,me=Fr,V=V+4}return X?w(ge.buffer):ge.buffer},_.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},A}(),E=g,B=o("./src/errors.ts"),T=o("./src/utils/logger.js"),D=o("./src/events.js"),P=o("./src/utils/get-self-scope.js"),C=Object(P.getSelfScope)(),z=function(){function A(F,b,V){var Y=V===void 0?{}:V,X=Y.removePKCS7Padding,Q=X===void 0?!0:X;if(this.logEnabled=!0,this.observer=F,this.config=b,this.removePKCS7Padding=Q,Q)try{var se=C.crypto;se&&(this.subtle=se.subtle||se.webkitSubtle)}catch{}this.disableWebCrypto=!this.subtle}var _=A.prototype;return _.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},_.decrypt=function(b,V,Y,X){var Q=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(T.logger.log("JS AES decrypt"),this.logEnabled=!1);var se=this.decryptor;se||(this.decryptor=se=new E),se.expandKey(V),X(se.decrypt(b,0,Y,this.removePKCS7Padding))}else{this.logEnabled&&(T.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var oe=this.subtle;this.key!==V&&(this.key=V,this.fastAesKey=new m(oe,V)),this.fastAesKey.expandKey().then(function(_e){var Be=new f(oe,Y);Be.decrypt(b,_e).catch(function(je){Q.onWebCryptoError(je,b,V,Y,X)}).then(function(je){X(je)})}).catch(function(_e){Q.onWebCryptoError(_e,b,V,Y,X)})}},_.onWebCryptoError=function(b,V,Y,X,Q){this.config.enableSoftwareAES?(T.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(V,Y,X,Q)):(T.logger.error("decrypting error : "+b.message),this.observer.trigger(D.default.ERROR,{type:B.ErrorTypes.MEDIA_ERROR,details:B.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:b.message}))},_.destroy=function(){var b=this.decryptor;b&&(b.destroy(),this.decryptor=void 0)},A}();i.default=z},"./src/demux/demuxer-inline.js":function(r,i,o){o.r(i);var f=o("./src/events.js"),p=o("./src/errors.ts"),m=o("./src/crypt/decrypter.js"),w=o("./src/polyfills/number.js"),g=o("./src/utils/logger.js"),E=o("./src/utils/get-self-scope.js");function B(N,K,O,x){var R,I,M,U,j,W=navigator.userAgent.toLowerCase(),J=x,Z=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(R=((K[O+2]&192)>>>6)+1,I=(K[O+2]&60)>>>2,I>Z.length-1){N.trigger(f.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+I});return}return U=(K[O+2]&1)<<2,U|=(K[O+3]&192)>>>6,g.logger.log("manifest codec:"+x+",ADTS data:type:"+R+",sampleingIndex:"+I+"["+Z[I]+"Hz],channelConfig:"+U),/firefox/i.test(W)?I>=6?(R=5,j=new Array(4),M=I-3):(R=2,j=new Array(2),M=I):W.indexOf("android")!==-1?(R=2,j=new Array(2),M=I):(R=5,j=new Array(4),x&&(x.indexOf("mp4a.40.29")!==-1||x.indexOf("mp4a.40.5")!==-1)||!x&&I>=6?M=I-3:((x&&x.indexOf("mp4a.40.2")!==-1&&(I>=6&&U===1||/vivaldi/i.test(W))||!x&&U===1)&&(R=2,j=new Array(2)),M=I)),j[0]=R<<3,j[0]|=(I&14)>>1,j[1]|=(I&1)<<7,j[1]|=U<<3,R===5&&(j[1]|=(M&14)>>1,j[2]=(M&1)<<7,j[2]|=8,j[3]=0),{config:j,samplerate:Z[I],channelCount:U,codec:"mp4a.40."+R,manifestCodec:J}}function T(N,K){return N[K]===255&&(N[K+1]&246)===240}function D(N,K){return N[K+1]&1?7:9}function P(N,K){return(N[K+3]&3)<<11|N[K+4]<<3|(N[K+5]&224)>>>5}function C(N,K){return!!(K+1<N.length&&T(N,K))}function z(N,K){if(C(N,K)){var O=D(N,K);if(K+O>=N.length)return!1;var x=P(N,K);if(x<=O)return!1;var R=K+x;if(R===N.length||R+1<N.length&&T(N,R))return!0}return!1}function A(N,K,O,x,R){if(!N.samplerate){var I=B(K,O,x,R);N.config=I.config,N.samplerate=I.samplerate,N.channelCount=I.channelCount,N.codec=I.codec,N.manifestCodec=I.manifestCodec,g.logger.log("parsed codec:"+N.codec+",rate:"+I.samplerate+",nb channel:"+I.channelCount)}}function _(N){return 1024*9e4/N}function F(N,K,O,x,R){var I,M,U,j=N.length;if(I=D(N,K),M=P(N,K),M-=I,M>0&&K+I+M<=j)return U=O+x*R,{headerLength:I,frameLength:M,stamp:U}}function b(N,K,O,x,R){var I=_(N.samplerate),M=F(K,O,x,R,I);if(M){var U=M.stamp,j=M.headerLength,W=M.frameLength,J={unit:K.subarray(O+j,O+j+W),pts:U,dts:U};return N.samples.push(J),{sample:J,length:W+j}}}var V=o("./src/demux/id3.js"),Y=function(){function N(O,x,R){this.observer=O,this.config=R,this.remuxer=x}var K=N.prototype;return K.resetInitSegment=function(x,R,I,M){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:R,duration:M,inputTimeScale:9e4}},K.resetTimeStamp=function(){},N.probe=function(x){if(!x)return!1;for(var R=V.default.getID3Data(x,0)||[],I=R.length,M=x.length;I<M;I++)if(z(x,I))return g.logger.log("ADTS sync word found !"),!0;return!1},K.append=function(x,R,I,M){for(var U=this._audioTrack,j=V.default.getID3Data(x,0)||[],W=V.default.getTimeStamp(j),J=Object(w.isFiniteNumber)(W)?W*90:R*9e4,Z=0,q=J,ne=x.length,te=j.length,ue=[{pts:q,dts:q,data:j}];te<ne-1;)if(C(x,te)&&te+5<ne){A(U,this.observer,x,te,U.manifestCodec);var re=b(U,x,te,J,Z);if(re)te+=re.length,q=re.sample.pts,Z++;else{g.logger.log("Unable to parse AAC frame");break}}else V.default.isHeader(x,te)?(j=V.default.getID3Data(x,te),ue.push({pts:q,dts:q,data:j}),te+=j.length):te++;this.remuxer.remux(U,{samples:[]},{samples:ue,inputTimeScale:9e4},{samples:[]},R,I,M)},K.destroy=function(){},N}(),X=Y,Q=o("./src/demux/mp4demuxer.js"),se={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(K,O,x,R,I){if(!(x+24>O.length)){var M=this.parseHeader(O,x);if(M&&x+M.frameLength<=O.length){var U=M.samplesPerFrame*9e4/M.sampleRate,j=R+I*U,W={unit:O.subarray(x,x+M.frameLength),pts:j,dts:j};return K.config=[],K.channelCount=M.channelCount,K.samplerate=M.sampleRate,K.samples.push(W),{sample:W,length:M.frameLength}}}},parseHeader:function(K,O){var x=K[O+1]>>3&3,R=K[O+1]>>1&3,I=K[O+2]>>4&15,M=K[O+2]>>2&3,U=K[O+2]>>1&1;if(x!==1&&I!==0&&I!==15&&M!==3){var j=x===3?3-R:R===3?3:4,W=se.BitratesMap[j*14+I-1]*1e3,J=x===3?0:x===2?1:2,Z=se.SamplingRateMap[J*3+M],q=K[O+3]>>6===3?1:2,ne=se.SamplesCoefficients[x][R],te=se.BytesInSlot[R],ue=ne*8*te,re=parseInt(ne*W/Z+U,10)*te;return{sampleRate:Z,channelCount:q,frameLength:re,samplesPerFrame:ue}}},isHeaderPattern:function(K,O){return K[O]===255&&(K[O+1]&224)===224&&(K[O+1]&6)!==0},isHeader:function(K,O){return!!(O+1<K.length&&this.isHeaderPattern(K,O))},probe:function(K,O){if(O+1<K.length&&this.isHeaderPattern(K,O)){var x=4,R=this.parseHeader(K,O),I=x;R&&R.frameLength&&(I=R.frameLength);var M=O+I;if(M===K.length||M+1<K.length&&this.isHeaderPattern(K,M))return!0}return!1}},oe=se,_e=function(){function N(O){this.data=O,this.bytesAvailable=O.byteLength,this.word=0,this.bitsAvailable=0}var K=N.prototype;return K.loadWord=function(){var x=this.data,R=this.bytesAvailable,I=x.byteLength-R,M=new Uint8Array(4),U=Math.min(4,R);if(U===0)throw new Error("no bytes available");M.set(x.subarray(I,I+U)),this.word=new DataView(M.buffer).getUint32(0),this.bitsAvailable=U*8,this.bytesAvailable-=U},K.skipBits=function(x){var R;this.bitsAvailable>x?(this.word<<=x,this.bitsAvailable-=x):(x-=this.bitsAvailable,R=x>>3,x-=R>>3,this.bytesAvailable-=R,this.loadWord(),this.word<<=x,this.bitsAvailable-=x)},K.readBits=function(x){var R=Math.min(this.bitsAvailable,x),I=this.word>>>32-R;return x>32&&g.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=R,this.bitsAvailable>0?this.word<<=R:this.bytesAvailable>0&&this.loadWord(),R=x-R,R>0&&this.bitsAvailable?I<<R|this.readBits(R):I},K.skipLZ=function(){var x;for(x=0;x<this.bitsAvailable;++x)if(this.word&2147483648>>>x)return this.word<<=x,this.bitsAvailable-=x,x;return this.loadWord(),x+this.skipLZ()},K.skipUEG=function(){this.skipBits(1+this.skipLZ())},K.skipEG=function(){this.skipBits(1+this.skipLZ())},K.readUEG=function(){var x=this.skipLZ();return this.readBits(x+1)-1},K.readEG=function(){var x=this.readUEG();return 1&x?1+x>>>1:-1*(x>>>1)},K.readBoolean=function(){return this.readBits(1)===1},K.readUByte=function(){return this.readBits(8)},K.readUShort=function(){return this.readBits(16)},K.readUInt=function(){return this.readBits(32)},K.skipScalingList=function(x){var R=8,I=8,M,U;for(M=0;M<x;M++)I!==0&&(U=this.readEG(),I=(R+U+256)%256),R=I===0?R:I},K.readSPS=function(){var x=0,R=0,I=0,M=0,U,j,W,J,Z,q,ne,te=this.readUByte.bind(this),ue=this.readBits.bind(this),re=this.readUEG.bind(this),ve=this.readBoolean.bind(this),de=this.skipBits.bind(this),Se=this.skipEG.bind(this),Fe=this.skipUEG.bind(this),Te=this.skipScalingList.bind(this);if(te(),U=te(),ue(5),de(3),te(),Fe(),U===100||U===110||U===122||U===244||U===44||U===83||U===86||U===118||U===128){var He=re();if(He===3&&de(1),Fe(),Fe(),de(1),ve())for(q=He!==3?8:12,ne=0;ne<q;ne++)ve()&&(ne<6?Te(16):Te(64))}Fe();var Pe=re();if(Pe===0)re();else if(Pe===1)for(de(1),Se(),Se(),j=re(),ne=0;ne<j;ne++)Se();Fe(),de(1),W=re(),J=re(),Z=ue(1),Z===0&&de(1),de(1),ve()&&(x=re(),R=re(),I=re(),M=re());var Re=[1,1];if(ve()&&ve()){var Me=te();switch(Me){case 1:Re=[1,1];break;case 2:Re=[12,11];break;case 3:Re=[10,11];break;case 4:Re=[16,11];break;case 5:Re=[40,33];break;case 6:Re=[24,11];break;case 7:Re=[20,11];break;case 8:Re=[32,11];break;case 9:Re=[80,33];break;case 10:Re=[18,11];break;case 11:Re=[15,11];break;case 12:Re=[64,33];break;case 13:Re=[160,99];break;case 14:Re=[4,3];break;case 15:Re=[3,2];break;case 16:Re=[2,1];break;case 255:{Re=[te()<<8|te(),te()<<8|te()];break}}}return{width:Math.ceil((W+1)*16-x*2-R*2),height:(2-Z)*(J+1)*16-(Z?2:4)*(I+M),pixelRatio:Re}},K.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},N}(),Be=_e,je=function(){function N(O,x,R,I){this.decryptdata=R,this.discardEPB=I,this.decrypter=new m.default(O,x,{removePKCS7Padding:!1})}var K=N.prototype;return K.decryptBuffer=function(x,R){this.decrypter.decrypt(x,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,R)},K.decryptAacSample=function(x,R,I,M){var U=x[R].unit,j=U.subarray(16,U.length-U.length%16),W=j.buffer.slice(j.byteOffset,j.byteOffset+j.length),J=this;this.decryptBuffer(W,function(Z){Z=new Uint8Array(Z),U.set(Z,16),M||J.decryptAacSamples(x,R+1,I)})},K.decryptAacSamples=function(x,R,I){for(;;R++){if(R>=x.length){I();return}if(!(x[R].unit.length<32)){var M=this.decrypter.isSync();if(this.decryptAacSample(x,R,I,M),!M)return}}},K.getAvcEncryptedData=function(x){for(var R=Math.floor((x.length-48)/160)*16+16,I=new Int8Array(R),M=0,U=32;U<=x.length-16;U+=160,M+=16)I.set(x.subarray(U,U+16),M);return I},K.getAvcDecryptedUnit=function(x,R){R=new Uint8Array(R);for(var I=0,M=32;M<=x.length-16;M+=160,I+=16)x.set(R.subarray(I,I+16),M);return x},K.decryptAvcSample=function(x,R,I,M,U,j){var W=this.discardEPB(U.data),J=this.getAvcEncryptedData(W),Z=this;this.decryptBuffer(J.buffer,function(q){U.data=Z.getAvcDecryptedUnit(W,q),j||Z.decryptAvcSamples(x,R,I+1,M)})},K.decryptAvcSamples=function(x,R,I,M){for(;;R++,I=0){if(R>=x.length){M();return}for(var U=x[R].units;!(I>=U.length);I++){var j=U[I];if(!(j.data.length<=48||j.type!==1&&j.type!==5)){var W=this.decrypter.isSync();if(this.decryptAvcSample(x,R,I,M,j,W),!W)return}}}},N}(),be=je,Ut={video:1,audio:2,id3:3,text:4},Ue=function(){function N(O,x,R,I){this.observer=O,this.config=R,this.typeSupported=I,this.remuxer=x,this.sampleAes=null,this.pmtUnknownTypes={}}var K=N.prototype;return K.setDecryptData=function(x){x!=null&&x.key!=null&&x.method==="SAMPLE-AES"?this.sampleAes=new be(this.observer,this.config,x,this.discardEPB):this.sampleAes=null},N.probe=function(x){var R=N._syncOffset(x);return R<0?!1:(R&&g.logger.warn("MPEG2-TS detected but first sync word found @ offset "+R+", junk ahead ?"),!0)},N._syncOffset=function(x){for(var R=Math.min(1e3,x.length-564),I=0;I<R;){if(x[I]===71&&x[I+188]===71&&x[I+2*188]===71)return I;I++}return-1},N.createTrack=function(x,R){return{container:x==="video"||x==="audio"?"video/mp2t":void 0,type:x,id:Ut[x],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:x==="video"?0:void 0,isAAC:x==="audio"?!0:void 0,duration:x==="audio"?R:void 0}},K.resetInitSegment=function(x,R,I,M){this.pmtParsed=!1,this._pmtId=-1,this.pmtUnknownTypes={},this._avcTrack=N.createTrack("video",M),this._audioTrack=N.createTrack("audio",M),this._id3Track=N.createTrack("id3",M),this._txtTrack=N.createTrack("text",M),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=R,this.videoCodec=I,this._duration=M},K.resetTimeStamp=function(){},K.append=function(x,R,I,M){var U,j=x.length,W,J,Z,q,ne,te=!1;this.pmtUnknownTypes={},this.contiguous=I;var ue=this.pmtParsed,re=this._avcTrack,ve=this._audioTrack,de=this._id3Track,Se=re.pid,Fe=ve.pid,Te=de.pid,He=this._pmtId,Pe=re.pesData,Re=ve.pesData,Me=de.pesData,Ke=this._parsePAT,xt=this._parsePMT.bind(this),ut=this._parsePES,We=this._parseAVCPES.bind(this),kt=this._parseAACPES.bind(this),ft=this._parseMPEGPES.bind(this),Pt=this._parseID3PES.bind(this),it=N._syncOffset(x);for(j-=(j+it)%188,U=it;U<j;U+=188)if(x[U]===71){if(W=!!(x[U+1]&64),J=((x[U+1]&31)<<8)+x[U+2],Z=(x[U+3]&48)>>4,Z>1){if(q=U+5+x[U+4],q===U+188)continue}else q=U+4;switch(J){case Se:W&&(Pe&&(ne=ut(Pe))&&We(ne,!1),Pe={data:[],size:0}),Pe&&(Pe.data.push(x.subarray(q,U+188)),Pe.size+=U+188-q);break;case Fe:W&&(Re&&(ne=ut(Re))&&(ve.isAAC?kt(ne):ft(ne)),Re={data:[],size:0}),Re&&(Re.data.push(x.subarray(q,U+188)),Re.size+=U+188-q);break;case Te:W&&(Me&&(ne=ut(Me))&&Pt(ne),Me={data:[],size:0}),Me&&(Me.data.push(x.subarray(q,U+188)),Me.size+=U+188-q);break;case 0:W&&(q+=x[q]+1),He=this._pmtId=Ke(x,q);break;case He:W&&(q+=x[q]+1);var Ye=xt(x,q,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,this.sampleAes!=null);Se=Ye.avc,Se>0&&(re.pid=Se),Fe=Ye.audio,Fe>0&&(ve.pid=Fe,ve.isAAC=Ye.isAAC),Te=Ye.id3,Te>0&&(de.pid=Te),te&&!ue&&(g.logger.log("reparse from beginning"),te=!1,U=it-188),ue=this.pmtParsed=!0;break;case 17:case 8191:break;default:te=!0;break}}else this.observer.trigger(f.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});Pe&&(ne=ut(Pe))?(We(ne,!0),re.pesData=null):re.pesData=Pe,Re&&(ne=ut(Re))?(ve.isAAC?kt(ne):ft(ne),ve.pesData=null):(Re&&Re.size&&g.logger.log("last AAC PES packet truncated,might overlap between fragments"),ve.pesData=Re),Me&&(ne=ut(Me))?(Pt(ne),de.pesData=null):de.pesData=Me,this.sampleAes==null?this.remuxer.remux(ve,re,de,this._txtTrack,R,I,M):this.decryptAndRemux(ve,re,de,this._txtTrack,R,I,M)},K.decryptAndRemux=function(x,R,I,M,U,j,W){if(x.samples&&x.isAAC){var J=this;this.sampleAes.decryptAacSamples(x.samples,0,function(){J.decryptAndRemuxAvc(x,R,I,M,U,j,W)})}else this.decryptAndRemuxAvc(x,R,I,M,U,j,W)},K.decryptAndRemuxAvc=function(x,R,I,M,U,j,W){if(R.samples){var J=this;this.sampleAes.decryptAvcSamples(R.samples,0,0,function(){J.remuxer.remux(x,R,I,M,U,j,W)})}else this.remuxer.remux(x,R,I,M,U,j,W)},K.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},K._parsePAT=function(x,R){return(x[R+10]&31)<<8|x[R+11]},K._trackUnknownPmt=function(x,R,I){var M=this.pmtUnknownTypes[x]||0;return M===0&&(this.pmtUnknownTypes[x]=0,R.call(g.logger,I)),this.pmtUnknownTypes[x]++,M},K._parsePMT=function(x,R,I,M){var U,j,W,J,Z={audio:-1,avc:-1,id3:-1,isAAC:!0};for(U=(x[R+1]&15)<<8|x[R+2],j=R+3+U-4,W=(x[R+10]&15)<<8|x[R+11],R+=12+W;R<j;){switch(J=(x[R+1]&31)<<8|x[R+2],x[R]){case 207:if(!M){this._trackUnknownPmt(x[R],g.logger.warn,"ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:Z.audio===-1&&(Z.audio=J);break;case 21:Z.id3===-1&&(Z.id3=J);break;case 219:if(!M){this._trackUnknownPmt(x[R],g.logger.warn,"H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:Z.avc===-1&&(Z.avc=J);break;case 3:case 4:I?Z.audio===-1&&(Z.audio=J,Z.isAAC=!1):this._trackUnknownPmt(x[R],g.logger.warn,"MPEG audio found, not supported in this browser");break;case 36:this._trackUnknownPmt(x[R],g.logger.warn,"Unsupported HEVC stream type found");break;default:this._trackUnknownPmt(x[R],g.logger.log,"Unknown stream type:"+x[R]);break}R+=((x[R+3]&15)<<8|x[R+4])+5}return Z},K._parsePES=function(x){var R=0,I,M,U,j,W,J,Z,q,ne,te=x.data;if(!x||x.size===0)return null;for(;te[0].length<19&&te.length>1;){var ue=new Uint8Array(te[0].length+te[1].length);ue.set(te[0]),ue.set(te[1],te[0].length),te[0]=ue,te.splice(1,1)}if(I=te[0],U=(I[0]<<16)+(I[1]<<8)+I[2],U===1){if(j=(I[4]<<8)+I[5],j&&j>x.size-6||(M=I[7],M&192&&(Z=(I[9]&14)*536870912+(I[10]&255)*4194304+(I[11]&254)*16384+(I[12]&255)*128+(I[13]&254)/2,M&64?(q=(I[14]&14)*536870912+(I[15]&255)*4194304+(I[16]&254)*16384+(I[17]&255)*128+(I[18]&254)/2,Z-q>60*9e4&&(g.logger.warn(Math.round((Z-q)/9e4)+"s delta between PTS and DTS, align them"),Z=q)):q=Z),W=I[8],ne=W+9,x.size<=ne))return null;x.size-=ne,J=new Uint8Array(x.size);for(var re=0,ve=te.length;re<ve;re++){I=te[re];var de=I.byteLength;if(ne)if(ne>de){ne-=de;continue}else I=I.subarray(ne),de-=ne,ne=0;J.set(I,R),R+=de}return j&&(j-=W+3),{data:J,pts:Z,dts:q,len:j}}else return null},K.pushAccesUnit=function(x,R){if(x.units.length&&x.frame){var I=R.samples,M=I.length;if(isNaN(x.pts))if(M){var U=I[M-1];x.pts=U.pts,x.dts=U.dts}else{R.dropped++;return}!this.config.forceKeyFrameOnDiscontinuity||x.key===!0||R.sps&&(M||this.contiguous)?(x.id=M,I.push(x)):R.dropped++}x.debug.length&&g.logger.log(x.pts+"/"+x.dts+":"+x.debug)},K._parseAVCPES=function(x,R){var I=this,M=this._avcTrack,U=this._parseAVCNALu(x.data),j,W=this.avcSample,J,Z=!1,q,ne=this.pushAccesUnit.bind(this),te=function(re,ve,de,Se){return{key:re,pts:ve,dts:de,units:[],debug:Se}};x.data=null,W&&U.length&&!M.audFound&&(ne(W,M),W=this.avcSample=te(!1,x.pts,x.dts,"")),U.forEach(function(ue){switch(ue.type){case 1:J=!0,W||(W=I.avcSample=te(!0,x.pts,x.dts,"")),W.frame=!0;var re=ue.data;if(Z&&re.length>4){var ve=new Be(re).readSliceType();(ve===2||ve===4||ve===7||ve===9)&&(W.key=!0)}break;case 5:J=!0,W||(W=I.avcSample=te(!0,x.pts,x.dts,"")),W.key=!0,W.frame=!0;break;case 6:J=!0,j=new Be(I.discardEPB(ue.data)),j.readUByte();for(var de=0,Se=0,Fe=!1,Te=0;!Fe&&j.bytesAvailable>1;){de=0;do Te=j.readUByte(),de+=Te;while(Te===255);Se=0;do Te=j.readUByte(),Se+=Te;while(Te===255);if(de===4&&j.bytesAvailable!==0){Fe=!0;var He=j.readUByte();if(He===181){var Pe=j.readUShort();if(Pe===49){var Re=j.readUInt();if(Re===1195456820){var Me=j.readUByte();if(Me===3){var Ke=j.readUByte(),xt=j.readUByte(),ut=31&Ke,We=[Ke,xt];for(q=0;q<ut;q++)We.push(j.readUByte()),We.push(j.readUByte()),We.push(j.readUByte());I._insertSampleInOrder(I._txtTrack.samples,{type:3,pts:x.pts,bytes:We})}}}}}else if(de===5&&j.bytesAvailable!==0){if(Fe=!0,Se>16){var kt=[];for(q=0;q<16;q++)kt.push(j.readUByte().toString(16)),(q===3||q===5||q===7||q===9)&&kt.push("-");var ft=Se-16,Pt=new Uint8Array(ft);for(q=0;q<ft;q++)Pt[q]=j.readUByte();I._insertSampleInOrder(I._txtTrack.samples,{pts:x.pts,payloadType:de,uuid:kt.join(""),userDataBytes:Pt,userData:Object(V.utf8ArrayToStr)(Pt.buffer)})}}else if(Se<j.bytesAvailable)for(q=0;q<Se;q++)j.readUByte()}break;case 7:if(J=!0,Z=!0,!M.sps){j=new Be(ue.data);var it=j.readSPS();M.width=it.width,M.height=it.height,M.pixelRatio=it.pixelRatio,M.sps=[ue.data],M.duration=I._duration;var Ye=ue.data.subarray(1,4),cr="avc1.";for(q=0;q<3;q++){var dr=Ye[q].toString(16);dr.length<2&&(dr="0"+dr),cr+=dr}M.codec=cr}break;case 8:J=!0,M.pps||(M.pps=[ue.data]);break;case 9:J=!1,M.audFound=!0,W&&ne(W,M),W=I.avcSample=te(!1,x.pts,x.dts,"");break;case 12:J=!1;break;default:J=!1,W&&(W.debug+="unknown NAL "+ue.type+" ");break}if(W&&J){var Kt=W.units;Kt.push(ue)}}),R&&W&&(ne(W,M),this.avcSample=null)},K._insertSampleInOrder=function(x,R){var I=x.length;if(I>0){if(R.pts>=x[I-1].pts)x.push(R);else for(var M=I-1;M>=0;M--)if(R.pts<x[M].pts){x.splice(M,0,R);break}}else x.push(R)},K._getLastNalUnit=function(){var x=this.avcSample,R;if(!x||x.units.length===0){var I=this._avcTrack,M=I.samples;x=M[M.length-1]}if(x){var U=x.units;R=U[U.length-1]}return R},K._parseAVCNALu=function(x){var R=0,I=x.byteLength,M,U,j=this._avcTrack,W=j.naluState||0,J=W,Z=[],q,ne,te=-1,ue;for(W===-1&&(te=0,ue=x[0]&31,W=0,R=1);R<I;){if(M=x[R++],!W){W=M?0:1;continue}if(W===1){W=M?0:2;continue}if(!M)W=3;else if(M===1){if(te>=0)q={data:x.subarray(te,R-W-1),type:ue},Z.push(q);else{var re=this._getLastNalUnit();if(re&&(J&&R<=4-J&&re.state&&(re.data=re.data.subarray(0,re.data.byteLength-J)),U=R-W-1,U>0)){var ve=new Uint8Array(re.data.byteLength+U);ve.set(re.data,0),ve.set(x.subarray(0,U),re.data.byteLength),re.data=ve}}R<I?(ne=x[R]&31,te=R,ue=ne,W=0):W=-1}else W=0}if(te>=0&&W>=0&&(q={data:x.subarray(te,I),type:ue,state:W},Z.push(q)),Z.length===0){var de=this._getLastNalUnit();if(de){var Se=new Uint8Array(de.data.byteLength+x.byteLength);Se.set(de.data,0),Se.set(x,de.data.byteLength),de.data=Se}}return j.naluState=W,Z},K.discardEPB=function(x){for(var R=x.byteLength,I=[],M=1,U,j;M<R-2;)x[M]===0&&x[M+1]===0&&x[M+2]===3?(I.push(M+2),M+=2):M++;if(I.length===0)return x;U=R-I.length,j=new Uint8Array(U);var W=0;for(M=0;M<U;W++,M++)W===I[0]&&(W++,I.shift()),j[M]=x[W];return j},K._parseAACPES=function(x){var R=this._audioTrack,I=x.data,M=x.pts,U=0,j=this.aacOverFlow,W=this.aacLastPTS,J,Z,q,ne,te;if(j){var ue=new Uint8Array(j.byteLength+I.byteLength);ue.set(j,0),ue.set(I,j.byteLength),I=ue}for(q=U,te=I.length;q<te-1&&!C(I,q);q++);if(q){var re,ve;if(q<te-1?(re="AAC PES did not start with ADTS header,offset:"+q,ve=!1):(re="no ADTS header found in AAC PES",ve=!0),g.logger.warn("parsing error:"+re),this.observer.trigger(f.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:ve,reason:re}),ve)return}if(A(R,this.observer,I,q,this.audioCodec),Z=0,J=_(R.samplerate),j&&W){var de=W+J;Math.abs(de-M)>1&&(g.logger.log("AAC: align PTS for overlapping frames by "+Math.round((de-M)/90)),M=de)}for(;q<te;)if(C(I,q)){if(q+5<te){var Se=b(R,I,q,M,Z);if(Se){q+=Se.length,ne=Se.sample.pts,Z++;continue}}break}else q++;q<te?j=I.subarray(q,te):j=null,this.aacOverFlow=j,this.aacLastPTS=ne},K._parseMPEGPES=function(x){for(var R=x.data,I=R.length,M=0,U=0,j=x.pts;U<I;)if(oe.isHeader(R,U)){var W=oe.appendFrame(this._audioTrack,R,U,j,M);if(W)U+=W.length,M++;else break}else U++},K._parseID3PES=function(x){this._id3Track.samples.push(x)},N}(),ze=Ue,le=function(){function N(O,x,R){this.observer=O,this.config=R,this.remuxer=x}var K=N.prototype;return K.resetInitSegment=function(x,R,I,M){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:R,duration:M,inputTimeScale:9e4}},K.resetTimeStamp=function(){},N.probe=function(x){var R,I,M=V.default.getID3Data(x,0);if(M&&V.default.getTimeStamp(M)!==void 0){for(R=M.length,I=Math.min(x.length-1,R+100);R<I;R++)if(oe.probe(x,R))return g.logger.log("MPEG Audio sync word found !"),!0}return!1},K.append=function(x,R,I,M){for(var U=V.default.getID3Data(x,0)||[],j=V.default.getTimeStamp(U),W=j!==void 0?90*j:R*9e4,J=U.length,Z=x.length,q=0,ne=0,te=this._audioTrack,ue=[{pts:W,dts:W,data:U}];J<Z;)if(oe.isHeader(x,J)){var re=oe.appendFrame(te,x,J,W,q);if(re)J+=re.length,ne=re.sample.pts,q++;else break}else V.default.isHeader(x,J)?(U=V.default.getID3Data(x,J),ue.push({pts:ne,dts:ne,data:U}),J+=U.length):J++;this.remuxer.remux(te,{samples:[]},{samples:ue,inputTimeScale:9e4},{samples:[]},R,I,M)},K.destroy=function(){},N}(),pe=le,me=function(){function N(){}return N.getSilentFrame=function(O,x){switch(O){case"mp4a.40.2":if(x===1)return new Uint8Array([0,200,0,128,35,128]);if(x===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(x===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(x===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(x===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(x===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(x===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(x===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(x===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}return null},N}(),we=me,ge=Math.pow(2,32)-1,nt=function(){function N(){}return N.init=function(){N.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var O;for(O in N.types)N.types.hasOwnProperty(O)&&(N.types[O]=[O.charCodeAt(0),O.charCodeAt(1),O.charCodeAt(2),O.charCodeAt(3)]);var x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),R=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);N.HDLR_TYPES={video:x,audio:R};var I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0]);N.STTS=N.STSC=N.STCO=M,N.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),N.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),N.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var U=new Uint8Array([105,115,111,109]),j=new Uint8Array([97,118,99,49]),W=new Uint8Array([0,0,0,1]);N.FTYP=N.box(N.types.ftyp,U,W,U,j),N.DINF=N.box(N.types.dinf,N.box(N.types.dref,I))},N.box=function(O){for(var x=Array.prototype.slice.call(arguments,1),R=8,I=x.length,M=I,U;I--;)R+=x[I].byteLength;for(U=new Uint8Array(R),U[0]=R>>24&255,U[1]=R>>16&255,U[2]=R>>8&255,U[3]=R&255,U.set(O,4),I=0,R=8;I<M;I++)U.set(x[I],R),R+=x[I].byteLength;return U},N.hdlr=function(O){return N.box(N.types.hdlr,N.HDLR_TYPES[O])},N.mdat=function(O){return N.box(N.types.mdat,O)},N.mdhd=function(O,x){x*=O;var R=Math.floor(x/(ge+1)),I=Math.floor(x%(ge+1));return N.box(N.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,O>>24&255,O>>16&255,O>>8&255,O&255,R>>24,R>>16&255,R>>8&255,R&255,I>>24,I>>16&255,I>>8&255,I&255,85,196,0,0]))},N.mdia=function(O){return N.box(N.types.mdia,N.mdhd(O.timescale,O.duration),N.hdlr(O.type),N.minf(O))},N.mfhd=function(O){return N.box(N.types.mfhd,new Uint8Array([0,0,0,0,O>>24,O>>16&255,O>>8&255,O&255]))},N.minf=function(O){return O.type==="audio"?N.box(N.types.minf,N.box(N.types.smhd,N.SMHD),N.DINF,N.stbl(O)):N.box(N.types.minf,N.box(N.types.vmhd,N.VMHD),N.DINF,N.stbl(O))},N.moof=function(O,x,R){return N.box(N.types.moof,N.mfhd(O),N.traf(R,x))},N.moov=function(O){for(var x=O.length,R=[];x--;)R[x]=N.trak(O[x]);return N.box.apply(null,[N.types.moov,N.mvhd(O[0].timescale,O[0].duration)].concat(R).concat(N.mvex(O)))},N.mvex=function(O){for(var x=O.length,R=[];x--;)R[x]=N.trex(O[x]);return N.box.apply(null,[N.types.mvex].concat(R))},N.mvhd=function(O,x){x*=O;var R=Math.floor(x/(ge+1)),I=Math.floor(x%(ge+1)),M=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,O>>24&255,O>>16&255,O>>8&255,O&255,R>>24,R>>16&255,R>>8&255,R&255,I>>24,I>>16&255,I>>8&255,I&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return N.box(N.types.mvhd,M)},N.sdtp=function(O){var x=O.samples||[],R=new Uint8Array(4+x.length),I,M;for(M=0;M<x.length;M++)I=x[M].flags,R[M+4]=I.dependsOn<<4|I.isDependedOn<<2|I.hasRedundancy;return N.box(N.types.sdtp,R)},N.stbl=function(O){return N.box(N.types.stbl,N.stsd(O),N.box(N.types.stts,N.STTS),N.box(N.types.stsc,N.STSC),N.box(N.types.stsz,N.STSZ),N.box(N.types.stco,N.STCO))},N.avc1=function(O){var x=[],R=[],I,M,U;for(I=0;I<O.sps.length;I++)M=O.sps[I],U=M.byteLength,x.push(U>>>8&255),x.push(U&255),x=x.concat(Array.prototype.slice.call(M));for(I=0;I<O.pps.length;I++)M=O.pps[I],U=M.byteLength,R.push(U>>>8&255),R.push(U&255),R=R.concat(Array.prototype.slice.call(M));var j=N.box(N.types.avcC,new Uint8Array([1,x[3],x[4],x[5],255,224|O.sps.length].concat(x).concat([O.pps.length]).concat(R))),W=O.width,J=O.height,Z=O.pixelRatio[0],q=O.pixelRatio[1];return N.box(N.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,W>>8&255,W&255,J>>8&255,J&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),j,N.box(N.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),N.box(N.types.pasp,new Uint8Array([Z>>24,Z>>16&255,Z>>8&255,Z&255,q>>24,q>>16&255,q>>8&255,q&255])))},N.esds=function(O){var x=O.config.length;return new Uint8Array([0,0,0,0,3,23+x,0,1,0,4,15+x,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([x]).concat(O.config).concat([6,1,2]))},N.mp4a=function(O){var x=O.samplerate;return N.box(N.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,O.channelCount,0,16,0,0,0,0,x>>8&255,x&255,0,0]),N.box(N.types.esds,N.esds(O)))},N.mp3=function(O){var x=O.samplerate;return N.box(N.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,O.channelCount,0,16,0,0,0,0,x>>8&255,x&255,0,0]))},N.stsd=function(O){return O.type==="audio"?!O.isAAC&&O.codec==="mp3"?N.box(N.types.stsd,N.STSD,N.mp3(O)):N.box(N.types.stsd,N.STSD,N.mp4a(O)):N.box(N.types.stsd,N.STSD,N.avc1(O))},N.tkhd=function(O){var x=O.id,R=O.duration*O.timescale,I=O.width,M=O.height,U=Math.floor(R/(ge+1)),j=Math.floor(R%(ge+1));return N.box(N.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,x>>24&255,x>>16&255,x>>8&255,x&255,0,0,0,0,U>>24,U>>16&255,U>>8&255,U&255,j>>24,j>>16&255,j>>8&255,j&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,I>>8&255,I&255,0,0,M>>8&255,M&255,0,0]))},N.traf=function(O,x){var R=N.sdtp(O),I=O.id,M=Math.floor(x/(ge+1)),U=Math.floor(x%(ge+1));return N.box(N.types.traf,N.box(N.types.tfhd,new Uint8Array([0,0,0,0,I>>24,I>>16&255,I>>8&255,I&255])),N.box(N.types.tfdt,new Uint8Array([1,0,0,0,M>>24,M>>16&255,M>>8&255,M&255,U>>24,U>>16&255,U>>8&255,U&255])),N.trun(O,R.length+16+20+8+16+8+8),R)},N.trak=function(O){return O.duration=O.duration||4294967295,N.box(N.types.trak,N.tkhd(O),N.mdia(O))},N.trex=function(O){var x=O.id;return N.box(N.types.trex,new Uint8Array([0,0,0,0,x>>24,x>>16&255,x>>8&255,x&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},N.trun=function(O,x){var R=O.samples||[],I=R.length,M=12+16*I,U=new Uint8Array(M),j,W,J,Z,q,ne;for(x+=8+M,U.set([0,0,15,1,I>>>24&255,I>>>16&255,I>>>8&255,I&255,x>>>24&255,x>>>16&255,x>>>8&255,x&255],0),j=0;j<I;j++)W=R[j],J=W.duration,Z=W.size,q=W.flags,ne=W.cts,U.set([J>>>24&255,J>>>16&255,J>>>8&255,J&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z&255,q.isLeading<<2|q.dependsOn,q.isDependedOn<<6|q.hasRedundancy<<4|q.paddingValue<<1|q.isNonSync,q.degradPrio&61440,q.degradPrio&15,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne&255],12+16*j);return N.box(N.types.trun,U)},N.initSegment=function(O){N.types||N.init();var x=N.moov(O),R;return R=new Uint8Array(N.FTYP.byteLength+x.byteLength),R.set(N.FTYP),R.set(x,N.FTYP.byteLength),R},N}(),Le=nt,Xt=9e4;function mt(N,K,O,x){O===void 0&&(O=1),x===void 0&&(x=!1);var R=N*K*O;return x?Math.round(R):R}function De(N,K){return K===void 0&&(K=!1),mt(N,1e3,1/Xt,K)}function At(N,K){return K===void 0&&(K=1),mt(N,Xt,1/K)}var Ot=At(10),Gt=At(.2),wr=null,vn=function(){function N(O,x,R,I){if(this.observer=O,this.config=x,this.typeSupported=R,this.ISGenerated=!1,wr===null){var M=navigator.userAgent.match(/Chrome\/(\d+)/i);wr=M?parseInt(M[1]):0}}var K=N.prototype;return K.destroy=function(){},K.resetTimeStamp=function(x){this._initPTS=this._initDTS=x},K.resetInitSegment=function(){this.ISGenerated=!1},K.getVideoStartPts=function(x){var R=!1,I=x.reduce(function(M,U){var j=U.pts-M;return j<-4294967296?(R=!0,Rt(M,U.pts)):j>0?M:U.pts},x[0].pts);return R&&g.logger.debug("PTS rollover detected"),I},K.remux=function(x,R,I,M,U,j,W){if(this.ISGenerated||this.generateIS(x,R,U),this.ISGenerated){var J=x.samples.length,Z=R.samples.length,q=U,ne=U;if(J&&Z){var te=this.getVideoStartPts(R.samples),ue=Rt(x.samples[0].pts,te)-te,re=ue/R.inputTimeScale;q+=Math.max(0,re),ne+=Math.max(0,-re)}if(J){x.timescale||(g.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(x,R,U));var ve=this.remuxAudio(x,q,j,W);if(Z){var de;ve&&(de=ve.endPTS-ve.startPTS),R.timescale||(g.logger.warn("regenerate InitSegment as video detected"),this.generateIS(x,R,U)),this.remuxVideo(R,ne,j,de)}}else if(Z){var Se=this.remuxVideo(R,ne,j,0,W);Se&&x.codec&&this.remuxEmptyAudio(x,q,j,Se)}}I.samples.length&&this.remuxID3(I,U),M.samples.length&&this.remuxText(M,U),this.observer.trigger(f.default.FRAG_PARSED)},K.generateIS=function(x,R,I){var M=this.observer,U=x.samples,j=R.samples,W=this.typeSupported,J="audio/mp4",Z={},q={tracks:Z},ne=this._initPTS===void 0,te,ue;if(ne&&(te=ue=1/0),x.config&&U.length&&(x.timescale=x.samplerate,g.logger.log("audio sampling rate : "+x.samplerate),x.isAAC||(W.mpeg?(J="audio/mpeg",x.codec=""):W.mp3&&(x.codec="mp3")),Z.audio={container:J,codec:x.codec,initSegment:!x.isAAC&&W.mpeg?new Uint8Array:Le.initSegment([x]),metadata:{channelCount:x.channelCount}},ne&&(te=ue=U[0].pts-Math.round(x.inputTimeScale*I))),R.sps&&R.pps&&j.length){var re=R.inputTimeScale;if(R.timescale=re,Z.video={container:"video/mp4",codec:R.codec,initSegment:Le.initSegment([R]),metadata:{width:R.width,height:R.height}},ne){var ve=this.getVideoStartPts(j),de=Math.round(re*I);ue=Math.min(ue,Rt(j[0].dts,ve)-de),te=Math.min(te,ve-de),this.observer.trigger(f.default.INIT_PTS_FOUND,{initPTS:te})}}else ne&&Z.audio&&this.observer.trigger(f.default.INIT_PTS_FOUND,{initPTS:te});Object.keys(Z).length?(M.trigger(f.default.FRAG_PARSING_INIT_SEGMENT,q),this.ISGenerated=!0,ne&&(this._initPTS=te,this._initDTS=ue)):M.trigger(f.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},K.remuxVideo=function(x,R,I,M){var U=x.timescale,j=x.samples,W=[],J=j.length,Z=this._initPTS,q=8,ne,te,ue,re,ve,de=Number.POSITIVE_INFINITY,Se=Number.NEGATIVE_INFINITY,Fe=0,Te=!1,He=this.nextAvcDts;if(J!==0){if(!I){var Pe=R*U,Re=j[0].pts-Rt(j[0].dts,j[0].pts);He=Pe-Re}for(var Me=0;Me<J;Me++){var Ke=j[Me];Ke.pts=Rt(Ke.pts-Z,He),Ke.dts=Rt(Ke.dts-Z,He),Ke.dts>Ke.pts&&(Fe=Math.max(Math.min(Fe,Ke.pts-Ke.dts),-1*Gt)),Ke.dts<j[Me>0?Me-1:Me].dts&&(Te=!0)}Te&&j.sort(function(Un,wi){var ro=Un.dts-wi.dts,no=Un.pts-wi.pts;return ro||no||Un.id-wi.id}),re=j[0].dts,ve=j[J-1].dts;var xt=Math.round((ve-re)/(J-1));if(Fe<0){if(Fe<xt*-2){g.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+De(-xt,!0)+" ms");for(var ut=Fe,We=0;We<J;We++)j[We].dts=ut=Math.max(ut,j[We].pts-xt),j[We].pts=Math.max(ut,j[We].pts)}else{g.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+De(Fe,!0)+" ms to overcome this issue");for(var kt=0;kt<J;kt++)j[kt].dts=j[kt].dts+Fe}re=j[0].dts,ve=j[J-1].dts}if(I){var ft=re-He,Pt=ft>xt,it=ft<-1;if(Pt||it){Pt?g.logger.warn("AVC: "+De(ft,!0)+" ms ("+ft+"dts) hole between fragments detected, filling it"):g.logger.warn("AVC: "+De(-ft,!0)+" ms ("+ft+"dts) overlapping between fragments detected"),re=He;var Ye=j[0].pts-ft;j[0].dts=re,j[0].pts=Ye,g.logger.log("Video: First PTS/DTS adjusted: "+De(Ye,!0)+"/"+De(re,!0)+", delta: "+De(ft,!0)+" ms")}}wr&&wr<75&&(re=Math.max(0,re));for(var cr=0,dr=0,Kt=0;Kt<J;Kt++){for(var Et=j[Kt],nr=Et.units,hr=nr.length,Ar=0,yn=0;yn<hr;yn++)Ar+=nr[yn].data.length;dr+=Ar,cr+=hr,Et.length=Ar,Et.dts=Math.max(Et.dts,re),Et.pts=Math.max(Et.pts,Et.dts,0),de=Math.min(Et.pts,de),Se=Math.max(Et.pts,Se)}ve=j[J-1].dts;var Rr=dr+4*cr+8;try{te=new Uint8Array(Rr)}catch{this.observer.trigger(f.default.ERROR,{type:p.ErrorTypes.MUX_ERROR,details:p.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Rr,reason:"fail allocating video mdat "+Rr});return}var xn=new DataView(te.buffer);xn.setUint32(0,Rr),te.set(Le.types.mdat,4);for(var $=0;$<J;$++){for(var Ft=j[$],Yr=Ft.units,En=0,pr=void 0,Si=0,eo=Yr.length;Si<eo;Si++){var Ea=Yr[Si],Sa=Ea.data,Ti=Ea.data.byteLength;xn.setUint32(q,Ti),q+=4,te.set(Sa,q),q+=Ti,En+=4+Ti}if($<J-1)ne=j[$+1].dts-Ft.dts;else{var Ta=this.config,Sn=Ft.dts-j[$>0?$-1:$].dts;if(Ta.stretchShortVideoTrack){var to=Ta.maxBufferHole,_i=Math.floor(to*U),Bn=(M?de+M*U:this.nextAudioPts)-Ft.pts;Bn>_i?(ne=Bn-Sn,ne<0&&(ne=Sn),g.logger.log("It is approximately "+De(Bn,!1)+" ms to the next segment; using duration "+De(ne,!1)+" ms for the last video frame.")):ne=Sn}else ne=Sn}pr=Math.round(Ft.pts-Ft.dts),W.push({size:En,duration:ne,cts:pr,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:Ft.key?2:1,isNonSync:Ft.key?0:1}})}this.nextAvcDts=ve+ne;var Tn=x.dropped;if(x.nbNalu=0,x.dropped=0,W.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var _a=W[0].flags;_a.dependsOn=2,_a.isNonSync=0}x.samples=W,ue=Le.moof(x.sequenceNumber++,re,x),x.samples=[];var wa={data1:ue,data2:te,startPTS:de/U,endPTS:(Se+ne)/U,startDTS:re/U,endDTS:this.nextAvcDts/U,type:"video",hasAudio:!1,hasVideo:!0,nb:W.length,dropped:Tn};return this.observer.trigger(f.default.FRAG_PARSING_DATA,wa),wa}},K.remuxAudio=function(x,R,I,M){var U=x.inputTimeScale,j=x.timescale,W=U/j,J=x.isAAC?1024:1152,Z=J*W,q=this._initPTS,ne=!x.isAAC&&this.typeSupported.mpeg,te,ue,re,ve,de,Se,Fe=ne?0:8,Te=x.samples,He=[],Pe=this.nextAudioPts;if(I|=Te.length&&Pe&&(M&&Math.abs(R-Pe/U)<.1||Math.abs(Te[0].pts-Pe-q)<20*Z),Te.forEach(function(pr){pr.pts=pr.dts=Rt(pr.pts-q,R*U)}),Te=Te.filter(function(pr){return pr.pts>=0}),Te.length!==0){if(I||(M?Pe=Math.max(0,R*U):Pe=Te[0].pts),x.isAAC)for(var Re=this.config.maxAudioFramesDrift,Me=0,Ke=Pe;Me<Te.length;){var xt=Te[Me],ut=xt.pts,We=ut-Ke;if(We<=-Re*Z)I||Me>0?(g.logger.warn("Dropping 1 audio frame @ "+De(Ke,!0)/1e3+"s due to "+De(We,!0)+" ms overlap."),Te.splice(Me,1)):(g.logger.warn("Audio frame @ "+De(ut,!0)/1e3+"s overlaps nextAudioPts by "+De(We,!0)+" ms."),Ke=ut+Z,Me++);else if(We>=Re*Z&&We<Ot&&Ke){var kt=Math.round(We/Z);g.logger.warn("Injecting "+kt+" audio frames @ "+De(Ke,!0)/1e3+"s due to "+De(We,!0)+" ms gap.");for(var ft=0;ft<kt;ft++){var Pt=Math.max(Ke,0);ue=we.getSilentFrame(x.manifestCodec||x.codec,x.channelCount),ue||(g.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ue=xt.unit.subarray()),Te.splice(Me,0,{unit:ue,pts:Pt,dts:Pt}),Ke+=Z,Me++}xt.pts=xt.dts=Ke,Ke+=Z,Me++}else xt.pts=xt.dts=Ke,Ke+=Z,Me++}for(var it=Te.length,Ye=0;it--;)Ye+=Te[it].unit.byteLength;for(var cr=0,dr=Te.length;cr<dr;cr++){var Kt=Te[cr],Et=Kt.unit,nr=Kt.pts;if(Se!==void 0&&te)te.duration=Math.round((nr-Se)/W);else{var hr=nr-Pe,Ar=0;if(I&&x.isAAC&&hr){if(hr>0&&hr<Ot)Ar=Math.round((nr-Pe)/Z),g.logger.log(De(hr,!0)+" ms hole between AAC samples detected,filling it"),Ar>0&&(ue=we.getSilentFrame(x.manifestCodec||x.codec,x.channelCount),ue||(ue=Et.subarray()),Ye+=Ar*ue.length);else if(hr<-12){g.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+De(Pe,!0)+" ms / "+De(nr,!0)+" ms / "+De(-hr,!0)+" ms"),Ye-=Et.byteLength;continue}nr=Pe}if(de=nr,Ye>0){Ye+=Fe;try{re=new Uint8Array(Ye)}catch{this.observer.trigger(f.default.ERROR,{type:p.ErrorTypes.MUX_ERROR,details:p.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Ye,reason:"fail allocating audio mdat "+Ye});return}if(!ne){var yn=new DataView(re.buffer);yn.setUint32(0,Ye),re.set(Le.types.mdat,4)}}else return;for(var Rr=0;Rr<Ar;Rr++)ue=we.getSilentFrame(x.manifestCodec||x.codec,x.channelCount),ue||(g.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),ue=Et.subarray()),re.set(ue,Fe),Fe+=ue.byteLength,te={size:ue.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},He.push(te)}re.set(Et,Fe);var xn=Et.byteLength;Fe+=xn,te={size:xn,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},He.push(te),Se=nr}var $=0;if(it=He.length,it>=2&&($=He[it-2].duration,te.duration=$),it){this.nextAudioPts=Pe=Se+W*$,x.samples=He,ne?ve=new Uint8Array:ve=Le.moof(x.sequenceNumber++,de/W,x),x.samples=[];var Ft=de/U,Yr=Pe/U,En={data1:ve,data2:re,startPTS:Ft,endPTS:Yr,startDTS:Ft,endDTS:Yr,type:"audio",hasAudio:!0,hasVideo:!1,nb:it};return this.observer.trigger(f.default.FRAG_PARSING_DATA,En),En}return null}},K.remuxEmptyAudio=function(x,R,I,M){var U=x.inputTimeScale,j=x.samplerate?x.samplerate:U,W=U/j,J=this.nextAudioPts,Z=(J!==void 0?J:M.startDTS*U)+this._initDTS,q=M.endDTS*U+this._initDTS,ne=1024,te=W*ne,ue=Math.ceil((q-Z)/te),re=we.getSilentFrame(x.manifestCodec||x.codec,x.channelCount);if(g.logger.warn("remux empty Audio"),!re){g.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");return}for(var ve=[],de=0;de<ue;de++){var Se=Z+de*te;ve.push({unit:re,pts:Se,dts:Se})}x.samples=ve,this.remuxAudio(x,R,I)},K.remuxID3=function(x,R){var I=x.samples.length;if(I){for(var M=x.inputTimeScale,U=this._initPTS,j=this._initDTS,W=0;W<I;W++){var J=x.samples[W];J.pts=Rt(J.pts-U,R*M)/M,J.dts=Rt(J.dts-j,R*M)/M}this.observer.trigger(f.default.FRAG_PARSING_METADATA,{samples:x.samples}),x.samples=[]}},K.remuxText=function(x,R){var I=x.samples.length,M=x.inputTimeScale,U=this._initPTS;if(I){for(var j=0;j<I;j++){var W=x.samples[j];W.pts=Rt(W.pts-U,R*M)/M}x.samples.sort(function(J,Z){return J.pts-Z.pts}),this.observer.trigger(f.default.FRAG_PARSING_USERDATA,{samples:x.samples})}x.samples=[]},N}();function Rt(N,K){var O;if(K===void 0)return N;for(K<N?O=-8589934592:O=8589934592;Math.abs(N-K)>4294967296;)N+=O;return N}var Fr=vn,yt=function(){function N(O){this.observer=O}var K=N.prototype;return K.destroy=function(){},K.resetTimeStamp=function(){},K.resetInitSegment=function(){},K.remux=function(x,R,I,M,U,j,W,J){var Z=this.observer,q="";x&&(q+="audio"),R&&(q+="video"),Z.trigger(f.default.FRAG_PARSING_DATA,{data1:J,startPTS:U,startDTS:U,type:q,hasAudio:!!x,hasVideo:!!R,nb:1,dropped:0}),Z.trigger(f.default.FRAG_PARSED)},N}(),mn=yt,jt=Object(E.getSelfScope)(),ht;try{ht=jt.performance.now.bind(jt.performance)}catch{g.logger.debug("Unable to use Performance API on this environment"),ht=jt.Date.now}var Zs=function(){function N(O,x,R,I){this.observer=O,this.typeSupported=x,this.config=R,this.vendor=I}var K=N.prototype;return K.destroy=function(){var x=this.demuxer;x&&x.destroy()},K.push=function(x,R,I,M,U,j,W,J,Z,q,ne,te){var ue=this;if(x.byteLength>0&&R!=null&&R.key!=null&&R.method==="AES-128"){var re=this.decrypter;re==null&&(re=this.decrypter=new m.default(this.observer,this.config));var ve=ht();re.decrypt(x,R.key.buffer,R.iv.buffer,function(de){var Se=ht();ue.observer.trigger(f.default.FRAG_DECRYPTED,{stats:{tstart:ve,tdecrypt:Se}}),ue.pushDecrypted(new Uint8Array(de),R,new Uint8Array(I),M,U,j,W,J,Z,q,ne,te)})}else this.pushDecrypted(new Uint8Array(x),R,new Uint8Array(I),M,U,j,W,J,Z,q,ne,te)},K.pushDecrypted=function(x,R,I,M,U,j,W,J,Z,q,ne,te){var ue=this.demuxer,re=this.remuxer;if(!ue||W||J){for(var ve=this.observer,de=this.typeSupported,Se=this.config,Fe=[{demux:ze,remux:Fr},{demux:Q.default,remux:mn},{demux:X,remux:Fr},{demux:pe,remux:Fr}],Te,He=0,Pe=Fe.length;He<Pe&&(Te=Fe[He],!Te.demux.probe(x));He++);if(!Te){ve.trigger(f.default.ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});return}(!re||!(re instanceof Te.remux))&&(re=new Te.remux(ve,Se,de,this.vendor)),(!ue||!(ue instanceof Te.demux))&&(ue=new Te.demux(ve,re,Se,de),this.probe=Te.demux.probe),this.demuxer=ue,this.remuxer=re}(W||J)&&(ue.resetInitSegment(I,M,U,q),re.resetInitSegment()),W&&(ue.resetTimeStamp(te),re.resetTimeStamp(te)),typeof ue.setDecryptData=="function"&&ue.setDecryptData(R),ue.append(x,j,Z,ne)},N}();i.default=Zs},"./src/demux/demuxer-worker.js":function(r,i,o){o.r(i);var f=o("./src/demux/demuxer-inline.js"),p=o("./src/events.js"),m=o("./src/utils/logger.js"),w=o("./node_modules/eventemitter3/index.js"),g=function(B){var T=new w.EventEmitter;T.trigger=function(C){for(var z=arguments.length,A=new Array(z>1?z-1:0),_=1;_<z;_++)A[_-1]=arguments[_];T.emit.apply(T,[C,C].concat(A))},T.off=function(C){for(var z=arguments.length,A=new Array(z>1?z-1:0),_=1;_<z;_++)A[_-1]=arguments[_];T.removeListener.apply(T,[C].concat(A))};var D=function(C,z){B.postMessage({event:C,data:z})};B.addEventListener("message",function(P){var C=P.data;switch(C.cmd){case"init":var z=JSON.parse(C.config);B.demuxer=new f.default(T,C.typeSupported,z,C.vendor),Object(m.enableLogs)(z.debug),D("init",null);break;case"demux":B.demuxer.push(C.data,C.decryptdata,C.initSegment,C.audioCodec,C.videoCodec,C.timeOffset,C.discontinuity,C.trackSwitch,C.contiguous,C.duration,C.accurateTimeOffset,C.defaultInitPTS);break}}),T.on(p.default.FRAG_DECRYPTED,D),T.on(p.default.FRAG_PARSING_INIT_SEGMENT,D),T.on(p.default.FRAG_PARSED,D),T.on(p.default.ERROR,D),T.on(p.default.FRAG_PARSING_METADATA,D),T.on(p.default.FRAG_PARSING_USERDATA,D),T.on(p.default.INIT_PTS_FOUND,D),T.on(p.default.FRAG_PARSING_DATA,function(P,C){var z=[],A={event:P,data:C};C.data1&&(A.data1=C.data1.buffer,z.push(C.data1.buffer),delete C.data1),C.data2&&(A.data2=C.data2.buffer,z.push(C.data2.buffer),delete C.data2),B.postMessage(A,z)})};i.default=g},"./src/demux/id3.js":function(r,i,o){o.r(i),o.d(i,"utf8ArrayToStr",function(){return g});var f=o("./src/utils/get-self-scope.js"),p=function(){function E(){}return E.isHeader=function(T,D){return D+10<=T.length&&T[D]===73&&T[D+1]===68&&T[D+2]===51&&T[D+3]<255&&T[D+4]<255&&T[D+6]<128&&T[D+7]<128&&T[D+8]<128&&T[D+9]<128},E.isFooter=function(T,D){return D+10<=T.length&&T[D]===51&&T[D+1]===68&&T[D+2]===73&&T[D+3]<255&&T[D+4]<255&&T[D+6]<128&&T[D+7]<128&&T[D+8]<128&&T[D+9]<128},E.getID3Data=function(T,D){for(var P=D,C=0;E.isHeader(T,D);){C+=10;var z=E._readSize(T,D+6);C+=z,E.isFooter(T,D+10)&&(C+=10),D+=C}if(C>0)return T.subarray(P,P+C)},E._readSize=function(T,D){var P=0;return P=(T[D]&127)<<21,P|=(T[D+1]&127)<<14,P|=(T[D+2]&127)<<7,P|=T[D+3]&127,P},E.getTimeStamp=function(T){for(var D=E.getID3Frames(T),P=0;P<D.length;P++){var C=D[P];if(E.isTimeStampFrame(C))return E._readTimeStamp(C)}},E.isTimeStampFrame=function(T){return T&&T.key==="PRIV"&&T.info==="com.apple.streaming.transportStreamTimestamp"},E._getFrameData=function(T){var D=String.fromCharCode(T[0],T[1],T[2],T[3]),P=E._readSize(T,4),C=10;return{type:D,size:P,data:T.subarray(C,C+P)}},E.getID3Frames=function(T){for(var D=0,P=[];E.isHeader(T,D);){var C=E._readSize(T,D+6);D+=10;for(var z=D+C;D+8<z;){var A=E._getFrameData(T.subarray(D)),_=E._decodeFrame(A);_&&P.push(_),D+=A.size+10}E.isFooter(T,D)&&(D+=10)}return P},E._decodeFrame=function(T){return T.type==="PRIV"?E._decodePrivFrame(T):T.type[0]==="W"?E._decodeURLFrame(T):E._decodeTextFrame(T)},E._readTimeStamp=function(T){if(T.data.byteLength===8){var D=new Uint8Array(T.data),P=D[3]&1,C=(D[4]<<23)+(D[5]<<15)+(D[6]<<7)+D[7];return C/=45,P&&(C+=4772185884e-2),Math.round(C)}},E._decodePrivFrame=function(T){if(!(T.size<2)){var D=E._utf8ArrayToStr(T.data,!0),P=new Uint8Array(T.data.subarray(D.length+1));return{key:T.type,info:D,data:P.buffer}}},E._decodeTextFrame=function(T){if(!(T.size<2))if(T.type==="TXXX"){var D=1,P=E._utf8ArrayToStr(T.data.subarray(D),!0);D+=P.length+1;var C=E._utf8ArrayToStr(T.data.subarray(D));return{key:T.type,info:P,data:C}}else{var z=E._utf8ArrayToStr(T.data.subarray(1));return{key:T.type,data:z}}},E._decodeURLFrame=function(T){if(T.type==="WXXX"){if(T.size<2)return;var D=1,P=E._utf8ArrayToStr(T.data.subarray(D),!0);D+=P.length+1;var C=E._utf8ArrayToStr(T.data.subarray(D));return{key:T.type,info:P,data:C}}else{var z=E._utf8ArrayToStr(T.data);return{key:T.type,data:z}}},E._utf8ArrayToStr=function(T,D){D===void 0&&(D=!1);var P=w();if(P){var C=P.decode(T);if(D){var z=C.indexOf("\0");return z!==-1?C.substring(0,z):C}return C.replace(/\0/g,"")}for(var A=T.length,_,F,b,V="",Y=0;Y<A;){if(_=T[Y++],_===0&&D)return V;if(_===0||_===3)continue;switch(_>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:V+=String.fromCharCode(_);break;case 12:case 13:F=T[Y++],V+=String.fromCharCode((_&31)<<6|F&63);break;case 14:F=T[Y++],b=T[Y++],V+=String.fromCharCode((_&15)<<12|(F&63)<<6|(b&63)<<0);break}}return V},E}(),m;function w(){var E=Object(f.getSelfScope)();return!m&&typeof E.TextDecoder<"u"&&(m=new E.TextDecoder("utf-8")),m}var g=p._utf8ArrayToStr;i.default=p},"./src/demux/mp4demuxer.js":function(r,i,o){o.r(i);var f=o("./src/utils/logger.js"),p=o("./src/events.js"),m=Math.pow(2,32)-1,w=function(){function g(B,T){this.observer=B,this.remuxer=T}var E=g.prototype;return E.resetTimeStamp=function(T){this.initPTS=T},E.resetInitSegment=function(T,D,P,C){if(T&&T.byteLength){var z=this.initData=g.parseInitSegment(T);D==null&&(D="mp4a.40.5"),P==null&&(P="avc1.42e01e");var A={};z.audio&&z.video?A.audiovideo={container:"video/mp4",codec:D+","+P,initSegment:C?T:null}:(z.audio&&(A.audio={container:"audio/mp4",codec:D,initSegment:C?T:null}),z.video&&(A.video={container:"video/mp4",codec:P,initSegment:C?T:null})),this.observer.trigger(p.default.FRAG_PARSING_INIT_SEGMENT,{tracks:A})}else D&&(this.audioCodec=D),P&&(this.videoCodec=P)},g.probe=function(T){return g.findBox({data:T,start:0,end:Math.min(T.length,16384)},["moof"]).length>0},g.bin2str=function(T){return String.fromCharCode.apply(null,T)},g.readUint16=function(T,D){T.data&&(D+=T.start,T=T.data);var P=T[D]<<8|T[D+1];return P<0?65536+P:P},g.readUint32=function(T,D){T.data&&(D+=T.start,T=T.data);var P=T[D]<<24|T[D+1]<<16|T[D+2]<<8|T[D+3];return P<0?4294967296+P:P},g.writeUint32=function(T,D,P){T.data&&(D+=T.start,T=T.data),T[D]=P>>24,T[D+1]=P>>16&255,T[D+2]=P>>8&255,T[D+3]=P&255},g.findBox=function(T,D){var P=[],C,z,A,_,F,b,V;if(T.data?(b=T.start,_=T.end,T=T.data):(b=0,_=T.byteLength),!D.length)return null;for(C=b;C<_;)z=g.readUint32(T,C),A=g.bin2str(T.subarray(C+4,C+8)),V=z>1?C+z:_,A===D[0]&&(D.length===1?P.push({data:T,start:C+8,end:V}):(F=g.findBox({data:T,start:C+8,end:V},D.slice(1)),F.length&&(P=P.concat(F)))),C=V;return P},g.parseSegmentIndex=function(T){var D=g.findBox(T,["moov"])[0],P=D?D.end:null,C=0,z=g.findBox(T,["sidx"]),A;if(!z||!z[0])return null;A=[],z=z[0];var _=z.data[0];C=_===0?8:16;var F=g.readUint32(z,C);C+=4;var b=0,V=0;_===0?C+=8:C+=16,C+=2;var Y=z.end+V,X=g.readUint16(z,C);C+=2;for(var Q=0;Q<X;Q++){var se=C,oe=g.readUint32(z,se);se+=4;var _e=oe&2147483647,Be=(oe&2147483648)>>>31;if(Be===1){console.warn("SIDX has hierarchical references (not supported)");return}var je=g.readUint32(z,se);se+=4,A.push({referenceSize:_e,subsegmentDuration:je,info:{duration:je/F,start:Y,end:Y+_e-1}}),Y+=_e,se+=4,C=se}return{earliestPresentationTime:b,timescale:F,version:_,referencesCount:X,references:A,moovEndOffset:P}},g.parseInitSegment=function(T){var D=[],P=g.findBox(T,["moov","trak"]);return P.forEach(function(C){var z=g.findBox(C,["tkhd"])[0];if(z){var A=z.data[z.start],_=A===0?12:20,F=g.readUint32(z,_),b=g.findBox(C,["mdia","mdhd"])[0];if(b){A=b.data[b.start],_=A===0?12:20;var V=g.readUint32(b,_),Y=g.findBox(C,["mdia","hdlr"])[0];if(Y){var X=g.bin2str(Y.data.subarray(Y.start+8,Y.start+12)),Q={soun:"audio",vide:"video"}[X];if(Q){var se=g.findBox(C,["mdia","minf","stbl","stsd"]);if(se.length){se=se[0];var oe=g.bin2str(se.data.subarray(se.start+12,se.start+16));f.logger.log("MP4Demuxer:"+Q+":"+oe+" found")}D[F]={timescale:V,type:Q},D[Q]={timescale:V,id:F}}}}}}),D},g.getStartDTS=function(T,D){var P,C,z;return P=g.findBox(D,["moof","traf"]),C=[].concat.apply([],P.map(function(A){return g.findBox(A,["tfhd"]).map(function(_){var F,b,V;return F=g.readUint32(_,4),b=T[F].timescale||9e4,V=g.findBox(A,["tfdt"]).map(function(Y){var X,Q;return X=Y.data[Y.start],Q=g.readUint32(Y,4),X===1&&(Q*=Math.pow(2,32),Q+=g.readUint32(Y,8)),Q})[0],V/b})})),z=Math.min.apply(null,C),isFinite(z)?z:0},g.offsetStartDTS=function(T,D,P){g.findBox(D,["moof","traf"]).map(function(C){return g.findBox(C,["tfhd"]).map(function(z){var A=g.readUint32(z,4),_=T[A].timescale||9e4;g.findBox(C,["tfdt"]).map(function(F){var b=F.data[F.start],V=g.readUint32(F,4);if(b===0)g.writeUint32(F,4,V-P*_);else{V*=Math.pow(2,32),V+=g.readUint32(F,8),V-=P*_,V=Math.max(V,0);var Y=Math.floor(V/(m+1)),X=Math.floor(V%(m+1));g.writeUint32(F,4,Y),g.writeUint32(F,8,X)}})})})},E.append=function(T,D,P,C){var z=this.initData;z||(this.resetInitSegment(T,this.audioCodec,this.videoCodec,!1),z=this.initData);var A,_=this.initPTS;if(_===void 0){var F=g.getStartDTS(z,T);this.initPTS=_=F-D,this.observer.trigger(p.default.INIT_PTS_FOUND,{initPTS:_})}g.offsetStartDTS(z,T,_),A=g.getStartDTS(z,T),this.remuxer.remux(z.audio,z.video,null,null,A,P,C,T)},E.destroy=function(){},g}();i.default=w},"./src/errors.ts":function(r,i,o){o.r(i),o.d(i,"ErrorTypes",function(){return f}),o.d(i,"ErrorDetails",function(){return p});var f;(function(m){m.NETWORK_ERROR="networkError",m.MEDIA_ERROR="mediaError",m.KEY_SYSTEM_ERROR="keySystemError",m.MUX_ERROR="muxError",m.OTHER_ERROR="otherError"})(f||(f={}));var p;(function(m){m.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",m.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",m.KEY_SYSTEM_NO_SESSION="keySystemNoSession",m.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",m.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",m.MANIFEST_LOAD_ERROR="manifestLoadError",m.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",m.MANIFEST_PARSING_ERROR="manifestParsingError",m.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",m.LEVEL_EMPTY_ERROR="levelEmptyError",m.LEVEL_LOAD_ERROR="levelLoadError",m.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",m.LEVEL_SWITCH_ERROR="levelSwitchError",m.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",m.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",m.FRAG_LOAD_ERROR="fragLoadError",m.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",m.FRAG_DECRYPT_ERROR="fragDecryptError",m.FRAG_PARSING_ERROR="fragParsingError",m.REMUX_ALLOC_ERROR="remuxAllocError",m.KEY_LOAD_ERROR="keyLoadError",m.KEY_LOAD_TIMEOUT="keyLoadTimeOut",m.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",m.BUFFER_APPEND_ERROR="bufferAppendError",m.BUFFER_APPENDING_ERROR="bufferAppendingError",m.BUFFER_STALLED_ERROR="bufferStalledError",m.BUFFER_FULL_ERROR="bufferFullError",m.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",m.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",m.INTERNAL_EXCEPTION="internalException"})(p||(p={}))},"./src/events.js":function(r,i,o){o.r(i);var f={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVELS_UPDATED:"hlsLevelsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",CUES_PARSED:"hlsCuesParsed",NON_NATIVE_TEXT_TRACKS_FOUND:"hlsNonNativeTextTracksFound",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"};i.default=f},"./src/hls.ts":function(r,i,o){o.r(i),o.d(i,"default",function(){return vf});var f={};o.r(f),o.d(f,"newCue",function(){return $p});var p=o("./node_modules/url-toolkit/src/url-toolkit.js"),m=o("./src/errors.ts"),w=o("./src/polyfills/number.js"),g=o("./src/events.js"),E=o("./src/utils/logger.js"),B={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},T=function(){function h(l){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=l,this.onEvent=this.onEvent.bind(this);for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var c=h.prototype;return c.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},c.onHandlerDestroying=function(){},c.onHandlerDestroyed=function(){},c.isEventHandler=function(){return typeof this.handledEvents=="object"&&this.handledEvents.length&&typeof this.onEvent=="function"},c.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(s){if(B[s])throw new Error("Forbidden event-name: "+s);this.hls.on(s,this.onEvent)},this)},c.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(s){this.hls.off(s,this.onEvent)},this)},c.onEvent=function(s,n){this.onEventGeneric(s,n)},c.onEventGeneric=function(s,n){var a=function(d,v){var y="on"+d.replace("hls","");if(typeof this[y]!="function")throw new Error("Event "+d+" has no generic handler in this "+this.constructor.name+" class (tried "+y+")");return this[y].bind(this,v)};try{a.call(this,s,n).call()}catch(u){E.logger.error("An internal error happened while handling event "+s+'. Error message: "'+u.message+'". Here is a stacktrace:',u),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:s,err:u})}},h}(),D=T,P;(function(h){h.MANIFEST="manifest",h.LEVEL="level",h.AUDIO_TRACK="audioTrack",h.SUBTITLE_TRACK="subtitleTrack"})(P||(P={}));var C;(function(h){h.MAIN="main",h.AUDIO="audio",h.SUBTITLE="subtitle"})(C||(C={}));var z=o("./src/demux/mp4demuxer.js");function A(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function _(h,c,l){return c&&A(h.prototype,c),l&&A(h,l),h}var F=function(){function h(c,l){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=c,this.reluri=l}return _(h,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(p.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),h}();function b(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function V(h,c,l){return c&&b(h.prototype,c),l&&b(h,l),h}var Y;(function(h){h.AUDIO="audio",h.VIDEO="video"})(Y||(Y={}));var X=function(){function h(){var l;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=(l={},l[Y.AUDIO]=!1,l[Y.VIDEO]=!1,l),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var c=h.prototype;return c.setByteRange=function(s,n){var a=s.split("@",2),u=[];a.length===1?u[0]=n?n.byteRangeEndOffset:0:u[0]=parseInt(a[1]),u[1]=parseInt(a[0])+u[0],this._byteRange=u},c.addElementaryStream=function(s){this._elementaryStreams[s]=!0},c.hasElementaryStream=function(s){return this._elementaryStreams[s]===!0},c.createInitializationVector=function(s){for(var n=new Uint8Array(16),a=12;a<16;a++)n[a]=s>>8*(15-a)&255;return n},c.setDecryptDataFromLevelKey=function(s,n){var a=s;return s!=null&&s.method&&s.uri&&!s.iv&&(a=new F(s.baseuri,s.reluri),a.method=s.method,a.iv=this.createInitializationVector(n)),a},V(h,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(p.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(s){this._url=s}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var s=this.sn;typeof s!="number"&&(this.levelkey&&this.levelkey.method==="AES-128"&&!this.levelkey.iv&&E.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),s=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,s)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Object(w.isFiniteNumber)(this.programDateTime))return null;var s=Object(w.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+s*1e3}},{key:"encrypted",get:function(){return!!(this.decryptdata&&this.decryptdata.uri!==null&&this.decryptdata.key===null)}}]),h}();function Q(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function se(h,c,l){return c&&Q(h.prototype,c),l&&Q(h,l),h}var oe=function(){function h(c){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=c,this.version=null}return se(h,[{key:"hasProgramDateTime",get:function(){return!!(this.fragments[0]&&Object(w.isFiniteNumber)(this.fragments[0].programDateTime))}}]),h}(),_e=/^(\d+)x(\d+)$/,Be=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,je=function(){function h(l){typeof l=="string"&&(l=h.parseAttrList(l));for(var s in l)l.hasOwnProperty(s)&&(this[s]=l[s])}var c=h.prototype;return c.decimalInteger=function(s){var n=parseInt(this[s],10);return n>Number.MAX_SAFE_INTEGER?1/0:n},c.hexadecimalInteger=function(s){if(this[s]){var n=(this[s]||"0x").slice(2);n=(n.length&1?"0":"")+n;for(var a=new Uint8Array(n.length/2),u=0;u<n.length/2;u++)a[u]=parseInt(n.slice(u*2,u*2+2),16);return a}else return null},c.hexadecimalIntegerAsNumber=function(s){var n=parseInt(this[s],16);return n>Number.MAX_SAFE_INTEGER?1/0:n},c.decimalFloatingPoint=function(s){return parseFloat(this[s])},c.enumeratedString=function(s){return this[s]},c.decimalResolution=function(s){var n=_e.exec(this[s]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}},h.parseAttrList=function(s){var n,a={};for(Be.lastIndex=0;(n=Be.exec(s))!==null;){var u=n[2],d='"';u.indexOf(d)===0&&u.lastIndexOf(d)===u.length-1&&(u=u.slice(1,-1)),a[n[1]]=u}return a},h}(),be=je,Ut={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function Ue(h,c){var l=Ut[c];return!!l&&l[h.slice(0,4)]===!0}function ze(h,c){return MediaSource.isTypeSupported((c||"video")+'/mp4;codecs="'+h+'"')}var le=/(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g,pe=/#EXT-X-MEDIA:(.*)/g,me=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),we=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,ge=/\.(mp4|m4s|m4v|m4a)$/i,nt=function(){function h(){}return h.findGroup=function(l,s){for(var n=0;n<l.length;n++){var a=l[n];if(a.id===s)return a}},h.convertAVC1ToAVCOTI=function(l){var s=l.split("."),n;return s.length>2?(n=s.shift()+".",n+=parseInt(s.shift()).toString(16),n+=("000"+parseInt(s.shift()).toString(16)).substr(-4)):n=l,n},h.resolve=function(l,s){return p.buildAbsoluteURL(s,l,{alwaysNormalize:!0})},h.parseMasterPlaylist=function(l,s){var n=[],a={},u=!1;le.lastIndex=0;function d(G,H){["video","audio"].forEach(function(ee){var ae=G.filter(function(fe){return Ue(fe,ee)});if(ae.length){var he=ae.filter(function(fe){return fe.lastIndexOf("avc1",0)===0||fe.lastIndexOf("mp4a",0)===0});H[ee+"Codec"]=he.length>0?he[0]:ae[0],G=G.filter(function(fe){return ae.indexOf(fe)===-1})}}),H.unknownCodecs=G}for(var v;(v=le.exec(l))!=null;)if(v[1]){var y={},S=y.attrs=new be(v[1]);y.url=h.resolve(v[2],s);var k=S.decimalResolution("RESOLUTION");k&&(y.width=k.width,y.height=k.height),y.bitrate=S.decimalInteger("AVERAGE-BANDWIDTH")||S.decimalInteger("BANDWIDTH"),y.name=S.NAME,d([].concat((S.CODECS||"").split(/[ ,]+/)),y),y.videoCodec&&y.videoCodec.indexOf("avc1")!==-1&&(y.videoCodec=h.convertAVC1ToAVCOTI(y.videoCodec)),n.push(y)}else if(v[3]){var L=new be(v[3]);L["DATA-ID"]&&(u=!0,a[L["DATA-ID"]]=L)}return{levels:n,sessionData:u?a:null}},h.parseMasterPlaylistMedia=function(l,s,n,a){a===void 0&&(a=[]);var u,d=[],v=0;for(pe.lastIndex=0;(u=pe.exec(l))!==null;){var y=new be(u[1]);if(y.TYPE===n){var S={attrs:y,id:v++,groupId:y["GROUP-ID"],instreamId:y["INSTREAM-ID"],name:y.NAME||y.LANGUAGE,type:n,default:y.DEFAULT==="YES",autoselect:y.AUTOSELECT==="YES",forced:y.FORCED==="YES",lang:y.LANGUAGE};if(y.URI&&(S.url=h.resolve(y.URI,s)),a.length){var k=h.findGroup(a,S.groupId);S.audioCodec=k?k.codec:a[0].codec}d.push(S)}}return d},h.parseLevelPlaylist=function(l,s,n,a,u){var d=0,v=0,y=new oe(s),S=0,k=null,L=new X,G,H,ee,ae=null;for(me.lastIndex=0;(G=me.exec(l))!==null;){var he=G[1];if(he){L.duration=parseFloat(he);var fe=(" "+G[2]).slice(1);L.title=fe||null,L.tagList.push(fe?["INF",he,fe]:["INF",he])}else if(G[3]){if(Object(w.isFiniteNumber)(L.duration)){var xe=d++;L.type=a,L.start=v,ee&&(L.levelkey=ee),L.sn=xe,L.level=n,L.cc=S,L.urlId=u,L.baseurl=s,L.relurl=(" "+G[3]).slice(1),Xt(L,k),y.fragments.push(L),k=L,v+=L.duration,L=new X}}else if(G[4]){var Ee=(" "+G[4]).slice(1);k?L.setByteRange(Ee,k):L.setByteRange(Ee)}else if(G[5])L.rawProgramDateTime=(" "+G[5]).slice(1),L.tagList.push(["PROGRAM-DATE-TIME",L.rawProgramDateTime]),ae===null&&(ae=y.fragments.length);else{if(G=G[0].match(we),!G){E.logger.warn("No matches on slow regex match for level playlist!");continue}for(H=1;H<G.length&&!(typeof G[H]<"u");H++);var Ce=(" "+G[H+1]).slice(1),et=(" "+G[H+2]).slice(1);switch(G[H]){case"#":L.tagList.push(et?[Ce,et]:[Ce]);break;case"PLAYLIST-TYPE":y.type=Ce.toUpperCase();break;case"MEDIA-SEQUENCE":d=y.startSN=parseInt(Ce);break;case"TARGETDURATION":y.targetduration=parseFloat(Ce);break;case"VERSION":y.version=parseInt(Ce);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"DIS":S++,L.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":S=parseInt(Ce);break;case"KEY":{var $t=Ce,St=new be($t),Mr=St.enumeratedString("METHOD"),ye=St.URI,Ae=St.hexadecimalInteger("IV"),at=St.KEYFORMAT||"identity";if(at==="com.apple.streamingkeydelivery"){E.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");continue}Mr&&(ee=new F(s,ye),ye&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(Mr)>=0&&(ee.method=Mr,ee.key=null,ee.iv=Ae));break}case"START":{var Kn=new be(Ce),zn=Kn.decimalFloatingPoint("TIME-OFFSET");Object(w.isFiniteNumber)(zn)&&(y.startTimeOffset=zn);break}case"MAP":{var Ri=new be(Ce);L.relurl=Ri.URI,Ri.BYTERANGE&&L.setByteRange(Ri.BYTERANGE),L.baseurl=s,L.level=n,L.type=a,L.sn="initSegment",y.initSegment=L,L=new X,L.rawProgramDateTime=y.initSegment.rawProgramDateTime;break}default:E.logger.warn("line parsed but not handled: "+G);break}}}return L=k,L&&!L.relurl&&(y.fragments.pop(),v-=L.duration),y.totalduration=v,y.averagetargetduration=v/y.fragments.length,y.endSN=d-1,y.startCC=y.fragments[0]?y.fragments[0].cc:0,y.endCC=S,!y.initSegment&&y.fragments.length&&y.fragments.every(function(La){return ge.test(La.relurl)})&&(E.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),L=new X,L.relurl=y.fragments[0].relurl,L.baseurl=s,L.level=n,L.type=a,L.sn="initSegment",y.initSegment=L,y.needSidxRanges=!0),ae&&Le(y.fragments,ae),y},h}();function Le(h,c){for(var l=h[c],s=c-1;s>=0;s--){var n=h[s];n.programDateTime=l.programDateTime-n.duration*1e3,l=n}}function Xt(h,c){h.rawProgramDateTime?h.programDateTime=Date.parse(h.rawProgramDateTime):c!=null&&c.programDateTime&&(h.programDateTime=c.endProgramDateTime),Object(w.isFiniteNumber)(h.programDateTime)||(h.programDateTime=null,h.rawProgramDateTime=null)}function mt(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var De=window,At=De.performance,Ot=function(h){mt(c,h);function c(s){var n;return n=h.call(this,s,g.default.MANIFEST_LOADING,g.default.LEVEL_LOADING,g.default.AUDIO_TRACK_LOADING,g.default.SUBTITLE_TRACK_LOADING)||this,n.loaders={},n}c.canHaveQualityLevels=function(n){return n!==P.AUDIO_TRACK&&n!==P.SUBTITLE_TRACK},c.mapContextToLevelType=function(n){var a=n.type;switch(a){case P.AUDIO_TRACK:return C.AUDIO;case P.SUBTITLE_TRACK:return C.SUBTITLE;default:return C.MAIN}},c.getResponseUrl=function(n,a){var u=n.url;return(u===void 0||u.indexOf("data:")===0)&&(u=a.url),u};var l=c.prototype;return l.createInternalLoader=function(n){var a=this.hls.config,u=a.pLoader,d=a.loader,v=u||d,y=new v(a);return n.loader=y,this.loaders[n.type]=y,y},l.getInternalLoader=function(n){return this.loaders[n.type]},l.resetInternalLoader=function(n){this.loaders[n]&&delete this.loaders[n]},l.destroyInternalLoaders=function(){for(var n in this.loaders){var a=this.loaders[n];a&&a.destroy(),this.resetInternalLoader(n)}},l.destroy=function(){this.destroyInternalLoaders(),h.prototype.destroy.call(this)},l.onManifestLoading=function(n){this.load({url:n.url,type:P.MANIFEST,level:0,id:null,responseType:"text"})},l.onLevelLoading=function(n){this.load({url:n.url,type:P.LEVEL,level:n.level,id:n.id,responseType:"text"})},l.onAudioTrackLoading=function(n){this.load({url:n.url,type:P.AUDIO_TRACK,level:null,id:n.id,responseType:"text"})},l.onSubtitleTrackLoading=function(n){this.load({url:n.url,type:P.SUBTITLE_TRACK,level:null,id:n.id,responseType:"text"})},l.load=function(n){var a=this.hls.config;E.logger.debug("Loading playlist of type "+n.type+", level: "+n.level+", id: "+n.id);var u=this.getInternalLoader(n);if(u){var d=u.context;if(d&&d.url===n.url)return E.logger.trace("playlist request ongoing"),!1;E.logger.warn("aborting previous loader for type: "+n.type),u.abort()}var v,y,S,k;switch(n.type){case P.MANIFEST:v=a.manifestLoadingMaxRetry,y=a.manifestLoadingTimeOut,S=a.manifestLoadingRetryDelay,k=a.manifestLoadingMaxRetryTimeout;break;case P.LEVEL:v=0,k=0,S=0,y=a.levelLoadingTimeOut;break;default:v=a.levelLoadingMaxRetry,y=a.levelLoadingTimeOut,S=a.levelLoadingRetryDelay,k=a.levelLoadingMaxRetryTimeout;break}u=this.createInternalLoader(n);var L={timeout:y,maxRetry:v,retryDelay:S,maxRetryDelay:k},G={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return E.logger.debug("Calling internal loader delegate for URL: "+n.url),u.load(n,L,G),!0},l.loadsuccess=function(n,a,u,d){if(d===void 0&&(d=null),u.isSidxRequest){this._handleSidxRequest(n,u),this._handlePlaylistLoaded(n,a,u,d);return}if(this.resetInternalLoader(u.type),typeof n.data!="string")throw new Error('expected responseType of "text" for PlaylistLoader');var v=n.data;if(a.tload=At.now(),v.indexOf("#EXTM3U")!==0){this._handleManifestParsingError(n,u,"no EXTM3U delimiter",d);return}v.indexOf("#EXTINF:")>0||v.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(n,a,u,d):this._handleMasterPlaylist(n,a,u,d)},l.loaderror=function(n,a,u){u===void 0&&(u=null),this._handleNetworkError(a,u,!1,n)},l.loadtimeout=function(n,a,u){u===void 0&&(u=null),this._handleNetworkError(a,u,!0)},l._handleMasterPlaylist=function(n,a,u,d){var v=this.hls,y=n.data,S=c.getResponseUrl(n,u),k=nt.parseMasterPlaylist(y,S),L=k.levels,G=k.sessionData;if(!L.length){this._handleManifestParsingError(n,u,"no level found in manifest",d);return}var H=L.map(function(xe){return{id:xe.attrs.AUDIO,codec:xe.audioCodec}}),ee=nt.parseMasterPlaylistMedia(y,S,"AUDIO",H),ae=nt.parseMasterPlaylistMedia(y,S,"SUBTITLES"),he=nt.parseMasterPlaylistMedia(y,S,"CLOSED-CAPTIONS");if(ee.length){var fe=!1;ee.forEach(function(xe){xe.url||(fe=!0)}),fe===!1&&L[0].audioCodec&&!L[0].attrs.AUDIO&&(E.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),ee.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:{},url:""}))}v.trigger(g.default.MANIFEST_LOADED,{levels:L,audioTracks:ee,subtitles:ae,captions:he,url:S,stats:a,networkDetails:d,sessionData:G})},l._handleTrackOrLevelPlaylist=function(n,a,u,d){var v=this.hls,y=u.id,S=u.level,k=u.type,L=c.getResponseUrl(n,u),G=Object(w.isFiniteNumber)(y)?y:0,H=Object(w.isFiniteNumber)(S)?S:G,ee=c.mapContextToLevelType(u),ae=nt.parseLevelPlaylist(n.data,L,H,ee,G);if(ae.tload=a.tload,!ae.fragments.length){v.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:L,reason:"no fragments found in level",level:typeof u.level=="number"?u.level:void 0});return}if(k===P.MANIFEST){var he={url:L,details:ae};v.trigger(g.default.MANIFEST_LOADED,{levels:[he],audioTracks:[],url:L,stats:a,networkDetails:d,sessionData:null})}if(a.tparsed=At.now(),ae.needSidxRanges){var fe=ae.initSegment.url;this.load({url:fe,isSidxRequest:!0,type:k,level:S,levelDetails:ae,id:y,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"});return}u.levelDetails=ae,this._handlePlaylistLoaded(n,a,u,d)},l._handleSidxRequest=function(n,a){if(typeof n.data=="string")throw new Error("sidx request must be made with responseType of array buffer");var u=z.default.parseSegmentIndex(new Uint8Array(n.data));if(u){var d=u.references,v=a.levelDetails;d.forEach(function(y,S){var k=y.info;if(v){var L=v.fragments[S];L.byteRange.length===0&&L.setByteRange(String(1+k.end-k.start)+"@"+String(k.start))}}),v&&v.initSegment.setByteRange(String(u.moovEndOffset)+"@0")}},l._handleManifestParsingError=function(n,a,u,d){this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:n.url,reason:u,networkDetails:d})},l._handleNetworkError=function(n,a,u,d){u===void 0&&(u=!1),d===void 0&&(d=null),E.logger.info("A network error occured while loading a "+n.type+"-type playlist");var v,y,S=this.getInternalLoader(n);switch(n.type){case P.MANIFEST:v=u?m.ErrorDetails.MANIFEST_LOAD_TIMEOUT:m.ErrorDetails.MANIFEST_LOAD_ERROR,y=!0;break;case P.LEVEL:v=u?m.ErrorDetails.LEVEL_LOAD_TIMEOUT:m.ErrorDetails.LEVEL_LOAD_ERROR,y=!1;break;case P.AUDIO_TRACK:v=u?m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,y=!1;break;default:y=!1}S&&(S.abort(),this.resetInternalLoader(n.type));var k={type:m.ErrorTypes.NETWORK_ERROR,details:v,fatal:y,url:n.url,loader:S,context:n,networkDetails:a};d&&(k.response=d),this.hls.trigger(g.default.ERROR,k)},l._handlePlaylistLoaded=function(n,a,u,d){var v=u.type,y=u.level,S=u.id,k=u.levelDetails;if(!k||!k.targetduration){this._handleManifestParsingError(n,u,"invalid target duration",d);return}var L=c.canHaveQualityLevels(u.type);if(L)this.hls.trigger(g.default.LEVEL_LOADED,{details:k,level:y||0,id:S||0,stats:a,networkDetails:d});else switch(v){case P.AUDIO_TRACK:this.hls.trigger(g.default.AUDIO_TRACK_LOADED,{details:k,id:S,stats:a,networkDetails:d});break;case P.SUBTITLE_TRACK:this.hls.trigger(g.default.SUBTITLE_TRACK_LOADED,{details:k,id:S,stats:a,networkDetails:d});break}},c}(D),Gt=Ot;function wr(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var vn=function(h){wr(c,h);function c(s){var n;return n=h.call(this,s,g.default.FRAG_LOADING)||this,n.loaders={},n}var l=c.prototype;return l.destroy=function(){var n=this.loaders;for(var a in n){var u=n[a];u&&u.destroy()}this.loaders={},h.prototype.destroy.call(this)},l.onFragLoading=function(n){var a=n.frag,u=a.type,d=this.loaders,v=this.hls.config,y=v.fLoader,S=v.loader;a.loaded=0;var k=d[u];k&&(E.logger.warn("abort previous fragment loader for type: "+u),k.abort()),k=d[u]=a.loader=v.fLoader?new y(v):new S(v);var L,G,H;L={url:a.url,frag:a,responseType:"arraybuffer",progressData:!1};var ee=a.byteRangeStartOffset,ae=a.byteRangeEndOffset;Object(w.isFiniteNumber)(ee)&&Object(w.isFiniteNumber)(ae)&&(L.rangeStart=ee,L.rangeEnd=ae),G={timeout:v.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:v.fragLoadingMaxRetryTimeout},H={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},k.load(L,G,H)},l.loadsuccess=function(n,a,u,d){d===void 0&&(d=null);var v=n.data,y=u.frag;y.loader=void 0,this.loaders[y.type]=void 0,this.hls.trigger(g.default.FRAG_LOADED,{payload:v,frag:y,stats:a,networkDetails:d})},l.loaderror=function(n,a,u){u===void 0&&(u=null);var d=a.frag,v=d.loader;v&&v.abort(),this.loaders[d.type]=void 0,this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:a.frag,response:n,networkDetails:u})},l.loadtimeout=function(n,a,u){u===void 0&&(u=null);var d=a.frag,v=d.loader;v&&v.abort(),this.loaders[d.type]=void 0,this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:a.frag,networkDetails:u})},l.loadprogress=function(n,a,u,d){d===void 0&&(d=null);var v=a.frag;v.loaded=n.loaded,this.hls.trigger(g.default.FRAG_LOAD_PROGRESS,{frag:v,stats:n,networkDetails:d})},c}(D),Rt=vn;function Fr(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var yt=function(h){Fr(c,h);function c(s){var n;return n=h.call(this,s,g.default.KEY_LOADING)||this,n.loaders={},n.decryptkey=null,n.decrypturl=null,n}var l=c.prototype;return l.destroy=function(){for(var n in this.loaders){var a=this.loaders[n];a&&a.destroy()}this.loaders={},h.prototype.destroy.call(this)},l.onKeyLoading=function(n){var a=n.frag,u=a.type,d=this.loaders[u];if(!a.decryptdata){E.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var v=a.decryptdata.uri;if(v!==this.decrypturl||this.decryptkey===null){var y=this.hls.config;if(d&&(E.logger.warn("abort previous key loader for type:"+u),d.abort()),!v){E.logger.warn("key uri is falsy");return}a.loader=this.loaders[u]=new y.loader(y),this.decrypturl=v,this.decryptkey=null;var S={url:v,frag:a,responseType:"arraybuffer"},k={timeout:y.fragLoadingTimeOut,maxRetry:0,retryDelay:y.fragLoadingRetryDelay,maxRetryDelay:y.fragLoadingMaxRetryTimeout},L={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};a.loader.load(S,k,L)}else this.decryptkey&&(a.decryptdata.key=this.decryptkey,this.hls.trigger(g.default.KEY_LOADED,{frag:a}))},l.loadsuccess=function(n,a,u){var d=u.frag;if(!d.decryptdata){E.logger.error("after key load, decryptdata unset");return}this.decryptkey=d.decryptdata.key=new Uint8Array(n.data),d.loader=void 0,delete this.loaders[d.type],this.hls.trigger(g.default.KEY_LOADED,{frag:d})},l.loaderror=function(n,a){var u=a.frag,d=u.loader;d&&d.abort(),delete this.loaders[u.type],this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:u,response:n})},l.loadtimeout=function(n,a){var u=a.frag,d=u.loader;d&&d.abort(),delete this.loaders[u.type],this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.NETWORK_ERROR,details:m.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:u})},c}(D),mn=yt;function jt(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var ht={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"},Zs=function(h){jt(c,h);function c(s){var n;return n=h.call(this,s,g.default.BUFFER_APPENDED,g.default.FRAG_BUFFERED,g.default.FRAG_LOADED)||this,n.bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=s.config,n}var l=c.prototype;return l.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,D.prototype.destroy.call(this),h.prototype.destroy.call(this)},l.getBufferedFrag=function(n,a){var u=this.fragments,d=Object.keys(u).filter(function(y){var S=u[y];if(S.body.type!==a||!S.buffered)return!1;var k=S.body;return k.startPTS<=n&&n<=k.endPTS});if(d.length===0)return null;var v=d.pop();return u[v].body},l.detectEvictedFragments=function(n,a){var u=this;Object.keys(this.fragments).forEach(function(d){var v=u.fragments[d];if(!(!v||!v.buffered)){var y=v.range[n];if(y)for(var S=y.time,k=0;k<S.length;k++){var L=S[k];if(!u.isTimeBuffered(L.startPTS,L.endPTS,a)){u.removeFragment(v.body);break}}}})},l.detectPartialFragments=function(n){var a=this,u=this.getFragmentKey(n),d=this.fragments[u];d&&(d.buffered=!0,Object.keys(this.timeRanges).forEach(function(v){if(n.hasElementaryStream(v)){var y=a.timeRanges[v];d.range[v]=a.getBufferedTimes(n.startPTS,n.endPTS,y)}}))},l.getBufferedTimes=function(n,a,u){for(var d=[],v,y,S=!1,k=0;k<u.length;k++)if(v=u.start(k)-this.bufferPadding,y=u.end(k)+this.bufferPadding,n>=v&&a<=y){d.push({startPTS:Math.max(n,u.start(k)),endPTS:Math.min(a,u.end(k))});break}else if(n<y&&a>v)d.push({startPTS:Math.max(n,u.start(k)),endPTS:Math.min(a,u.end(k))}),S=!0;else if(a<=v)break;return{time:d,partial:S}},l.getFragmentKey=function(n){return n.type+"_"+n.level+"_"+n.urlId+"_"+n.sn},l.getPartialFragment=function(n){var a=this,u,d,v,y=null,S=0;return Object.keys(this.fragments).forEach(function(k){var L=a.fragments[k];a.isPartial(L)&&(d=L.body.startPTS-a.bufferPadding,v=L.body.endPTS+a.bufferPadding,n>=d&&n<=v&&(u=Math.min(n-d,v-n),S<=u&&(y=L.body,S=u)))}),y},l.getState=function(n){var a=this.getFragmentKey(n),u=this.fragments[a],d=ht.NOT_LOADED;return u!==void 0&&(u.buffered?this.isPartial(u)===!0?d=ht.PARTIAL:d=ht.OK:d=ht.APPENDING),d},l.isPartial=function(n){return n.buffered===!0&&(n.range.video!==void 0&&n.range.video.partial===!0||n.range.audio!==void 0&&n.range.audio.partial===!0)},l.isTimeBuffered=function(n,a,u){for(var d,v,y=0;y<u.length;y++){if(d=u.start(y)-this.bufferPadding,v=u.end(y)+this.bufferPadding,n>=d&&a<=v)return!0;if(a<=d)return!1}return!1},l.onFragLoaded=function(n){var a=n.frag;!Object(w.isFiniteNumber)(a.sn)||a.bitrateTest||(this.fragments[this.getFragmentKey(a)]={body:a,range:Object.create(null),buffered:!1})},l.onBufferAppended=function(n){var a=this;this.timeRanges=n.timeRanges,Object.keys(this.timeRanges).forEach(function(u){var d=a.timeRanges[u];a.detectEvictedFragments(u,d)})},l.onFragBuffered=function(n){this.detectPartialFragments(n.frag)},l.hasFragment=function(n){var a=this.getFragmentKey(n);return this.fragments[a]!==void 0},l.removeFragment=function(n){var a=this.getFragmentKey(n);delete this.fragments[a]},l.removeAllFragments=function(){this.fragments=Object.create(null)},c}(D),N={search:function(c,l){for(var s=0,n=c.length-1,a=null,u=null;s<=n;){a=(s+n)/2|0,u=c[a];var d=l(u);if(d>0)s=a+1;else if(d<0)n=a-1;else return u}return null}},K=N,O=function(){function h(){}return h.isBuffered=function(l,s){try{if(l){for(var n=l.buffered,a=0;a<n.length;a++)if(s>=n.start(a)&&s<=n.end(a))return!0}}catch{}return!1},h.bufferInfo=function(l,s,n){try{if(l){var a=l.buffered,u=[],d;for(d=0;d<a.length;d++)u.push({start:a.start(d),end:a.end(d)});return this.bufferedInfo(u,s,n)}}catch{}return{len:0,start:s,end:s,nextStart:void 0}},h.bufferedInfo=function(l,s,n){l.sort(function(ae,he){var fe=ae.start-he.start;return fe||he.end-ae.end});var a=[];if(n)for(var u=0;u<l.length;u++){var d=a.length;if(d){var v=a[d-1].end;l[u].start-v<n?l[u].end>v&&(a[d-1].end=l[u].end):a.push(l[u])}else a.push(l[u])}else a=l;for(var y=0,S,k=s,L=s,G=0;G<a.length;G++){var H=a[G].start,ee=a[G].end;if(s+n>=H&&s<ee)k=H,L=ee,y=L-s;else if(s+n<H){S=H;break}}return{len:y,start:k,end:L,nextStart:S}},h}(),x=o("./node_modules/eventemitter3/index.js"),R=o("./node_modules/webworkify-webpack/index.js"),I=o("./src/demux/demuxer-inline.js");function M(){return window.MediaSource||window.WebKitMediaSource}var U=o("./src/utils/get-self-scope.js");function j(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var W=function(h){j(c,h);function c(){return h.apply(this,arguments)||this}var l=c.prototype;return l.trigger=function(n){for(var a=arguments.length,u=new Array(a>1?a-1:0),d=1;d<a;d++)u[d-1]=arguments[d];this.emit.apply(this,[n,n].concat(u))},c}(x.EventEmitter),J=Object(U.getSelfScope)(),Z=M()||{isTypeSupported:function(){return!1}},q=function(){function h(l,s){var n=this;this.hls=l,this.id=s;var a=this.observer=new W,u=l.config,d=function(L,G){G=G||{},G.frag=n.frag,G.id=n.id,l.trigger(L,G)};a.on(g.default.FRAG_DECRYPTED,d),a.on(g.default.FRAG_PARSING_INIT_SEGMENT,d),a.on(g.default.FRAG_PARSING_DATA,d),a.on(g.default.FRAG_PARSED,d),a.on(g.default.ERROR,d),a.on(g.default.FRAG_PARSING_METADATA,d),a.on(g.default.FRAG_PARSING_USERDATA,d),a.on(g.default.INIT_PTS_FOUND,d);var v={mp4:Z.isTypeSupported("video/mp4"),mpeg:Z.isTypeSupported("audio/mpeg"),mp3:Z.isTypeSupported('audio/mp4; codecs="mp3"')},y=navigator.vendor;if(u.enableWorker&&typeof Worker<"u"){E.logger.log("demuxing in webworker");var S;try{S=this.w=R("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),S.addEventListener("message",this.onwmsg),S.onerror=function(k){l.trigger(g.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:k.message+" ("+k.filename+":"+k.lineno+")"}})},S.postMessage({cmd:"init",typeSupported:v,vendor:y,id:s,config:JSON.stringify(u)})}catch(k){E.logger.warn("Error in worker:",k),E.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),S&&J.URL.revokeObjectURL(S.objectURL),this.demuxer=new I.default(a,v,u,y),this.w=void 0}}else this.demuxer=new I.default(a,v,u,y)}var c=h.prototype;return c.destroy=function(){var s=this.w;if(s)s.removeEventListener("message",this.onwmsg),s.terminate(),this.w=null;else{var n=this.demuxer;n&&(n.destroy(),this.demuxer=null)}var a=this.observer;a&&(a.removeAllListeners(),this.observer=null)},c.push=function(s,n,a,u,d,v,y,S){var k=this.w,L=Object(w.isFiniteNumber)(d.startPTS)?d.startPTS:d.start,G=d.decryptdata,H=this.frag,ee=!(H&&d.cc===H.cc),ae=!(H&&d.level===H.level),he=H&&d.sn===H.sn+1,fe=!ae&&he;if(ee&&E.logger.log(this.id+":discontinuity detected"),ae&&E.logger.log(this.id+":switch detected"),this.frag=d,k)k.postMessage({cmd:"demux",data:s,decryptdata:G,initSegment:n,audioCodec:a,videoCodec:u,timeOffset:L,discontinuity:ee,trackSwitch:ae,contiguous:fe,duration:v,accurateTimeOffset:y,defaultInitPTS:S},s instanceof ArrayBuffer?[s]:[]);else{var xe=this.demuxer;xe&&xe.push(s,G,n,a,u,L,ee,ae,fe,v,y,S)}},c.onWorkerMessage=function(s){var n=s.data,a=this.hls;switch(n.event){case"init":J.URL.revokeObjectURL(this.w.objectURL);break;case g.default.FRAG_PARSING_DATA:n.data.data1=new Uint8Array(n.data1),n.data2&&(n.data.data2=new Uint8Array(n.data2));default:n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,a.trigger(n.event,n.data);break}},h}(),ne=q;function te(h,c,l){switch(c){case"audio":h.audioGroupIds||(h.audioGroupIds=[]),h.audioGroupIds.push(l);break;case"text":h.textGroupIds||(h.textGroupIds=[]),h.textGroupIds.push(l);break}}function ue(h,c,l){var s=h[c],n=h[l],a=n.startPTS;if(Object(w.isFiniteNumber)(a))l>c?(s.duration=a-s.start,s.duration<0&&E.logger.warn("negative duration computed for frag "+s.sn+",level "+s.level+", there should be some duration drift between playlist and fragment!")):(n.duration=s.start-a,n.duration<0&&E.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!"));else if(l>c){var u=s.cc===n.cc;n.start=s.start+(u&&s.minEndPTS?s.minEndPTS-s.start:s.duration)}else n.start=Math.max(s.start-n.duration,0)}function re(h,c,l,s,n,a){var u=l,d=s;if(Object(w.isFiniteNumber)(c.startPTS)){var v=Math.abs(c.startPTS-l);Object(w.isFiniteNumber)(c.deltaPTS)?c.deltaPTS=Math.max(v,c.deltaPTS):c.deltaPTS=v,u=Math.max(l,c.startPTS),l=Math.min(l,c.startPTS),d=Math.min(s,c.endPTS),s=Math.max(s,c.endPTS),n=Math.min(n,c.startDTS),a=Math.max(a,c.endDTS)}var y=l-c.start;c.start=c.startPTS=l,c.maxStartPTS=u,c.endPTS=s,c.minEndPTS=d,c.startDTS=n,c.endDTS=a,c.duration=s-l;var S=c.sn;if(!h||S<h.startSN||S>h.endSN)return 0;var k,L,G;for(k=S-h.startSN,L=h.fragments,L[k]=c,G=k;G>0;G--)ue(L,G,G-1);for(G=k;G<L.length-1;G++)ue(L,G,G+1);return h.PTSKnown=!0,y}function ve(h,c){c.initSegment&&h.initSegment&&(c.initSegment=h.initSegment);var l=0,s;if(Se(h,c,function(u,d){l=u.cc-d.cc,Object(w.isFiniteNumber)(u.startPTS)&&(d.start=d.startPTS=u.startPTS,d.endPTS=u.endPTS,d.duration=u.duration,d.backtracked=u.backtracked,d.dropped=u.dropped,s=d),c.PTSKnown=!0}),!!c.PTSKnown){if(l){E.logger.log("discontinuity sliding from playlist, take drift into account");for(var n=c.fragments,a=0;a<n.length;a++)n[a].cc+=l}s?re(c,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Fe(h,c),c.PTSKnown=h.PTSKnown}}function de(h,c,l){l===void 0&&(l=0);var s=-1;Se(h,c,function(u,d,v){d.start=u.start,s=v});var n=c.fragments;if(s<0){n.forEach(function(u){u.start+=l});return}for(var a=s+1;a<n.length;a++)n[a].start=n[a-1].start+n[a-1].duration}function Se(h,c,l){if(!(!h||!c))for(var s=Math.max(h.startSN,c.startSN)-c.startSN,n=Math.min(h.endSN,c.endSN)-c.startSN,a=c.startSN-h.startSN,u=s;u<=n;u++){var d=h.fragments[a+u],v=c.fragments[u];if(!d||!v)break;l(d,v,u)}}function Fe(h,c){var l=c.startSN-h.startSN,s=h.fragments,n=c.fragments;if(!(l<0||l>s.length))for(var a=0;a<n.length;a++)n[a].start+=s[l].start}function Te(h,c,l){var s=1e3*(c.averagetargetduration?c.averagetargetduration:c.targetduration),n=s/2;return h&&c.endSN===h.endSN&&(s=n),l&&(s=Math.max(n,s-(window.performance.now()-l))),Math.round(s)}var He={toString:function(c){for(var l="",s=c.length,n=0;n<s;n++)l+="["+c.start(n).toFixed(3)+","+c.end(n).toFixed(3)+"]";return l}},Pe=He;function Re(h,c){for(var l=null,s=0;s<h.length;s+=1){var n=h[s];if(n&&n.cc===c){l=n;break}}return l}function Me(h,c){return K.search(h,function(l){return l.cc<c?1:l.cc>c?-1:0})}function Ke(h,c,l){var s=!1;return c&&c.details&&l&&(l.endCC>l.startCC||h&&h.cc<l.startCC)&&(s=!0),s}function xt(h,c){var l=h.fragments,s=c.fragments;if(!s.length||!l.length){E.logger.log("No fragments to align");return}var n=Re(l,s[0].cc);if(!n||n&&!n.startPTS){E.logger.log("No frag in previous level to align on");return}return n}function ut(h,c){c.fragments.forEach(function(l){if(l){var s=l.start+h;l.start=l.startPTS=s,l.endPTS=s+l.duration}}),c.PTSKnown=!0}function We(h,c,l){kt(h,l,c),!l.PTSKnown&&c&&ft(l,c.details)}function kt(h,c,l){if(Ke(h,l,c)){var s=xt(l.details,c);s&&(E.logger.log("Adjusting PTS using last level due to CC increase within current level"),ut(s.start,c))}}function ft(h,c){if(c&&c.fragments.length){if(!h.hasProgramDateTime||!c.hasProgramDateTime)return;var l=c.fragments[0].programDateTime,s=h.fragments[0].programDateTime,n=(s-l)/1e3+c.fragments[0].start;Object(w.isFiniteNumber)(n)&&(E.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),ut(n,h))}}function Pt(h,c,l){if(c===null||!Array.isArray(h)||!h.length||!Object(w.isFiniteNumber)(c))return null;var s=h[0].programDateTime;if(c<(s||0))return null;var n=h[h.length-1].endProgramDateTime;if(c>=(n||0))return null;l=l||0;for(var a=0;a<h.length;++a){var u=h[a];if(cr(c,l,u))return u}return null}function it(h,c,l,s){l===void 0&&(l=0),s===void 0&&(s=0);var n=null;if(h?n=c[h.sn-c[0].sn+1]:l===0&&c[0].start===0&&(n=c[0]),n&&Ye(l,s,n)===0)return n;var a=K.search(c,Ye.bind(null,l,s));return a||n}function Ye(h,c,l){h===void 0&&(h=0),c===void 0&&(c=0);var s=Math.min(c,l.duration+(l.deltaPTS?l.deltaPTS:0));return l.start+l.duration-s<=h?1:l.start-s>h&&l.start?-1:0}function cr(h,c,l){var s=Math.min(c,l.duration+(l.deltaPTS?l.deltaPTS:0))*1e3,n=l.endProgramDateTime||0;return n-s>h}var dr=250,Kt=2,Et=.1,nr=.05,hr=function(){function h(l,s,n,a){this.config=l,this.media=s,this.fragmentTracker=n,this.hls=a,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var c=h.prototype;return c.poll=function(s){var n=this.config,a=this.media,u=this.stalled,d=a.currentTime,v=a.seeking,y=this.seeking&&!v,S=!this.seeking&&v;if(this.seeking=v,d!==s){if(this.moved=!0,u!==null){if(this.stallReported){var k=self.performance.now()-u;E.logger.warn("playback not stuck anymore @"+d+", after "+Math.round(k)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((S||y)&&(this.stalled=null),!(a.paused||a.ended||a.playbackRate===0||!a.buffered.length)){var L=O.bufferInfo(a,d,0),G=L.len>0,H=L.nextStart||0;if(!(!G&&!H)){if(v){var ee=L.len>Kt,ae=!H||H-d>Kt&&!this.fragmentTracker.getPartialFragment(d);if(ee||ae)return;this.moved=!1}if(!this.moved&&this.stalled){var he=Math.max(H,L.start||0)-d;if(he>0&&he<=Kt){this._trySkipBufferHole(null);return}}var fe=self.performance.now();if(u===null){this.stalled=fe;return}var xe=fe-u;!v&&xe>=dr&&this._reportStall(L.len);var Ee=O.bufferInfo(a,d,n.maxBufferHole);this._tryFixBufferStall(Ee,xe)}}},c._tryFixBufferStall=function(s,n){var a=this.config,u=this.fragmentTracker,d=this.media,v=d.currentTime,y=u.getPartialFragment(v);if(y){var S=this._trySkipBufferHole(y);if(S)return}s.len>a.maxBufferHole&&n>a.highBufferWatchdogPeriod*1e3&&(E.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},c._reportStall=function(s){var n=this.hls,a=this.media,u=this.stallReported;u||(this.stallReported=!0,E.logger.warn("Playback stalling at @"+a.currentTime+" due to low buffer (buffer="+s+")"),n.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:s}))},c._trySkipBufferHole=function(s){for(var n=this.config,a=this.hls,u=this.media,d=u.currentTime,v=0,y=0;y<u.buffered.length;y++){var S=u.buffered.start(y);if(d+n.maxBufferHole>=v&&d<S){var k=Math.max(S+nr,u.currentTime+Et);return E.logger.warn("skipping hole, adjusting currentTime from "+d+" to "+k),this.moved=!0,this.stalled=null,u.currentTime=k,s&&a.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+d+" to "+k,frag:s}),k}v=u.buffered.end(y)}return 0},c._tryNudgeBuffer=function(){var s=this.config,n=this.hls,a=this.media,u=a.currentTime,d=(this.nudgeRetry||0)+1;if(this.nudgeRetry=d,d<s.nudgeMaxRetry){var v=u+d*s.nudgeOffset;E.logger.warn("Nudging 'currentTime' from "+u+" to "+v),a.currentTime=v,n.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else E.logger.error("Playhead still not moving while enough data buffered @"+u+" after "+s.nudgeMaxRetry+" nudges"),n.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},h}();function Ar(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function yn(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Rr=function(h){yn(c,h);function c(s){for(var n,a=arguments.length,u=new Array(a>1?a-1:0),d=1;d<a;d++)u[d-1]=arguments[d];return n=h.call.apply(h,[this,s].concat(u))||this,n._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(Ar(n)),n}var l=c.prototype;return l.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},l.hasInterval=function(){return!!this._tickInterval},l.hasNextTick=function(){return!!this._tickTimer},l.setInterval=function(n){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,n),!0)},l.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},l.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},l.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},l.doTick=function(){},c}(D);function xn(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var $={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},Ft=function(h){xn(c,h);function c(){return h.apply(this,arguments)||this}var l=c.prototype;return l.doTick=function(){},l.startLoad=function(){},l.stopLoad=function(){var n=this.fragCurrent;n&&(n.loader&&n.loader.abort(),this.fragmentTracker.removeFragment(n)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=$.STOPPED},l._streamEnded=function(n,a){var u=this.fragCurrent,d=this.fragmentTracker;if(!a.live&&u&&!u.backtracked&&u.sn===a.endSN&&!n.nextStart){var v=d.getState(u);return v===ht.PARTIAL||v===ht.OK}return!1},l.onMediaSeeking=function(){var n=this.config,a=this.media,u=this.mediaBuffer,d=this.state,v=a?a.currentTime:null,y=O.bufferInfo(u||a,v,this.config.maxBufferHole);if(E.logger.log("media seeking to "+(Object(w.isFiniteNumber)(v)?v.toFixed(3):v)),d===$.FRAG_LOADING){var S=this.fragCurrent;if(y.len===0&&S){var k=n.maxFragLookUpTolerance,L=S.start-k,G=S.start+S.duration+k;v<L||v>G?(S.loader&&(E.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),S.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=$.IDLE):E.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else d===$.ENDED&&(y.len===0&&(this.fragPrevious=null,this.fragCurrent=null),this.state=$.IDLE);a&&(this.lastCurrentTime=v),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=v),this.tick()},l.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},l.onHandlerDestroying=function(){this.stopLoad(),h.prototype.onHandlerDestroying.call(this)},l.onHandlerDestroyed=function(){this.state=$.STOPPED,this.fragmentTracker=null},l.computeLivePosition=function(n,a){var u=this.config.liveSyncDuration!==void 0?this.config.liveSyncDuration:this.config.liveSyncDurationCount*a.targetduration;return n+Math.max(0,a.totalduration-u)},c}(Rr);function Yr(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function En(h,c,l){return c&&Yr(h.prototype,c),l&&Yr(h,l),h}function pr(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Si=100,eo=function(h){pr(c,h);function c(s,n){var a;return a=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.MANIFEST_LOADING,g.default.MANIFEST_PARSED,g.default.LEVEL_LOADED,g.default.LEVELS_UPDATED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_LOAD_EMERGENCY_ABORTED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.AUDIO_TRACK_SWITCHING,g.default.AUDIO_TRACK_SWITCHED,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED)||this,a.fragmentTracker=n,a.config=s.config,a.audioCodecSwap=!1,a._state=$.STOPPED,a.stallReported=!1,a.gapController=null,a.altAudio=!1,a.audioOnly=!1,a.bitrateTest=!1,a}var l=c.prototype;return l.startLoad=function(n){if(this.levels){var a=this.lastCurrentTime,u=this.hls;if(this.stopLoad(),this.setInterval(Si),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var d=u.startLevel;d===-1&&(u.config.testBandwidth?(d=0,this.bitrateTest=!0):d=u.nextAutoLevel),this.level=u.nextLoadLevel=d,this.loadedmetadata=!1}a>0&&n===-1&&(E.logger.log("override startPosition with lastCurrentTime @"+a.toFixed(3)),n=a),this.state=$.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}else this.forceStartLoad=!0,this.state=$.STOPPED},l.stopLoad=function(){this.forceStartLoad=!1,h.prototype.stopLoad.call(this)},l.doTick=function(){switch(this.state){case $.BUFFER_FLUSHING:this.fragLoadError=0;break;case $.IDLE:this._doTickIdle();break;case $.WAITING_LEVEL:var n=this.levels[this.level];n&&n.details&&(this.state=$.IDLE);break;case $.FRAG_LOADING_WAITING_RETRY:var a=window.performance.now(),u=this.retryDate;(!u||a>=u||this.media&&this.media.seeking)&&(E.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=$.IDLE);break}this._checkBuffer(),this._checkFragmentChanged()},l._doTickIdle=function(){var n=this.hls,a=n.config,u=this.media;if(!(this.levelLastLoaded===void 0||!u&&(this.startFragRequested||!a.startFragPrefetch))){if(this.altAudio&&this.audioOnly){this.demuxer.frag=null;return}var d;this.loadedmetadata?d=u.currentTime:d=this.nextLoadPosition;var v=n.nextLoadLevel,y=this.levels[v];if(y){var S=y.bitrate,k;S?k=Math.max(8*a.maxBufferSize/S,a.maxBufferLength):k=a.maxBufferLength,k=Math.min(k,a.maxMaxBufferLength);var L=d<a.maxBufferHole?Math.max(Kt,a.maxBufferHole):a.maxBufferHole,G=O.bufferInfo(this.mediaBuffer?this.mediaBuffer:u,d,L),H=G.len;if(!(H>=k)){E.logger.trace("buffer length of "+H.toFixed(3)+" is below max of "+k.toFixed(3)+". checking for more payload ..."),this.level=n.nextLoadLevel=v;var ee=y.details;if(!ee||ee.live&&this.levelLastLoaded!==v){this.state=$.WAITING_LEVEL;return}if(this._streamEnded(G,ee)){var ae={};this.altAudio&&(ae.type="video"),this.hls.trigger(g.default.BUFFER_EOS,ae),this.state=$.ENDED;return}this._fetchPayloadOrEos(d,G,ee)}}}},l._fetchPayloadOrEos=function(n,a,u){var d=this.fragPrevious;this.level;var v=u.fragments,y=v.length;if(y!==0){var S=v[0].start,k=v[y-1].start+v[y-1].duration,L=a.end,G;if(u.initSegment&&!u.initSegment.data)G=u.initSegment;else if(u.live){var H=this.config.initialLiveManifestSize;if(y<H){E.logger.warn("Can not start playback of a level, reason: not enough fragments "+y+" < "+H);return}if(G=this._ensureFragmentAtLivePoint(u,L,S,k,d,v),G===null)return}else L<S&&(G=v[0]);G||(G=this._findFragment(S,d,y,v,L,k,u)),G&&(G.encrypted?this._loadKey(G,u):this._loadFragment(G,u,n,L))}},l._ensureFragmentAtLivePoint=function(n,a,u,d,v,y){var S=this.hls.config,k=this.media,L,G=1/0;if(S.liveMaxLatencyDuration!==void 0?G=S.liveMaxLatencyDuration:Object(w.isFiniteNumber)(S.liveMaxLatencyDurationCount)&&(G=S.liveMaxLatencyDurationCount*n.targetduration),a<Math.max(u-S.maxFragLookUpTolerance,d-G)){var H=this.liveSyncPosition=this.computeLivePosition(u,n);a=H,k&&!k.paused&&k.readyState&&k.duration>H&&H>k.currentTime&&(E.logger.log("buffer end: "+a.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+H.toFixed(3)),k.currentTime=H),this.nextLoadPosition=H}if(n.PTSKnown&&a>d&&k&&k.readyState)return null;if(this.startFragRequested&&!n.PTSKnown&&v)if(n.hasProgramDateTime)E.logger.log("live playlist, switching playlist, load frag with same PDT: "+v.programDateTime),L=Pt(y,v.endProgramDateTime,S.maxFragLookUpTolerance);else{var ee=v.sn+1;if(ee>=n.startSN&&ee<=n.endSN){var ae=y[ee-n.startSN];v.cc===ae.cc&&(L=ae,E.logger.log("live playlist, switching playlist, load frag with next SN: "+L.sn))}L||(L=K.search(y,function(he){return v.cc-he.cc}),L&&E.logger.log("live playlist, switching playlist, load frag with same CC: "+L.sn))}return L},l._findFragment=function(n,a,u,d,v,y,S){var k=this.hls.config,L;if(v<y){var G=v>y-k.maxFragLookUpTolerance?0:k.maxFragLookUpTolerance;L=it(a,d,v,G)}else L=d[u-1];if(L){var H=L.sn-S.startSN,ee=a&&L.level===a.level,ae=d[H-1],he=d[H+1];if(a&&L.sn===a.sn)if(ee&&!L.backtracked)if(L.sn<S.endSN){var fe=a.deltaPTS;fe&&fe>k.maxBufferHole&&a.dropped&&H?(L=ae,E.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(L=he,this.fragmentTracker.getState(L)!==ht.OK&&E.logger.log("Re-loading fragment with SN: "+L.sn))}else L=null;else L.backtracked&&(he&&he.backtracked?(E.logger.warn("Already backtracked from fragment "+he.sn+", will not backtrack to fragment "+L.sn+". Loading fragment "+he.sn),L=he):(E.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),L.dropped=0,ae?(L=ae,L.backtracked=!0):H&&(L=null)))}return L},l._loadKey=function(n,a){E.logger.log("Loading key for "+n.sn+" of ["+a.startSN+"-"+a.endSN+"], level "+this.level),this.state=$.KEY_LOADING,this.hls.trigger(g.default.KEY_LOADING,{frag:n})},l._loadFragment=function(n,a,u,d){var v=this.fragmentTracker.getState(n);this.fragCurrent=n,n.sn!=="initSegment"&&(this.startFragRequested=!0),Object(w.isFiniteNumber)(n.sn)&&!n.bitrateTest&&(this.nextLoadPosition=n.start+n.duration),n.backtracked||v===ht.NOT_LOADED||v===ht.PARTIAL?(n.autoLevel=this.hls.autoLevelEnabled,n.bitrateTest=this.bitrateTest,E.logger.log("Loading "+n.sn+" of ["+a.startSN+"-"+a.endSN+"], level "+this.level+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+parseFloat(u.toFixed(3))+", bufferEnd: "+parseFloat(d.toFixed(3))),this.hls.trigger(g.default.FRAG_LOADING,{frag:n}),this.demuxer||(this.demuxer=new ne(this.hls,"main")),this.state=$.FRAG_LOADING):v===ht.APPENDING&&this._reduceMaxBufferLength(n.duration)&&this.fragmentTracker.removeFragment(n)},l.getBufferedFrag=function(n){return this.fragmentTracker.getBufferedFrag(n,C.MAIN)},l.followingBufferedFrag=function(n){return n?this.getBufferedFrag(n.endPTS+.5):null},l._checkFragmentChanged=function(){var n,a,u=this.media;if(u&&u.readyState&&u.seeking===!1&&(a=u.currentTime,a>this.lastCurrentTime&&(this.lastCurrentTime=a),O.isBuffered(u,a)?n=this.getBufferedFrag(a):O.isBuffered(u,a+.1)&&(n=this.getBufferedFrag(a+.1)),n)){var d=n;if(d!==this.fragPlaying){this.hls.trigger(g.default.FRAG_CHANGED,{frag:d});var v=d.level;(!this.fragPlaying||this.fragPlaying.level!==v)&&this.hls.trigger(g.default.LEVEL_SWITCHED,{level:v}),this.fragPlaying=d}}},l.immediateLevelSwitch=function(){if(E.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var n=this.media,a;n?(a=n.paused,a||n.pause()):a=!0,this.previouslyPaused=a}var u=this.fragCurrent;u&&u.loader&&u.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},l.immediateLevelSwitchEnd=function(){var n=this.media;n&&n.buffered.length&&(this.immediateSwitch=!1,n.currentTime>0&&O.isBuffered(n,n.currentTime)&&(n.currentTime-=1e-4),this.previouslyPaused||n.play())},l.nextLevelSwitch=function(){var n=this.media;if(n&&n.readyState){var a,u=this.getBufferedFrag(n.currentTime);if(u&&u.startPTS>1&&this.flushMainBuffer(0,u.startPTS-1),n.paused)a=0;else{var d=this.hls.nextLoadLevel,v=this.levels[d],y=this.fragLastKbps;y&&this.fragCurrent?a=this.fragCurrent.duration*v.bitrate/(1e3*y)+1:a=0}var S=this.getBufferedFrag(n.currentTime+a);if(S){var k=this.followingBufferedFrag(S);if(k){var L=this.fragCurrent;L&&L.loader&&L.loader.abort(),this.fragCurrent=null;var G=Math.max(S.endPTS,k.maxStartPTS+Math.min(this.config.maxFragLookUpTolerance,k.duration));this.flushMainBuffer(G,Number.POSITIVE_INFINITY)}}}},l.flushMainBuffer=function(n,a){this.state=$.BUFFER_FLUSHING;var u={startOffset:n,endOffset:a};this.altAudio&&(u.type="video"),this.hls.trigger(g.default.BUFFER_FLUSHING,u)},l.onMediaAttached=function(n){var a=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),a.addEventListener("seeking",this.onvseeking),a.addEventListener("seeked",this.onvseeked),a.addEventListener("ended",this.onvended);var u=this.config;this.levels&&u.autoStartLoad&&this.hls.startLoad(u.startPosition),this.gapController=new hr(u,a,this.fragmentTracker,this.hls)},l.onMediaDetaching=function(){var n=this.media;n&&n.ended&&(E.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var a=this.levels;a&&a.forEach(function(u){u.details&&u.details.fragments.forEach(function(d){d.backtracked=void 0})}),n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("seeked",this.onvseeked),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},l.onMediaSeeked=function(){var n=this.media,a=n?n.currentTime:void 0;Object(w.isFiniteNumber)(a)&&E.logger.log("media seeked to "+a.toFixed(3)),this.tick()},l.onManifestLoading=function(){E.logger.log("trigger BUFFER_RESET"),this.hls.trigger(g.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},l.onManifestParsed=function(n){var a=!1,u=!1,d;n.levels.forEach(function(y){d=y.audioCodec,d&&(d.indexOf("mp4a.40.2")!==-1&&(a=!0),d.indexOf("mp4a.40.5")!==-1&&(u=!0))}),this.audioCodecSwitch=a&&u,this.audioCodecSwitch&&E.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=n.altAudio,this.levels=n.levels,this.startFragRequested=!1;var v=this.config;(v.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(v.startPosition)},l.onLevelLoaded=function(n){var a=n.details,u=n.level,d=this.levels[this.levelLastLoaded],v=this.levels[u],y=a.totalduration,S=0;if(E.logger.log("level "+u+" loaded ["+a.startSN+","+a.endSN+"],duration:"+y),a.live||v.details&&v.details.live){var k=v.details;k&&a.fragments.length>0?(ve(k,a),S=a.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(S,k),a.PTSKnown&&Object(w.isFiniteNumber)(S)?E.logger.log("live playlist sliding:"+S.toFixed(3)):(E.logger.log("live playlist - outdated PTS, unknown sliding"),We(this.fragPrevious,d,a))):(E.logger.log("live playlist - first load, unknown sliding"),a.PTSKnown=!1,We(this.fragPrevious,d,a))}else a.PTSKnown=!1;if(v.details=a,this.levelLastLoaded=u,this.hls.trigger(g.default.LEVEL_UPDATED,{details:a,level:u}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var L=a.startTimeOffset;Object(w.isFiniteNumber)(L)?(L<0&&(E.logger.log("negative start time offset "+L+", count from end of last fragment"),L=S+y+L),E.logger.log("start time offset found in playlist, adjust startPosition to "+L),this.startPosition=L):a.live?(this.startPosition=this.computeLivePosition(S,a),E.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===$.WAITING_LEVEL&&(this.state=$.IDLE),this.tick()},l.onKeyLoaded=function(){this.state===$.KEY_LOADING&&(this.state=$.IDLE,this.tick())},l.onFragLoaded=function(n){var a=this.fragCurrent,u=this.hls,d=this.levels,v=this.media,y=n.frag;if(this.state===$.FRAG_LOADING&&a&&y.type==="main"&&y.level===a.level&&y.sn===a.sn){var S=n.stats,k=d[a.level],L=k.details;if(this.bitrateTest=!1,this.stats=S,E.logger.log("Loaded "+a.sn+" of ["+L.startSN+" ,"+L.endSN+"],level "+a.level),y.bitrateTest&&u.nextLoadLevel)this.state=$.IDLE,this.startFragRequested=!1,S.tparsed=S.tbuffered=window.performance.now(),u.trigger(g.default.FRAG_BUFFERED,{stats:S,frag:a,id:"main"}),this.tick();else if(y.sn==="initSegment")this.state=$.IDLE,S.tparsed=S.tbuffered=window.performance.now(),L.initSegment.data=n.payload,u.trigger(g.default.FRAG_BUFFERED,{stats:S,frag:a,id:"main"}),this.tick();else{E.logger.log("Parsing "+a.sn+" of ["+L.startSN+" ,"+L.endSN+"],level "+a.level+", cc "+a.cc),this.state=$.PARSING,this.pendingBuffering=!0,this.appended=!1,y.bitrateTest&&(y.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:y}));var G=!(v&&v.seeking)&&(L.PTSKnown||!L.live),H=L.initSegment?L.initSegment.data:[],ee=this._getAudioCodec(k),ae=this.demuxer=this.demuxer||new ne(this.hls,"main");ae.push(n.payload,H,ee,k.videoCodec,a,L.totalduration,G)}}this.fragLoadError=0},l.onFragParsingInitSegment=function(n){var a=this.fragCurrent,u=n.frag;if(a&&n.id==="main"&&u.sn===a.sn&&u.level===a.level&&this.state===$.PARSING){var d=n.tracks,v,y;if(this.audioOnly=d.audio&&!d.video,this.altAudio&&!this.audioOnly&&delete d.audio,y=d.audio,y){var S=this.levels[this.level].audioCodec,k=navigator.userAgent.toLowerCase();S&&this.audioCodecSwap&&(E.logger.log("swapping playlist audio codec"),S.indexOf("mp4a.40.5")!==-1?S="mp4a.40.2":S="mp4a.40.5"),this.audioCodecSwitch&&y.metadata.channelCount!==1&&k.indexOf("firefox")===-1&&(S="mp4a.40.5"),k.indexOf("android")!==-1&&y.container!=="audio/mpeg"&&(S="mp4a.40.2",E.logger.log("Android: force audio codec to "+S)),y.levelCodec=S,y.id=n.id}y=d.video,y&&(y.levelCodec=this.levels[this.level].videoCodec,y.id=n.id),this.hls.trigger(g.default.BUFFER_CODECS,d);for(v in d){y=d[v],E.logger.log("main track:"+v+",container:"+y.container+",codecs[level/parsed]=["+y.levelCodec+"/"+y.codec+"]");var L=y.initSegment;L&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g.default.BUFFER_APPENDING,{type:v,data:L,parent:"main",content:"initSegment"}))}this.tick()}},l.onFragParsingData=function(n){var a=this,u=this.fragCurrent,d=n.frag;if(u&&n.id==="main"&&d.sn===u.sn&&d.level===u.level&&!(n.type==="audio"&&this.altAudio)&&this.state===$.PARSING){var v=this.levels[this.level],y=u;if(Object(w.isFiniteNumber)(n.endPTS)||(n.endPTS=n.startPTS+u.duration,n.endDTS=n.startDTS+u.duration),n.hasAudio===!0&&y.addElementaryStream(Y.AUDIO),n.hasVideo===!0&&y.addElementaryStream(Y.VIDEO),E.logger.log("Parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb+",dropped:"+(n.dropped||0)),n.type==="video")if(y.dropped=n.dropped,y.dropped)if(y.backtracked)E.logger.warn("Already backtracked on this fragment, appending with the gap",y.sn);else{var S=v.details;if(S&&y.sn===S.startSN)E.logger.warn("missing video frame(s) on first frag, appending with gap",y.sn);else{E.logger.warn("missing video frame(s), backtracking fragment",y.sn),this.fragmentTracker.removeFragment(y),y.backtracked=!0,this.nextLoadPosition=n.startPTS,this.state=$.IDLE,this.fragPrevious=y,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.tick();return}}else y.backtracked=!1;var k=re(v.details,y,n.startPTS,n.endPTS,n.startDTS,n.endDTS),L=this.hls;L.trigger(g.default.LEVEL_PTS_UPDATED,{details:v.details,level:this.level,drift:k,type:n.type,start:n.startPTS,end:n.endPTS}),[n.data1,n.data2].forEach(function(G){G&&G.length&&a.state===$.PARSING&&(a.appended=!0,a.pendingBuffering=!0,L.trigger(g.default.BUFFER_APPENDING,{type:n.type,data:G,parent:"main",content:"data"}))}),this.tick()}},l.onFragParsed=function(n){var a=this.fragCurrent,u=n.frag;a&&n.id==="main"&&u.sn===a.sn&&u.level===a.level&&this.state===$.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=$.PARSED,this._checkAppendedParsed())},l.onAudioTrackSwitching=function(n){var a=this.altAudio,u=!!n.url,d=n.id;if(!u){if(this.mediaBuffer!==this.media){E.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var v=this.fragCurrent;v.loader&&(E.logger.log("switching to main audio track, cancel main fragment load"),v.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=$.IDLE}var y=this.hls;a&&y.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),y.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:d})}},l.onAudioTrackSwitched=function(n){var a=n.id,u=!!this.hls.audioTracks[a].url;if(u){var d=this.videoBuffer;d&&this.mediaBuffer!==d&&(E.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=d)}this.altAudio=u,this.tick()},l.onBufferCreated=function(n){var a=n.tracks,u,d,v=!1;for(var y in a){var S=a[y];S.id==="main"?(d=y,u=S,y==="video"&&(this.videoBuffer=a[y].buffer)):v=!0}v&&u?(E.logger.log("alternate track found, use "+d+".buffered to schedule main fragment loading"),this.mediaBuffer=u.buffer):this.mediaBuffer=this.media},l.onBufferAppended=function(n){if(n.parent==="main"){var a=this.state;(a===$.PARSING||a===$.PARSED)&&(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},l._checkAppendedParsed=function(){if(this.state===$.PARSED&&(!this.appended||!this.pendingBuffering)){var n=this.fragCurrent;if(n){var a=this.mediaBuffer?this.mediaBuffer:this.media;E.logger.log("main buffered : "+Pe.toString(a.buffered)),this.fragPrevious=n;var u=this.stats;u.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*u.total/(u.tbuffered-u.tfirst)),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:u,frag:n,id:"main"}),this.state=$.IDLE}(this.loadedmetadata||this.startPosition<=0)&&this.tick()}},l.onError=function(n){var a=n.frag||this.fragCurrent;if(!(a&&a.type!=="main")){var u=!!this.media&&O.isBuffered(this.media,this.media.currentTime)&&O.isBuffered(this.media,this.media.currentTime+.5);switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:if(!n.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var d=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);E.logger.warn("mediaController: frag loading failed, retry in "+d+" ms"),this.retryDate=window.performance.now()+d,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=$.FRAG_LOADING_WAITING_RETRY}else E.logger.error("mediaController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=$.ERROR;break;case m.ErrorDetails.LEVEL_LOAD_ERROR:case m.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==$.ERROR&&(n.fatal?(this.state=$.ERROR,E.logger.warn("streamController: "+n.details+",switch to "+this.state+" state ...")):!n.levelRetry&&this.state===$.WAITING_LEVEL&&(this.state=$.IDLE));break;case m.ErrorDetails.BUFFER_FULL_ERROR:n.parent==="main"&&(this.state===$.PARSING||this.state===$.PARSED)&&(u?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=$.IDLE):(E.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break}}},l._reduceMaxBufferLength=function(n){var a=this.config;return a.maxMaxBufferLength>=n?(a.maxMaxBufferLength/=2,E.logger.warn("main:reduce max buffer length to "+a.maxMaxBufferLength+"s"),!0):!1},l._checkBuffer=function(){var n=this.media;if(!(!n||n.readyState===0)){var a=this.mediaBuffer?this.mediaBuffer:n,u=a.buffered;!this.loadedmetadata&&u.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,u)}},l.onFragLoadEmergencyAborted=function(){this.state=$.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},l.onBufferFlushed=function(){var n=this.mediaBuffer?this.mediaBuffer:this.media;if(n){var a=this.audioOnly?Y.AUDIO:Y.VIDEO;this.fragmentTracker.detectEvictedFragments(a,n.buffered)}this.state=$.IDLE,this.fragPrevious=null},l.onLevelsUpdated=function(n){this.levels=n.levels},l.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},l._seekToStartPos=function(){var n=this.media,a=n.currentTime,u=this.startPosition;if(a!==u&&u>=0){if(n.seeking){E.logger.log("could not seek to "+u+", already seeking at "+a);return}var d=n.buffered.length?n.buffered.start(0):0,v=d-u;v>0&&v<this.config.maxBufferHole&&(E.logger.log("adjusting start position by "+v+" to match buffer start"),u+=v,this.startPosition=u),E.logger.log("seek to target start position "+u+" from current time "+a+". ready state "+n.readyState),n.currentTime=u}},l._getAudioCodec=function(n){var a=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&(E.logger.log("swapping playlist audio codec"),a&&(a.indexOf("mp4a.40.5")!==-1?a="mp4a.40.2":a="mp4a.40.5")),a},En(c,[{key:"state",set:function(n){if(this.state!==n){var a=this.state;this._state=n,E.logger.log("main stream-controller: "+a+"->"+n),this.hls.trigger(g.default.STREAM_STATE_TRANSITION,{previousState:a,nextState:n})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var n=this.media;if(n){var a=this.getBufferedFrag(n.currentTime);if(a)return a.level}return-1}},{key:"nextBufferedFrag",get:function(){var n=this.media;return n?this.followingBufferedFrag(this.getBufferedFrag(n.currentTime)):null}},{key:"nextLevel",get:function(){var n=this.nextBufferedFrag;return n?n.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(n){this._liveSyncPosition=n}}]),c}(Ft),Ea=eo;function Sa(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function Ti(h,c,l){return c&&Sa(h.prototype,c),l&&Sa(h,l),h}function Ta(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Sn,to=function(h){Ta(c,h);function c(s){var n;return n=h.call(this,s,g.default.MANIFEST_LOADED,g.default.LEVEL_LOADED,g.default.AUDIO_TRACK_SWITCHED,g.default.FRAG_LOADED,g.default.ERROR)||this,n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,Sn=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}var l=c.prototype;return l.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},l.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},l.startLoad=function(){var n=this._levels;this.canload=!0,this.levelRetryCount=0,n&&n.forEach(function(a){a.loadError=0;var u=a.details;u&&u.live&&(a.details=void 0)}),this.timer!==null&&this.loadLevel()},l.stopLoad=function(){this.canload=!1},l.onManifestLoaded=function(n){var a=[],u=[],d,v={},y=null,S=!1,k=!1;if(n.levels.forEach(function(H){var ee=H.attrs;H.loadError=0,H.fragmentError=!1,S=S||!!H.videoCodec,k=k||!!H.audioCodec,Sn&&H.audioCodec&&H.audioCodec.indexOf("mp4a.40.34")!==-1&&(H.audioCodec=void 0),y=v[H.bitrate],y?y.url.push(H.url):(H.url=[H.url],H.urlId=0,v[H.bitrate]=H,a.push(H)),ee&&(ee.AUDIO&&te(y||H,"audio",ee.AUDIO),ee.SUBTITLES&&te(y||H,"text",ee.SUBTITLES))}),S&&k&&(a=a.filter(function(H){var ee=H.videoCodec;return!!ee})),a=a.filter(function(H){var ee=H.audioCodec,ae=H.videoCodec;return(!ee||ze(ee,"audio"))&&(!ae||ze(ae,"video"))}),n.audioTracks&&(u=n.audioTracks.filter(function(H){return!H.audioCodec||ze(H.audioCodec,"audio")}),u.forEach(function(H,ee){H.id=ee})),a.length>0){d=a[0].bitrate,a.sort(function(H,ee){return H.bitrate-ee.bitrate}),this._levels=a;for(var L=0;L<a.length;L++)if(a[L].bitrate===d){this._firstLevel=L,E.logger.log("manifest loaded,"+a.length+" level(s) found, first bitrate:"+d);break}var G=k&&!S;this.hls.trigger(g.default.MANIFEST_PARSED,{levels:a,audioTracks:u,firstLevel:this._firstLevel,stats:n.stats,audio:k,video:S,altAudio:!G&&u.some(function(H){return!!H.url})})}else this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},l.setLevelInternal=function(n){var a=this._levels,u=this.hls;if(n>=0&&n<a.length){if(this.clearTimer(),this.currentLevelIndex!==n){E.logger.log("switching to level "+n),this.currentLevelIndex=n;var d=a[n];d.level=n,u.trigger(g.default.LEVEL_SWITCHING,d)}var v=a[n],y=v.details;if(!y||y.live){var S=v.urlId;u.trigger(g.default.LEVEL_LOADING,{url:v.url[S],level:n,id:S})}}else u.trigger(g.default.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.LEVEL_SWITCH_ERROR,level:n,fatal:!1,reason:"invalid level idx"})},l.onError=function(n){if(n.fatal){n.type===m.ErrorTypes.NETWORK_ERROR&&this.clearTimer();return}var a=!1,u=!1,d;switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:d=n.frag.level,u=!0;break;case m.ErrorDetails.LEVEL_LOAD_ERROR:case m.ErrorDetails.LEVEL_LOAD_TIMEOUT:d=n.context.level,a=!0;break;case m.ErrorDetails.REMUX_ALLOC_ERROR:d=n.level,a=!0;break}d!==void 0&&this.recoverLevel(n,d,a,u)},l.recoverLevel=function(n,a,u,d){var v=this,y=this.hls.config,S=n.details,k=this._levels[a],L,G,H;if(k.loadError++,k.fragmentError=d,u)if(this.levelRetryCount+1<=y.levelLoadingMaxRetry)G=Math.min(Math.pow(2,this.levelRetryCount)*y.levelLoadingRetryDelay,y.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return v.loadLevel()},G),n.levelRetry=!0,this.levelRetryCount++,E.logger.warn("level controller, "+S+", retry in "+G+" ms, current retry count is "+this.levelRetryCount);else{E.logger.error("level controller, cannot recover from "+S+" error"),this.currentLevelIndex=null,this.clearTimer(),n.fatal=!0;return}(u||d)&&(L=k.url.length,L>1&&k.loadError<L?(k.urlId=(k.urlId+1)%L,k.details=void 0,E.logger.warn("level controller, "+S+" for level "+a+": switching to redundant URL-id "+k.urlId)):this.manualLevelIndex===-1?(H=a===0?this._levels.length-1:a-1,E.logger.warn("level controller, "+S+": switch to "+H),this.hls.nextAutoLevel=this.currentLevelIndex=H):d&&(E.logger.warn("level controller, "+S+": reload a fragment"),this.currentLevelIndex=null))},l.onFragLoaded=function(n){var a=n.frag;if(a!==void 0&&a.type==="main"){var u=this._levels[a.level];u!==void 0&&(u.fragmentError=!1,u.loadError=0,this.levelRetryCount=0)}},l.onLevelLoaded=function(n){var a=this,u=n.level,d=n.details;if(u===this.currentLevelIndex){var v=this._levels[u];if(v.fragmentError||(v.loadError=0,this.levelRetryCount=0),d.live){var y=Te(v.details,d,n.stats.trequest);E.logger.log("live playlist, reload in "+Math.round(y)+" ms"),this.timer=setTimeout(function(){return a.loadLevel()},y)}else this.clearTimer()}},l.onAudioTrackSwitched=function(n){var a=this.hls.audioTracks[n.id].groupId,u=this.hls.levels[this.currentLevelIndex];if(u&&u.audioGroupIds){for(var d=-1,v=0;v<u.audioGroupIds.length;v++)if(u.audioGroupIds[v]===a){d=v;break}d!==u.urlId&&(u.urlId=d,this.startLoad())}},l.loadLevel=function(){if(E.logger.debug("call to loadLevel"),this.currentLevelIndex!==null&&this.canload){var n=this._levels[this.currentLevelIndex];if(typeof n=="object"&&n.url.length>0){var a=this.currentLevelIndex,u=n.urlId,d=n.url[u];E.logger.log("Attempt loading level index "+a+" with URL-id "+u),this.hls.trigger(g.default.LEVEL_LOADING,{url:d,level:a,id:u})}}},l.removeLevel=function(n,a){var u=this.levels.filter(function(d,v){return v!==n?!0:d.url.length>1&&a!==void 0?(d.url=d.url.filter(function(y,S){return S!==a}),d.urlId=0,!0):!1}).map(function(d,v){var y=d.details;return y&&y.fragments&&y.fragments.forEach(function(S){S.level=v}),d});this._levels=u,this.hls.trigger(g.default.LEVELS_UPDATED,{levels:u})},Ti(c,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(n){var a=this._levels;a&&(n=Math.min(n,a.length-1),(this.currentLevelIndex!==n||!a[n].details)&&this.setLevelInternal(n))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(n){this.manualLevelIndex=n,this._startLevel===void 0&&(this._startLevel=n),n!==-1&&(this.level=n)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(n){this._firstLevel=n}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var n=this.hls.config.startLevel;return n!==void 0?n:this._firstLevel}else return this._startLevel},set:function(n){this._startLevel=n}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(n){this.level=n,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=n)}}]),c}(D),_i=o("./src/demux/id3.js");function Bn(h,c){var l;try{l=new Event("addtrack")}catch{l=document.createEvent("Event"),l.initEvent("addtrack",!1,!1)}l.track=h,c.dispatchEvent(l)}function Tn(h){if(h!=null&&h.cues)for(;h.cues.length>0;)h.removeCue(h.cues[0])}function _a(h,c){if(c<h[0].endTime)return h[0];if(c>h[h.length-1].endTime)return h[h.length-1];for(var l=0,s=h.length-1;l<=s;){var n=Math.floor((s+l)/2);if(c<h[n].endTime)s=n-1;else if(c>h[n].endTime)l=n+1;else return h[n]}return h[l].endTime-c<c-h[s].endTime?h[l]:h[s]}function wa(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Un=.25,wi=function(h){wa(c,h);function c(s){var n;return n=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.FRAG_PARSING_METADATA,g.default.LIVE_BACK_BUFFER_REACHED)||this,n.id3Track=void 0,n.media=void 0,n}var l=c.prototype;return l.destroy=function(){D.prototype.destroy.call(this)},l.onMediaAttached=function(n){this.media=n.media,this.media},l.onMediaDetaching=function(){Tn(this.id3Track),this.id3Track=void 0,this.media=void 0},l.getID3Track=function(n){for(var a=0;a<n.length;a++){var u=n[a];if(u.kind==="metadata"&&u.label==="id3")return Bn(u,this.media),u}return this.media.addTextTrack("metadata","id3")},l.onFragParsingMetadata=function(n){var a=n.frag,u=n.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var d=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,v=0;v<u.length;v++){var y=_i.default.getID3Frames(u[v].data);if(y){var S=Math.max(u[v].pts,0),k=v<u.length-1?u[v+1].pts:a.endPTS;k||(k=a.start+a.duration);var L=k-S;L<=0&&(k=S+Un);for(var G=0;G<y.length;G++){var H=y[G];if(!_i.default.isTimeStampFrame(H)){var ee=new d(S,k,"");ee.value=H,this.id3Track.addCue(ee)}}}}},l.onLiveBackBufferReached=function(n){var a=n.bufferEnd,u=this.id3Track;if(!(!u||!u.cues||!u.cues.length)){var d=_a(u.cues,a);if(d)for(;u.cues[0]!==d;)u.removeCue(u.cues[0])}},c}(D),ro=wi;function no(){var h=M();if(!h)return!1;var c=self.SourceBuffer||self.WebKitSourceBuffer,l=h&&typeof h.isTypeSupported=="function"&&h.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),s=!c||c.prototype&&typeof c.prototype.appendBuffer=="function"&&typeof c.prototype.remove=="function";return!!l&&!!s}var dp=function(){function h(l){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=l?Math.exp(Math.log(.5)/l):0,this.estimate_=0,this.totalWeight_=0}var c=h.prototype;return c.sample=function(s,n){var a=Math.pow(this.alpha_,s);this.estimate_=n*(1-a)+a*this.estimate_,this.totalWeight_+=s},c.getTotalWeight=function(){return this.totalWeight_},c.getEstimate=function(){if(this.alpha_){var s=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/s}else return this.estimate_},h}(),Uu=dp,hp=function(){function h(l,s,n,a){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=l,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Uu(s),this.fast_=new Uu(n)}var c=h.prototype;return c.sample=function(s,n){s=Math.max(s,this.minDelayMs_);var a=8*n,u=s/1e3,d=a/u;this.fast_.sample(u,d),this.slow_.sample(u,d)},c.canEstimate=function(){var s=this.fast_;return s&&s.getTotalWeight()>=this.minWeight_},c.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},c.destroy=function(){},h}(),pp=hp;function Gu(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function gp(h,c,l){return c&&Gu(h.prototype,c),l&&Gu(h,l),h}function vp(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function mp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var yp=window,xp=yp.performance,Ep=function(h){mp(c,h);function c(s){var n;return n=h.call(this,s,g.default.FRAG_LOADING,g.default.FRAG_LOADED,g.default.FRAG_BUFFERED,g.default.ERROR)||this,n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=s,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(vp(n)),n}var l=c.prototype;return l.destroy=function(){this.clearTimer(),D.prototype.destroy.call(this)},l.onFragLoading=function(n){var a=n.frag;if(a.type==="main"&&(this.timer||(this.fragCurrent=a,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var u=this.hls,d=u.config,v=a.level,y=u.levels[v].details.live,S,k;y?(S=d.abrEwmaFastLive,k=d.abrEwmaSlowLive):(S=d.abrEwmaFastVoD,k=d.abrEwmaSlowVoD),this._bwEstimator=new pp(u,k,S,d.abrEwmaDefaultEstimate)}},l._abandonRulesCheck=function(){var n=this.hls,a=n.media,u=this.fragCurrent;if(u){var d=u.loader;if(!d||d.stats&&d.stats.aborted){E.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}var v=d.stats;if(a&&v&&(!a.paused&&a.playbackRate!==0||!a.readyState)&&u.autoLevel&&u.level){var y=xp.now()-v.trequest,S=Math.abs(a.playbackRate);if(y>500*u.duration/S){var k=n.levels,L=Math.max(1,v.bw?v.bw/8:v.loaded*1e3/y),G=k[u.level];if(!G)return;var H=G.realBitrate?Math.max(G.realBitrate,G.bitrate):G.bitrate,ee=v.total?v.total:Math.max(v.loaded,Math.round(u.duration*H/8)),ae=a.currentTime,he=(ee-v.loaded)/L,fe=(O.bufferInfo(a,ae,n.config.maxBufferHole).end-ae)/S;if(fe<2*u.duration/S&&he>fe){var xe=n.minAutoLevel,Ee,Ce;for(Ce=u.level-1;Ce>xe;Ce--){var et=k[Ce].realBitrate?Math.max(k[Ce].realBitrate,k[Ce].bitrate):k[Ce].bitrate,$t=u.duration*et/(8*.8*L);if($t<fe)break}Ee<he&&(E.logger.warn("loading too slow, abort fragment loading and switch to level "+Ce+":fragLoadedDelay["+Ce+"]<fragLoadedDelay["+(u.level-1)+"];bufferStarvationDelay:"+Ee.toFixed(1)+"<"+he.toFixed(1)+":"+fe.toFixed(1)),n.nextLoadLevel=Ce,this._bwEstimator.sample(y,v.loaded),d.abort(),this.clearTimer(),n.trigger(g.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:u,stats:v}))}}}}},l.onFragLoaded=function(n){var a=n.frag;if(a.type==="main"&&Object(w.isFiniteNumber)(a.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=a.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var u=this.hls.levels[a.level],d=(u.loaded?u.loaded.bytes:0)+n.stats.loaded,v=(u.loaded?u.loaded.duration:0)+n.frag.duration;u.loaded={bytes:d,duration:v},u.realBitrate=Math.round(8*d/v)}if(n.frag.bitrateTest){var y=n.stats;y.tparsed=y.tbuffered=y.tload,this.onFragBuffered(n)}}},l.onFragBuffered=function(n){var a=n.stats,u=n.frag;if(a.aborted!==!0&&u.type==="main"&&Object(w.isFiniteNumber)(u.sn)&&(!u.bitrateTest||a.tload===a.tbuffered)){var d=a.tparsed-a.trequest;E.logger.log("latency/loading/parsing/append/kbps:"+Math.round(a.tfirst-a.trequest)+"/"+Math.round(a.tload-a.tfirst)+"/"+Math.round(a.tparsed-a.tload)+"/"+Math.round(a.tbuffered-a.tparsed)+"/"+Math.round(8*a.loaded/(a.tbuffered-a.trequest))),this._bwEstimator.sample(d,a.loaded),a.bwEstimate=this._bwEstimator.getEstimate(),u.bitrateTest?this.bitrateTestDelay=d/1e3:this.bitrateTestDelay=0}},l.onError=function(n){switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer();break}},l.clearTimer=function(){clearInterval(this.timer),this.timer=null},l._findBestLevel=function(n,a,u,d,v,y,S,k,L){for(var G=v;G>=d;G--){var H=L[G];if(H){var ee=H.details,ae=ee?ee.totalduration/ee.fragments.length:a,he=ee?ee.live:!1,fe=void 0;G<=n?fe=S*u:fe=k*u;var xe=L[G].realBitrate?Math.max(L[G].realBitrate,L[G].bitrate):L[G].bitrate,Ee=xe*ae/fe;if(E.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+G+"/"+Math.round(fe)+"/"+xe+"/"+ae+"/"+y+"/"+Ee),fe>xe&&(!Ee||he&&!this.bitrateTestDelay||Ee<y))return G}}return-1},gp(c,[{key:"nextAutoLevel",get:function(){var n=this._nextAutoLevel,a=this._bwEstimator;if(n!==-1&&(!a||!a.canEstimate()))return n;var u=this._nextABRAutoLevel;return n!==-1&&(u=Math.min(n,u)),u},set:function(n){this._nextAutoLevel=n}},{key:"_nextABRAutoLevel",get:function(){var n=this.hls,a=n.maxAutoLevel,u=n.levels,d=n.config,v=n.minAutoLevel,y=n.media,S=this.lastLoadedFragLevel,k=this.fragCurrent?this.fragCurrent.duration:0,L=y?y.currentTime:0,G=y&&y.playbackRate!==0?Math.abs(y.playbackRate):1,H=this._bwEstimator?this._bwEstimator.getEstimate():d.abrEwmaDefaultEstimate,ee=(O.bufferInfo(y,L,d.maxBufferHole).end-L)/G,ae=this._findBestLevel(S,k,H,v,a,ee,d.abrBandWidthFactor,d.abrBandWidthUpFactor,u);if(ae>=0)return ae;E.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var he=k?Math.min(k,d.maxStarvationDelay):d.maxStarvationDelay,fe=d.abrBandWidthFactor,xe=d.abrBandWidthUpFactor;if(ee===0){var Ee=this.bitrateTestDelay;if(Ee){var Ce=k?Math.min(k,d.maxLoadingDelay):d.maxLoadingDelay;he=Ce-Ee,E.logger.trace("bitrate test took "+Math.round(1e3*Ee)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*he)+" ms"),fe=xe=1}}return ae=this._findBestLevel(S,k,H,v,a,ee+he,fe,xe,u),Math.max(ae,0)}}]),c}(D),Sp=Ep;function Tp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var ju=M(),_p=function(h){Tp(c,h);function c(s){var n;return n=h.call(this,s,g.default.MEDIA_ATTACHING,g.default.MEDIA_DETACHING,g.default.MANIFEST_PARSED,g.default.BUFFER_RESET,g.default.BUFFER_APPENDING,g.default.BUFFER_CODECS,g.default.BUFFER_EOS,g.default.BUFFER_FLUSHING,g.default.LEVEL_PTS_UPDATED,g.default.LEVEL_UPDATED)||this,n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){E.logger.log("media source opened"),n.hls.trigger(g.default.MEDIA_ATTACHED,{media:n.media});var a=n.mediaSource;a&&a.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){E.logger.log("media source closed")},n._onMediaSourceEnded=function(){E.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var a=n.sourceBuffer.audio;E.logger.warn("change mpeg audio timestamp offset from "+a.timestampOffset+" to "+n.audioTimestampOffset),a.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var u=n.parent,d=n.segments.reduce(function(L,G){return G.parent===u?L+1:L},0),v={},y=n.sourceBuffer;for(var S in y){var k=y[S];if(!k)throw Error("handling source buffer update end error: source buffer for "+S+" uninitilized and unable to update buffered TimeRanges.");v[S]=k.buffered}n.hls.trigger(g.default.BUFFER_APPENDED,{parent:u,pending:d,timeRanges:v}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),d===0&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(a){E.logger.error("sourceBuffer error:",a),n.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=s.config,n}var l=c.prototype;return l.destroy=function(){D.prototype.destroy.call(this)},l.onLevelPtsUpdated=function(n){var a=n.type,u=this.tracks.audio;if(a==="audio"&&u&&u.container==="audio/mpeg"){var d=this.sourceBuffer.audio;if(!d)throw Error("Level PTS Updated and source buffer for audio uninitalized");var v=Math.abs(d.timestampOffset-n.start);if(v>.1){var y=d.updating;try{d.abort()}catch(S){E.logger.warn("can not abort audio buffer: "+S)}y?this.audioTimestampOffset=n.start:(E.logger.warn("change mpeg audio timestamp offset from "+d.timestampOffset+" to "+n.start),d.timestampOffset=n.start)}}},l.onManifestParsed=function(n){var a=2;(n.audio&&!n.video||!n.altAudio)&&(a=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=a,E.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},l.onMediaAttaching=function(n){var a=this.media=n.media;if(a&&ju){var u=this.mediaSource=new ju;u.addEventListener("sourceopen",this._onMediaSourceOpen),u.addEventListener("sourceended",this._onMediaSourceEnded),u.addEventListener("sourceclose",this._onMediaSourceClose),a.src=window.URL.createObjectURL(u),this._objectUrl=a.src}},l.onMediaDetaching=function(){E.logger.log("media source detaching");var n=this.mediaSource;if(n){if(n.readyState==="open")try{n.endOfStream()}catch(a){E.logger.warn("onMediaDetaching:"+a.message+" while calling endOfStream")}n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):E.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(g.default.MEDIA_DETACHED)},l.checkPendingTracks=function(){var n=this.bufferCodecEventsExpected,a=this.pendingTracks,u=Object.keys(a).length;(u&&!n||u===2)&&(this.createSourceBuffers(a),this.pendingTracks={},this.doAppending())},l.onBufferReset=function(){var n=this.sourceBuffer;for(var a in n){var u=n[a];try{u&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(u),u.removeEventListener("updateend",this._onSBUpdateEnd),u.removeEventListener("error",this._onSBUpdateError))}catch{}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},l.onBufferCodecs=function(n){var a=this;Object.keys(this.sourceBuffer).length||(Object.keys(n).forEach(function(u){a.pendingTracks[u]=n[u]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},l.createSourceBuffers=function(n){var a=this.sourceBuffer,u=this.mediaSource;if(!u)throw Error("createSourceBuffers called when mediaSource was null");for(var d in n)if(!a[d]){var v=n[d];if(!v)throw Error("source buffer exists for track "+d+", however track does not");var y=v.levelCodec||v.codec,S=v.container+";codecs="+y;E.logger.log("creating sourceBuffer("+S+")");try{var k=a[d]=u.addSourceBuffer(S);k.addEventListener("updateend",this._onSBUpdateEnd),k.addEventListener("error",this._onSBUpdateError),this.tracks[d]={buffer:k,codec:y,id:v.id,container:v.container,levelCodec:v.levelCodec}}catch(L){E.logger.error("error while trying to add sourceBuffer:"+L.message),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:L,mimeType:S})}}this.hls.trigger(g.default.BUFFER_CREATED,{tracks:this.tracks})},l.onBufferAppending=function(n){this._needsFlush||(this.segments?this.segments.push(n):this.segments=[n],this.doAppending())},l.onBufferEos=function(n){for(var a in this.sourceBuffer)if(!n.type||n.type===a){var u=this.sourceBuffer[a];u&&!u.ended&&(u.ended=!0,E.logger.log(a+" sourceBuffer now EOS"))}this.checkEos()},l.checkEos=function(){var n=this.sourceBuffer,a=this.mediaSource;if(!a||a.readyState!=="open"){this._needsEos=!1;return}for(var u in n){var d=n[u];if(d){if(!d.ended)return;if(d.updating){this._needsEos=!0;return}}}E.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{a.endOfStream()}catch{E.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},l.onBufferFlushing=function(n){n.type?this.flushRange.push({start:n.startOffset,end:n.endOffset,type:n.type}):(this.flushRange.push({start:n.startOffset,end:n.endOffset,type:"video"}),this.flushRange.push({start:n.startOffset,end:n.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},l.flushLiveBackBuffer=function(){if(this._live){var n=this.config.liveBackBufferLength;if(!(!isFinite(n)||n<0)){if(!this.media){E.logger.error("flushLiveBackBuffer called without attaching media");return}for(var a=this.media.currentTime,u=this.sourceBuffer,d=Object.keys(u),v=a-Math.max(n,this._levelTargetDuration),y=d.length-1;y>=0;y--){var S=d[y],k=u[S];if(k){var L=k.buffered;L.length>0&&v>L.start(0)&&this.removeBufferRange(S,k,0,v)&&this.hls.trigger(g.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:v})}}}}},l.onLevelUpdated=function(n){var a=n.details;a.fragments.length>0&&(this._levelDuration=a.totalduration+a.fragments[0].start,this._levelTargetDuration=a.averagetargetduration||a.targetduration||10,this._live=a.live,this.updateMediaElementDuration())},l.updateMediaElementDuration=function(){var n=this.config,a;if(!(this._levelDuration===null||!this.media||!this.mediaSource||!this.sourceBuffer||this.media.readyState===0||this.mediaSource.readyState!=="open")){for(var u in this.sourceBuffer){var d=this.sourceBuffer[u];if(d&&d.updating===!0)return}a=this.media.duration,this._msDuration===null&&(this._msDuration=this.mediaSource.duration),this._live===!0&&n.liveDurationInfinity===!0?(E.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>a||!Object(w.isFiniteNumber)(a))&&(E.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},l.doFlush=function(){for(;this.flushRange.length;){var n=this.flushRange[0];if(this.flushBuffer(n.start,n.end,n.type))this.flushRange.shift(),this.flushBufferCounter=0;else{this._needsFlush=!0;return}}if(this.flushRange.length===0){this._needsFlush=!1;var a=0,u=this.sourceBuffer;try{for(var d in u){var v=u[d];v&&(a+=v.buffered.length)}}catch{E.logger.error("error while accessing sourceBuffer.buffered")}this.appended=a,this.hls.trigger(g.default.BUFFER_FLUSHED)}},l.doAppending=function(){var n=this.config,a=this.hls,u=this.segments,d=this.sourceBuffer;if(Object.keys(d).length){if(!this.media||this.media.error){this.segments=[],E.logger.error("trying to append although a media error occured, flush segment and abort");return}if(!this.appending){var v=u.shift();if(v)try{var y=d[v.type];if(!y){this._onSBUpdateEnd();return}if(y.updating){u.unshift(v);return}y.ended=!1,this.parent=v.parent,y.appendBuffer(v.data),this.appendError=0,this.appended++,this.appending=!0}catch(k){E.logger.error("error while trying to append buffer:"+k.message),u.unshift(v);var S={type:m.ErrorTypes.MEDIA_ERROR,parent:v.parent,details:"",fatal:!1};k.code===22?(this.segments=[],S.details=m.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,S.details=m.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>n.appendErrorMaxRetry&&(E.logger.log("fail "+n.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],S.fatal=!0)),a.trigger(g.default.ERROR,S)}}}},l.flushBuffer=function(n,a,u){var d=this.sourceBuffer;if(!Object.keys(d).length)return!0;var v="null";if(this.media&&(v=this.media.currentTime.toFixed(3)),E.logger.log("flushBuffer,pos/start/end: "+v+"/"+n+"/"+a),this.flushBufferCounter>=this.appended)return E.logger.warn("abort flushing too many retries"),!0;var y=d[u];if(y){if(y.ended=!1,y.updating)return E.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(u,y,n,a))return this.flushBufferCounter++,!1}return E.logger.log("buffer flushed"),!0},l.removeBufferRange=function(n,a,u,d){try{for(var v=0;v<a.buffered.length;v++){var y=a.buffered.start(v),S=a.buffered.end(v),k=Math.max(y,u),L=Math.min(S,d);if(Math.min(L,S)-k>.5){var G="null";return this.media&&(G=this.media.currentTime.toString()),E.logger.log("sb remove "+n+" ["+k+","+L+"], of ["+y+","+S+"], pos:"+G),a.remove(k,L),!0}}}catch(H){E.logger.warn("removeBufferRange failed",H)}return!1},c}(D),wp=_p;function Ku(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function Ap(h,c,l){return c&&Ku(h.prototype,c),l&&Ku(h,l),h}function Rp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var kp=function(h){Rp(c,h);function c(s){var n;return n=h.call(this,s,g.default.FPS_DROP_LEVEL_CAPPING,g.default.MEDIA_ATTACHING,g.default.MANIFEST_PARSED,g.default.LEVELS_UPDATED,g.default.BUFFER_CODECS,g.default.MEDIA_DETACHING)||this,n.autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n.clientRect=null,n}var l=c.prototype;return l.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.clientRect=null,this.stopCapping())},l.onFpsDropLevelCapping=function(n){c.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},l.onMediaAttaching=function(n){this.media=n.media instanceof window.HTMLVideoElement?n.media:null},l.onManifestParsed=function(n){var a=this.hls;this.restrictedLevels=[],this.levels=n.levels,this.firstLevel=n.firstLevel,a.config.capLevelToPlayerSize&&n.video&&this.startCapping()},l.onBufferCodecs=function(n){var a=this.hls;a.config.capLevelToPlayerSize&&n.video&&this.startCapping()},l.onLevelsUpdated=function(n){this.levels=n.levels},l.onMediaDetaching=function(){this.stopCapping()},l.detectPlayerSize=function(){if(this.media){var n=this.levels?this.levels.length:0;if(n){var a=this.hls;a.autoLevelCapping=this.getMaxLevel(n-1),a.autoLevelCapping>this.autoLevelCapping&&a.streamController.nextLevelSwitch(),this.autoLevelCapping=a.autoLevelCapping}}},l.getMaxLevel=function(n){var a=this;if(!this.levels)return-1;var u=this.levels.filter(function(d,v){return c.isLevelAllowed(v,a.restrictedLevels)&&v<=n});return this.clientRect=null,c.getMaxLevelByMediaSize(u,this.mediaWidth,this.mediaHeight)},l.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},l.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},l.getDimensions=function(){if(this.clientRect)return this.clientRect;var n=this.media,a={width:0,height:0};if(n){var u=n.getBoundingClientRect();a.width=u.width,a.height=u.height,!a.width&&!a.height&&(a.width=u.right-u.left||n.width||0,a.height=u.bottom-u.top||n.height||0)}return this.clientRect=a,a},c.isLevelAllowed=function(n,a){return a===void 0&&(a=[]),a.indexOf(n)===-1},c.getMaxLevelByMediaSize=function(n,a,u){if(!n||n&&!n.length)return-1;for(var d=function(L,G){return G?L.width!==G.width||L.height!==G.height:!0},v=n.length-1,y=0;y<n.length;y+=1){var S=n[y];if((S.width>=a||S.height>=u)&&d(S,n[y+1])){v=y;break}}return v},Ap(c,[{key:"mediaWidth",get:function(){return this.getDimensions().width*c.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*c.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var n=1;try{n=window.devicePixelRatio}catch{}return n}}]),c}(D),Lp=kp;function Dp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Cp=window,Ip=Cp.performance,Op=function(h){Dp(c,h);function c(s){return h.call(this,s,g.default.MEDIA_ATTACHING)||this}var l=c.prototype;return l.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},l.onMediaAttaching=function(n){var a=this.hls.config;if(a.capLevelOnFPSDrop){var u=this.video=n.media instanceof window.HTMLVideoElement?n.media:null;typeof u.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),a.fpsDroppedMonitoringPeriod)}},l.checkFPS=function(n,a,u){var d=Ip.now();if(a){if(this.lastTime){var v=d-this.lastTime,y=u-this.lastDroppedFrames,S=a-this.lastDecodedFrames,k=1e3*y/v,L=this.hls;if(L.trigger(g.default.FPS_DROP,{currentDropped:y,currentDecoded:S,totalDroppedFrames:u}),k>0&&y>L.config.fpsDroppedMonitoringThreshold*S){var G=L.currentLevel;E.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+G),G>0&&(L.autoLevelCapping===-1||L.autoLevelCapping>=G)&&(G=G-1,L.trigger(g.default.FPS_DROP_LEVEL_CAPPING,{level:G,droppedLevel:L.currentLevel}),L.autoLevelCapping=G,L.streamController.nextLevelSwitch())}}this.lastTime=d,this.lastDroppedFrames=u,this.lastDecodedFrames=a}},l.checkFPSInterval=function(){var n=this.video;if(n)if(this.isVideoPlaybackQualityAvailable){var a=n.getVideoPlaybackQuality();this.checkFPS(n,a.totalVideoFrames,a.droppedVideoFrames)}else this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount)},c}(D),Pp=Op,Fp=function(){function h(l){l&&l.xhrSetup&&(this.xhrSetup=l.xhrSetup)}var c=h.prototype;return c.destroy=function(){this.abort(),this.loader=null},c.abort=function(){var s=this.loader;s&&s.readyState!==4&&(this.stats.aborted=!0,s.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},c.load=function(s,n,a){this.context=s,this.config=n,this.callbacks=a,this.stats={trequest:window.performance.now(),retry:0},this.retryDelay=n.retryDelay,this.loadInternal()},c.loadInternal=function(){var s,n=this.context;s=this.loader=new window.XMLHttpRequest;var a=this.stats;a.tfirst=0,a.loaded=0;var u=this.xhrSetup;try{if(u)try{u(s,n.url)}catch{s.open("GET",n.url,!0),u(s,n.url)}s.readyState||s.open("GET",n.url,!0)}catch(d){this.callbacks.onError({code:s.status,text:d.message},n,s);return}n.rangeEnd&&s.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),s.onreadystatechange=this.readystatechange.bind(this),s.onprogress=this.loadprogress.bind(this),s.responseType=n.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),s.send()},c.readystatechange=function(s){var n=s.currentTarget,a=n.readyState,u=this.stats,d=this.context,v=this.config;if(!u.aborted&&a>=2)if(window.clearTimeout(this.requestTimeout),u.tfirst===0&&(u.tfirst=Math.max(window.performance.now(),u.trequest)),a===4){var y=n.status;if(y>=200&&y<300){u.tload=Math.max(u.tfirst,window.performance.now());var S,k;d.responseType==="arraybuffer"?(S=n.response,k=S.byteLength):(S=n.responseText,k=S.length),u.loaded=u.total=k;var L={url:n.responseURL,data:S};this.callbacks.onSuccess(L,u,d,n)}else u.retry>=v.maxRetry||y>=400&&y<499?(E.logger.error(y+" while loading "+d.url),this.callbacks.onError({code:y,text:n.statusText},d,n)):(E.logger.warn(y+" while loading "+d.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,v.maxRetryDelay),u.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),v.timeout)},c.loadtimeout=function(){E.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},c.loadprogress=function(s){var n=s.currentTarget,a=this.stats;a.loaded=s.loaded,s.lengthComputable&&(a.total=s.total);var u=this.callbacks.onProgress;u&&u(a,this.context,null,n)},h}(),Np=Fp;function zu(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function Mp(h,c,l){return c&&zu(h.prototype,c),l&&zu(h,l),h}function bp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Bp=function(h){bp(c,h);function c(s){var n;return n=h.call(this,s,g.default.MANIFEST_LOADING,g.default.MANIFEST_PARSED,g.default.AUDIO_TRACK_LOADED,g.default.AUDIO_TRACK_SWITCHED,g.default.LEVEL_LOADED,g.default.ERROR)||this,n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}var l=c.prototype;return l.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},l.onManifestParsed=function(n){var a=this.tracks=n.audioTracks||[];this.hls.trigger(g.default.AUDIO_TRACKS_UPDATED,{audioTracks:a}),this._selectAudioGroup(this.hls.nextLoadLevel)},l.onAudioTrackLoaded=function(n){if(n.id>=this.tracks.length){E.logger.warn("Invalid audio track id:",n.id);return}if(E.logger.log("audioTrack "+n.id+" loaded"),this.tracks[n.id].details=n.details,n.details.live&&!this.hasInterval()){var a=n.details.targetduration*1e3;this.setInterval(a)}!n.details.live&&this.hasInterval()&&this.clearInterval()},l.onAudioTrackSwitched=function(n){var a=this.tracks[n.id].groupId;a&&this.audioGroupId!==a&&(this.audioGroupId=a)},l.onLevelLoaded=function(n){this._selectAudioGroup(n.level)},l.onError=function(n){n.type===m.ErrorTypes.NETWORK_ERROR&&(n.fatal&&this.clearInterval(),n.details===m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(E.logger.warn("Network failure on audio-track id:",n.context.id),this._handleLoadError()))},l._setAudioTrack=function(n){if(this._trackId===n&&this.tracks[this._trackId].details){E.logger.debug("Same id as current audio-track passed, and track details available -> no-op");return}if(n<0||n>=this.tracks.length){E.logger.warn("Invalid id passed to audio-track controller");return}var a=this.tracks[n];E.logger.log("Now switching to audio-track index "+n),this.clearInterval(),this._trackId=n;var u=a.url,d=a.type,v=a.id;this.hls.trigger(g.default.AUDIO_TRACK_SWITCHING,{id:v,type:d,url:u}),this._loadTrackDetailsIfNeeded(a)},l.doTick=function(){this._updateTrack(this._trackId)},l._selectAudioGroup=function(n){var a=this.hls.levels[n];if(!(!a||!a.audioGroupIds)){var u=a.audioGroupIds[a.urlId];this.audioGroupId!==u&&(this.audioGroupId=u,this._selectInitialAudioTrack())}},l._selectInitialAudioTrack=function(){var n=this,a=this.tracks;if(a.length){var u=this.tracks[this._trackId],d=null;if(u&&(d=u.name),this._selectDefaultTrack){var v=a.filter(function(k){return k.default});v.length?a=v:E.logger.warn("No default audio tracks defined")}var y=!1,S=function(){a.forEach(function(L){y||(!n.audioGroupId||L.groupId===n.audioGroupId)&&(!d||d===L.name)&&(n._setAudioTrack(L.id),y=!0)})};S(),y||(d=null,S()),y||(E.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},l._needsTrackLoading=function(n){var a=n.details,u=n.url;return!a||a.live?!!u:!1},l._loadTrackDetailsIfNeeded=function(n){if(this._needsTrackLoading(n)){var a=n.url,u=n.id;E.logger.log("loading audio-track playlist for id: "+u),this.hls.trigger(g.default.AUDIO_TRACK_LOADING,{url:a,id:u})}},l._updateTrack=function(n){if(!(n<0||n>=this.tracks.length)){this.clearInterval(),this._trackId=n,E.logger.log("trying to update audio-track "+n);var a=this.tracks[n];this._loadTrackDetailsIfNeeded(a)}},l._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var n=this._trackId,a=this.tracks[n],u=a.name,d=a.language,v=a.groupId;E.logger.warn("Loading failed on audio track id: "+n+", group-id: "+v+', name/language: "'+u+'" / "'+d+'"');for(var y=n,S=0;S<this.tracks.length;S++)if(!this.trackIdBlacklist[S]){var k=this.tracks[S];if(k.name===u){y=S;break}}if(y===n){E.logger.warn('No fallback audio-track found for name/language: "'+u+'" / "'+d+'"');return}E.logger.log("Attempting audio-track fallback id:",y,"group-id:",this.tracks[y].groupId),this._setAudioTrack(y)},Mp(c,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(n){this._setAudioTrack(n),this._selectDefaultTrack=!1}}]),c}(Rr),Up=Bp;function Vu(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function Gp(h,c,l){return c&&Vu(h.prototype,c),l&&Vu(h,l),h}function jp(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var Kp=window,Ai=Kp.performance,Hu=100,zp=function(h){jp(c,h);function c(s,n){var a;return a=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.AUDIO_TRACKS_UPDATED,g.default.AUDIO_TRACK_SWITCHING,g.default.AUDIO_TRACK_LOADED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.BUFFER_RESET,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED,g.default.INIT_PTS_FOUND)||this,a.fragmentTracker=n,a.config=s.config,a.audioCodecSwap=!1,a._state=$.STOPPED,a.initPTS=[],a.waitingFragment=null,a.videoTrackCC=null,a.waitingVideoCC=null,a}var l=c.prototype;return l.onInitPtsFound=function(n){var a=n.id,u=n.frag.cc,d=n.initPTS;a==="main"&&(this.initPTS[u]=d,this.videoTrackCC=u,E.logger.log("InitPTS for cc: "+u+" found from main: "+d),this.state===$.WAITING_INIT_PTS&&this.tick())},l.startLoad=function(n){if(this.tracks){var a=this.lastCurrentTime;this.stopLoad(),this.setInterval(Hu),this.fragLoadError=0,a>0&&n===-1?(E.logger.log("audio:override startPosition with lastCurrentTime @"+a.toFixed(3)),this.state=$.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:n,this.state=$.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=n,this.state=$.STOPPED},l.doTick=function(){var n,a,u,d=this.hls,v=d.config;switch(this.state){case $.ERROR:case $.PAUSED:case $.BUFFER_FLUSHING:break;case $.STARTING:this.state=$.WAITING_TRACK,this.loadedmetadata=!1;break;case $.IDLE:var y=this.tracks;if(!y||!this.media&&(this.startFragRequested||!v.startFragPrefetch))break;if(this.loadedmetadata)n=this.media.currentTime;else if(n=this.nextLoadPosition,n===void 0)break;var S=this.mediaBuffer?this.mediaBuffer:this.media,k=this.videoBuffer?this.videoBuffer:this.media,L=n<v.maxBufferHole?Math.max(Kt,v.maxBufferHole):v.maxBufferHole,G=O.bufferInfo(S,n,L),H=O.bufferInfo(k,n,L),ee=G.len,ae=G.end,he=this.fragPrevious,fe=Math.min(v.maxBufferLength,v.maxMaxBufferLength),xe=Math.max(fe,H.len),Ee=this.audioSwitch,Ce=this.trackId;if((ee<xe||Ee)&&Ce<y.length){if(u=y[Ce].details,typeof u>"u"){this.state=$.WAITING_TRACK;break}if(!Ee&&this._streamEnded(G,u)){this.hls.trigger(g.default.BUFFER_EOS,{type:"audio"}),this.state=$.ENDED;return}var et=u.fragments,$t=et.length,St=et[0].start,Mr=et[$t-1].start+et[$t-1].duration,ye;if(Ee){if(u.live&&!u.PTSKnown)E.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),ae=0;else if(ae=n,u.PTSKnown&&n<St)if(G.end>St||G.nextStart)E.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=St+.05;else return}if(u.initSegment&&!u.initSegment.data)ye=u.initSegment;else if(ae<=St){if(ye=et[0],this.videoTrackCC!==null&&ye.cc!==this.videoTrackCC&&(ye=Me(et,this.videoTrackCC)),u.live&&ye.loadIdx&&ye.loadIdx===this.fragLoadIdx){var Ae=G.nextStart?G.nextStart:St;E.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(Ae+.05)),this.media.currentTime=Ae+.05;return}}else{var at,Kn=v.maxFragLookUpTolerance,zn=he?et[he.sn-et[0].sn+1]:void 0;ae<Mr?(ae>Mr-Kn&&(Kn=0),zn&&!Ye(ae,Kn,zn)?at=zn:at=K.search(et,function(b0){return Ye(ae,Kn,b0)})):at=et[$t-1],at&&(ye=at,St=at.start,he&&ye.level===he.level&&ye.sn===he.sn&&(ye.sn<u.endSN?(ye=et[ye.sn+1-u.startSN],this.fragmentTracker.getState(ye)!==ht.OK&&E.logger.log("SN just loaded, load next one: "+ye.sn)):ye=null))}ye&&(ye.encrypted?(E.logger.log("Loading key for "+ye.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+Ce),this.state=$.KEY_LOADING,d.trigger(g.default.KEY_LOADING,{frag:ye})):(this.fragCurrent=ye,(Ee||this.fragmentTracker.getState(ye)===ht.NOT_LOADED)&&(E.logger.log("Loading "+ye.sn+", cc: "+ye.cc+" of ["+u.startSN+" ,"+u.endSN+"],track "+Ce+", "+(this.loadedmetadata?"currentTime":"nextLoadPosition")+": "+n+", bufferEnd: "+ae.toFixed(3)),ye.sn!=="initSegment"&&(this.startFragRequested=!0),Object(w.isFiniteNumber)(ye.sn)&&(this.nextLoadPosition=ye.start+ye.duration),d.trigger(g.default.FRAG_LOADING,{frag:ye}),this.state=$.FRAG_LOADING)))}break;case $.WAITING_TRACK:a=this.tracks[this.trackId],a&&a.details&&(this.state=$.IDLE);break;case $.FRAG_LOADING_WAITING_RETRY:var Ri=Ai.now(),La=this.retryDate;S=this.media;var N0=S&&S.seeking;(!La||Ri>=La||N0)&&(E.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=$.IDLE);break;case $.WAITING_INIT_PTS:var ki=this.waitingFragment;if(ki){var fo=ki.frag.cc;if(this.initPTS[fo]!==void 0)this.waitingFragment=null,this.state=$.FRAG_LOADING,this.onFragLoaded(ki);else if(this.videoTrackCC!==this.waitingVideoCC)E.logger.log("Waiting fragment cc ("+fo+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var mf=O.bufferInfo(this.mediaBuffer,this.media.currentTime,v.maxBufferHole),M0=Ye(mf.end,v.maxFragLookUpTolerance,ki.frag);M0<0&&(E.logger.log("Waiting fragment cc ("+fo+") @ "+ki.frag.start+" cancelled because another fragment at "+mf.end+" is needed"),this.clearWaitingFragment())}}else this.state=$.IDLE;break}},l.clearWaitingFragment=function(){var n=this.waitingFragment;n&&(this.fragmentTracker.removeFragment(n.frag),this.waitingFragment=null,this.waitingVideoCC=null,this.state=$.IDLE)},l.onMediaAttached=function(n){var a=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),a.addEventListener("seeking",this.onvseeking),a.addEventListener("ended",this.onvended);var u=this.config;this.tracks&&u.autoStartLoad&&this.startLoad(u.startPosition)},l.onMediaDetaching=function(){var n=this.media;n&&n.ended&&(E.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},l.onAudioTracksUpdated=function(n){E.logger.log("audio tracks updated"),this.tracks=n.audioTracks},l.onAudioTrackSwitching=function(n){var a=!!n.url;this.trackId=n.id,this.fragCurrent=null,this.clearWaitingFragment(),this.state=$.PAUSED,a?this.setInterval(Hu):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),a&&(this.audioSwitch=!0,this.state=$.IDLE),this.tick()},l.onAudioTrackLoaded=function(n){var a=n.details,u=n.id,d=this.tracks[u],v=d.details,y=a.totalduration,S=0;if(E.logger.log("track "+u+" loaded ["+a.startSN+","+a.endSN+"],duration:"+y),a.live||v&&v.live?v&&a.fragments.length>0?(ve(v,a),S=a.fragments[0].start,a.PTSKnown?E.logger.log("live audio playlist sliding:"+S.toFixed(3)):E.logger.log("live audio playlist - outdated PTS, unknown sliding")):(a.PTSKnown=!1,E.logger.log("live audio playlist - first load, unknown sliding")):a.PTSKnown=!1,d.details=a,!this.startFragRequested){if(this.startPosition===-1){var k=a.startTimeOffset;Object(w.isFiniteNumber)(k)?(E.logger.log("start time offset found in playlist, adjust startPosition to "+k),this.startPosition=k):a.live?(this.startPosition=this.computeLivePosition(S,a),E.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===$.WAITING_TRACK&&(this.state=$.IDLE),this.tick()},l.onKeyLoaded=function(){this.state===$.KEY_LOADING&&(this.state=$.IDLE,this.tick())},l.onFragLoaded=function(n){var a=this.fragCurrent,u=n.frag;if(this.state===$.FRAG_LOADING&&a&&u.type==="audio"&&u.level===a.level&&u.sn===a.sn){var d=this.tracks[this.trackId],v=d.details,y=v.totalduration,S=a.level,k=a.sn,L=a.cc,G=this.config.defaultAudioCodec||d.audioCodec||"mp4a.40.2",H=this.stats=n.stats;if(k==="initSegment")this.state=$.IDLE,H.tparsed=H.tbuffered=Ai.now(),v.initSegment.data=n.payload,this.hls.trigger(g.default.FRAG_BUFFERED,{stats:H,frag:a,id:"audio"}),this.tick();else{this.state=$.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ne(this.hls,"audio"));var ee=this.initPTS[L],ae=v.initSegment?v.initSegment.data:[];if(ee!==void 0){this.pendingBuffering=!0,E.logger.log("Demuxing "+k+" of ["+v.startSN+" ,"+v.endSN+"],track "+S);var he=!1;this.demuxer.push(n.payload,ae,G,null,a,y,he,ee)}else E.logger.log("Unknown video PTS for cc "+L+", waiting for video PTS before demuxing audio frag "+k+" of ["+v.startSN+" ,"+v.endSN+"],track "+S),this.waitingFragment=n,this.waitingVideoCC=this.videoTrackCC,this.state=$.WAITING_INIT_PTS}}this.fragLoadError=0},l.onFragParsingInitSegment=function(n){var a=this.fragCurrent,u=n.frag;if(a&&n.id==="audio"&&u.sn===a.sn&&u.level===a.level&&this.state===$.PARSING){var d=n.tracks,v;if(d.video&&delete d.video,v=d.audio,v){v.levelCodec=v.codec,v.id=n.id,this.hls.trigger(g.default.BUFFER_CODECS,d),E.logger.log("audio track:audio,container:"+v.container+",codecs[level/parsed]=["+v.levelCodec+"/"+v.codec+"]");var y=v.initSegment;if(y){var S={type:"audio",data:y,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[S]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g.default.BUFFER_APPENDING,S))}this.tick()}}},l.onFragParsingData=function(n){var a=this,u=this.fragCurrent,d=n.frag;if(u&&n.id==="audio"&&n.type==="audio"&&d.sn===u.sn&&d.level===u.level&&this.state===$.PARSING){var v=this.trackId,y=this.tracks[v],S=this.hls;Object(w.isFiniteNumber)(n.endPTS)||(n.endPTS=n.startPTS+u.duration,n.endDTS=n.startDTS+u.duration),u.addElementaryStream(Y.AUDIO),E.logger.log("parsed "+n.type+",PTS:["+n.startPTS.toFixed(3)+","+n.endPTS.toFixed(3)+"],DTS:["+n.startDTS.toFixed(3)+"/"+n.endDTS.toFixed(3)+"],nb:"+n.nb),re(y.details,u,n.startPTS,n.endPTS);var k=this.media,L=!1;if(this.audioSwitch)if(k&&k.readyState){var G=k.currentTime;E.logger.log("switching audio track : currentTime:"+G),G>=n.startPTS&&(E.logger.log("switching audio track : flushing all audio"),this.state=$.BUFFER_FLUSHING,S.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),L=!0,this.audioSwitch=!1,S.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:v}))}else this.audioSwitch=!1,S.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:v});var H=this.pendingData;if(!H){E.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),S.trigger(g.default.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});return}this.audioSwitch||([n.data1,n.data2].forEach(function(ee){ee&&ee.length&&H.push({type:n.type,data:ee,parent:"audio",content:"data"})}),!L&&H.length&&(H.forEach(function(ee){a.state===$.PARSING&&(a.pendingBuffering=!0,a.hls.trigger(g.default.BUFFER_APPENDING,ee))}),this.pendingData=[],this.appended=!0)),this.tick()}},l.onFragParsed=function(n){var a=this.fragCurrent,u=n.frag;a&&n.id==="audio"&&u.sn===a.sn&&u.level===a.level&&this.state===$.PARSING&&(this.stats.tparsed=Ai.now(),this.state=$.PARSED,this._checkAppendedParsed())},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},l.onBufferCreated=function(n){var a=n.tracks.audio;a&&(this.mediaBuffer=a.buffer,this.loadedmetadata=!0),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer)},l.onBufferAppended=function(n){if(n.parent==="audio"){var a=this.state;(a===$.PARSING||a===$.PARSED)&&(this.pendingBuffering=n.pending>0,this._checkAppendedParsed())}},l._checkAppendedParsed=function(){if(this.state===$.PARSED&&(!this.appended||!this.pendingBuffering)){var n=this.fragCurrent,a=this.stats,u=this.hls;if(n){this.fragPrevious=n,a.tbuffered=Ai.now(),u.trigger(g.default.FRAG_BUFFERED,{stats:a,frag:n,id:"audio"});var d=this.mediaBuffer?this.mediaBuffer:this.media;d&&E.logger.log("audio buffered : "+Pe.toString(d.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,u.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=$.IDLE}this.tick()}},l.onError=function(n){var a=n.frag;if(!(a&&a.type!=="audio"))switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:var u=n.frag;if(u&&u.type!=="audio")break;if(!n.fatal){var d=this.fragLoadError;d?d++:d=1;var v=this.config;if(d<=v.fragLoadingMaxRetry){this.fragLoadError=d;var y=Math.min(Math.pow(2,d-1)*v.fragLoadingRetryDelay,v.fragLoadingMaxRetryTimeout);E.logger.warn("AudioStreamController: frag loading failed, retry in "+y+" ms"),this.retryDate=Ai.now()+y,this.state=$.FRAG_LOADING_WAITING_RETRY}else E.logger.error("AudioStreamController: "+n.details+" reaches max retry, redispatch as fatal ..."),n.fatal=!0,this.state=$.ERROR}break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==$.ERROR&&(this.state=n.fatal?$.ERROR:$.IDLE,E.logger.warn("AudioStreamController: "+n.details+" while loading frag, now switching to "+this.state+" state ..."));break;case m.ErrorDetails.BUFFER_FULL_ERROR:if(n.parent==="audio"&&(this.state===$.PARSING||this.state===$.PARSED)){var S=this.mediaBuffer,k=this.media.currentTime,L=S&&O.isBuffered(S,k)&&O.isBuffered(S,k+.5);if(L){var G=this.config;G.maxMaxBufferLength>=G.maxBufferLength&&(G.maxMaxBufferLength/=2,E.logger.warn("AudioStreamController: reduce max buffer length to "+G.maxMaxBufferLength+"s")),this.state=$.IDLE}else E.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=$.BUFFER_FLUSHING,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}break}},l.onBufferFlushed=function(){var n=this,a=this.pendingData;a&&a.length?(E.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),a.forEach(function(u){n.hls.trigger(g.default.BUFFER_APPENDING,u)}),this.appended=!0,this.pendingData=[],this.state=$.PARSED):(this.state=$.IDLE,this.fragPrevious=null,this.tick())},Gp(c,[{key:"state",set:function(n){if(this.state!==n){var a=this.state;this._state=n,E.logger.log("audio stream:"+a+"->"+n)}},get:function(){return this._state}}]),c}(Ft),Vp=zp,Wu=function(){if(typeof window<"u"&&window.VTTCue)return window.VTTCue;var h="auto",c={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0};function s(d){if(typeof d!="string")return!1;var v=c[d.toLowerCase()];return v?d.toLowerCase():!1}function n(d){if(typeof d!="string")return!1;var v=l[d.toLowerCase()];return v?d.toLowerCase():!1}function a(d){for(var v=1;v<arguments.length;v++){var y=arguments[v];for(var S in y)d[S]=y[S]}return d}function u(d,v,y){var S=this,k={};k.enumerable=!0,S.hasBeenReset=!1;var L="",G=!1,H=d,ee=v,ae=y,he=null,fe="",xe=!0,Ee="auto",Ce="start",et=50,$t="middle",St=50,Mr="middle";Object.defineProperty(S,"id",a({},k,{get:function(){return L},set:function(Ae){L=""+Ae}})),Object.defineProperty(S,"pauseOnExit",a({},k,{get:function(){return G},set:function(Ae){G=!!Ae}})),Object.defineProperty(S,"startTime",a({},k,{get:function(){return H},set:function(Ae){if(typeof Ae!="number")throw new TypeError("Start time must be set to a number.");H=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"endTime",a({},k,{get:function(){return ee},set:function(Ae){if(typeof Ae!="number")throw new TypeError("End time must be set to a number.");ee=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"text",a({},k,{get:function(){return ae},set:function(Ae){ae=""+Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"region",a({},k,{get:function(){return he},set:function(Ae){he=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"vertical",a({},k,{get:function(){return fe},set:function(Ae){var at=s(Ae);if(at===!1)throw new SyntaxError("An invalid or illegal string was specified.");fe=at,this.hasBeenReset=!0}})),Object.defineProperty(S,"snapToLines",a({},k,{get:function(){return xe},set:function(Ae){xe=!!Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"line",a({},k,{get:function(){return Ee},set:function(Ae){if(typeof Ae!="number"&&Ae!==h)throw new SyntaxError("An invalid number or illegal string was specified.");Ee=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"lineAlign",a({},k,{get:function(){return Ce},set:function(Ae){var at=n(Ae);if(!at)throw new SyntaxError("An invalid or illegal string was specified.");Ce=at,this.hasBeenReset=!0}})),Object.defineProperty(S,"position",a({},k,{get:function(){return et},set:function(Ae){if(Ae<0||Ae>100)throw new Error("Position must be between 0 and 100.");et=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"positionAlign",a({},k,{get:function(){return $t},set:function(Ae){var at=n(Ae);if(!at)throw new SyntaxError("An invalid or illegal string was specified.");$t=at,this.hasBeenReset=!0}})),Object.defineProperty(S,"size",a({},k,{get:function(){return St},set:function(Ae){if(Ae<0||Ae>100)throw new Error("Size must be between 0 and 100.");St=Ae,this.hasBeenReset=!0}})),Object.defineProperty(S,"align",a({},k,{get:function(){return Mr},set:function(Ae){var at=n(Ae);if(!at)throw new SyntaxError("An invalid or illegal string was specified.");Mr=at,this.hasBeenReset=!0}})),S.displayState=void 0}return u.prototype.getCueAsHTML=function(){var d=window.WebVTT;return d.convertCueToDOMTree(window,this.text)},u}(),Hp=function(){return{decode:function(l){if(!l)return"";if(typeof l!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(l))}}};function Yu(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Hp,this.regionList=[]}function Wp(h){function c(s,n,a,u){return(s|0)*3600+(n|0)*60+(a|0)+(u|0)/1e3}var l=h.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return l?l[3]?c(l[1],l[2],l[3].replace(":",""),l[4]):l[1]>59?c(l[1],l[2],0,l[4]):c(0,l[1],l[2],l[4]):null}function Xu(){this.values=Object.create(null)}Xu.prototype={set:function(c,l){!this.get(c)&&l!==""&&(this.values[c]=l)},get:function(c,l,s){return s?this.has(c)?this.values[c]:l[s]:this.has(c)?this.values[c]:l},has:function(c){return c in this.values},alt:function(c,l,s){for(var n=0;n<s.length;++n)if(l===s[n]){this.set(c,l);break}},integer:function(c,l){/^-?\d+$/.test(l)&&this.set(c,parseInt(l,10))},percent:function(c,l){return l.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(l=parseFloat(l),l>=0&&l<=100)?(this.set(c,l),!0):!1}};function $u(h,c,l,s){var n=s?h.split(s):[h];for(var a in n)if(typeof n[a]=="string"){var u=n[a].split(l);if(u.length===2){var d=u[0],v=u[1];c(d,v)}}}var io=new Wu(0,0,0),Aa=io.align==="middle"?"middle":"center";function Yp(h,c,l){var s=h;function n(){var d=Wp(h);if(d===null)throw new Error("Malformed timestamp: "+s);return h=h.replace(/^[^\sa-zA-Z-]+/,""),d}function a(d,v){var y=new Xu;$u(d,function(L,G){switch(L){case"region":for(var H=l.length-1;H>=0;H--)if(l[H].id===G){y.set(L,l[H].region);break}break;case"vertical":y.alt(L,G,["rl","lr"]);break;case"line":var ee=G.split(","),ae=ee[0];y.integer(L,ae),y.percent(L,ae)&&y.set("snapToLines",!1),y.alt(L,ae,["auto"]),ee.length===2&&y.alt("lineAlign",ee[1],["start",Aa,"end"]);break;case"position":ee=G.split(","),y.percent(L,ee[0]),ee.length===2&&y.alt("positionAlign",ee[1],["start",Aa,"end","line-left","line-right","auto"]);break;case"size":y.percent(L,G);break;case"align":y.alt(L,G,["start",Aa,"end","left","right"]);break}},/:/,/\s/),v.region=y.get("region",null),v.vertical=y.get("vertical","");var S=y.get("line","auto");S==="auto"&&io.line===-1&&(S=-1),v.line=S,v.lineAlign=y.get("lineAlign","start"),v.snapToLines=y.get("snapToLines",!0),v.size=y.get("size",100),v.align=y.get("align",Aa);var k=y.get("position","auto");k==="auto"&&io.position===50&&(k=v.align==="start"||v.align==="left"?0:v.align==="end"||v.align==="right"?100:50),v.position=k}function u(){h=h.replace(/^\s+/,"")}if(u(),c.startTime=n(),u(),h.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+s);h=h.substr(3),u(),c.endTime=n(),u(),a(h,c)}function qu(h){return h.replace(/<br(?: \/)?>/gi,`
`)}Yu.prototype={parse:function(c){var l=this;c&&(l.buffer+=l.decoder.decode(c,{stream:!0}));function s(){var y=l.buffer,S=0;for(y=qu(y);S<y.length&&y[S]!=="\r"&&y[S]!==`
`;)++S;var k=y.substr(0,S);return y[S]==="\r"&&++S,y[S]===`
`&&++S,l.buffer=y.substr(S),k}function n(y){$u(y,function(S,k){},/:/)}try{var a;if(l.state==="INITIAL"){if(!/\r\n|\n/.test(l.buffer))return this;a=s();var u=a.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new Error("Malformed WebVTT signature.");l.state="HEADER"}for(var d=!1;l.buffer;){if(!/\r\n|\n/.test(l.buffer))return this;switch(d?d=!1:a=s(),l.state){case"HEADER":/:/.test(a)?n(a):a||(l.state="ID");continue;case"NOTE":a||(l.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){l.state="NOTE";break}if(!a)continue;if(l.cue=new Wu(0,0,""),l.state="CUE",a.indexOf("-->")===-1){l.cue.id=a;continue}case"CUE":try{Yp(a,l.cue,l.regionList)}catch{l.cue=null,l.state="BADCUE";continue}l.state="CUETEXT";continue;case"CUETEXT":var v=a.indexOf("-->")!==-1;if(!a||v&&(d=!0)){l.oncue&&l.oncue(l.cue),l.cue=null,l.state="ID";continue}l.cue.text&&(l.cue.text+=`
`),l.cue.text+=a;continue;case"BADCUE":a||(l.state="ID");continue}}}catch{l.state==="CUETEXT"&&l.cue&&l.oncue&&l.oncue(l.cue),l.cue=null,l.state=l.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var c=this;try{if(c.buffer+=c.decoder.decode(),(c.cue||c.state==="HEADER")&&(c.buffer+=`

`,c.parse()),c.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(l){throw l}return c.onflush&&c.onflush(),this}};var Xp=Yu;function $p(h,c,l,s){for(var n=[],a,u,d,v,y,S=window.VTTCue||TextTrackCue,k=0;k<s.rows.length;k++)if(a=s.rows[k],d=!0,v=0,y="",!a.isEmpty()){for(var L=0;L<a.chars.length;L++)a.chars[L].uchar.match(/\s/)&&d?v++:(y+=a.chars[L].uchar,d=!1);a.cueStartTime=c,c===l&&(l+=1e-4),u=new S(c,l,qu(y.trim())),v>=16?v--:v++,navigator.userAgent.match(/Firefox\//)?u.line=k+1:u.line=k>7?k-2:k+1,u.align="left",u.position=Math.max(0,Math.min(100,100*(v/32))),n.push(u),h&&h.addCue(u)}return n}var Qu={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ju=function(c){var l=c;return Qu.hasOwnProperty(c)&&(l=Qu[c]),String.fromCharCode(l)},gr=15,Nr=100,qp={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Qp={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Jp={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Zp={25:2,26:4,29:6,30:8,31:10,27:13,28:15},e0=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],ke;(function(h){h[h.ERROR=0]="ERROR",h[h.TEXT=1]="TEXT",h[h.WARNING=2]="WARNING",h[h.INFO=2]="INFO",h[h.DEBUG=3]="DEBUG",h[h.DATA=3]="DATA"})(ke||(ke={}));var t0=function(){function h(){this.time=null,this.verboseLevel=ke.ERROR}var c=h.prototype;return c.log=function(s,n){this.verboseLevel>=s&&E.logger.log(this.time+" ["+s+"] "+n)},h}(),_n=function(c){for(var l=[],s=0;s<c.length;s++)l.push(c[s].toString(16));return l},Zu=function(){function h(l,s,n,a,u){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=l||"white",this.underline=s||!1,this.italics=n||!1,this.background=a||"black",this.flash=u||!1}var c=h.prototype;return c.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},c.setStyles=function(s){for(var n=["foreground","underline","italics","background","flash"],a=0;a<n.length;a++){var u=n[a];s.hasOwnProperty(u)&&(this[u]=s[u])}},c.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},c.equals=function(s){return this.foreground===s.foreground&&this.underline===s.underline&&this.italics===s.italics&&this.background===s.background&&this.flash===s.flash},c.copy=function(s){this.foreground=s.foreground,this.underline=s.underline,this.italics=s.italics,this.background=s.background,this.flash=s.flash},c.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},h}(),r0=function(){function h(l,s,n,a,u,d){this.uchar=void 0,this.penState=void 0,this.uchar=l||" ",this.penState=new Zu(s,n,a,u,d)}var c=h.prototype;return c.reset=function(){this.uchar=" ",this.penState.reset()},c.setChar=function(s,n){this.uchar=s,this.penState.copy(n)},c.setPenState=function(s){this.penState.copy(s)},c.equals=function(s){return this.uchar===s.uchar&&this.penState.equals(s.penState)},c.copy=function(s){this.uchar=s.uchar,this.penState.copy(s.penState)},c.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},h}(),n0=function(){function h(l){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var s=0;s<Nr;s++)this.chars.push(new r0);this.logger=l,this.pos=0,this.currPenState=new Zu}var c=h.prototype;return c.equals=function(s){for(var n=!0,a=0;a<Nr;a++)if(!this.chars[a].equals(s.chars[a])){n=!1;break}return n},c.copy=function(s){for(var n=0;n<Nr;n++)this.chars[n].copy(s.chars[n])},c.isEmpty=function(){for(var s=!0,n=0;n<Nr;n++)if(!this.chars[n].isEmpty()){s=!1;break}return s},c.setCursor=function(s){this.pos!==s&&(this.pos=s),this.pos<0?(this.logger.log(ke.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>Nr&&(this.logger.log(ke.DEBUG,"Too large cursor position "+this.pos),this.pos=Nr)},c.moveCursor=function(s){var n=this.pos+s;if(s>1)for(var a=this.pos+1;a<n+1;a++)this.chars[a].setPenState(this.currPenState);this.setCursor(n)},c.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},c.insertChar=function(s){s>=144&&this.backSpace();var n=Ju(s);if(this.pos>=Nr){this.logger.log(ke.ERROR,"Cannot insert "+s.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)},c.clearFromPos=function(s){var n;for(n=s;n<Nr;n++)this.chars[n].reset()},c.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},c.clearToEndOfRow=function(){this.clearFromPos(this.pos)},c.getTextString=function(){for(var s=[],n=!0,a=0;a<Nr;a++){var u=this.chars[a].uchar;u!==" "&&(n=!1),s.push(u)}return n?"":s.join("")},c.setPenStyles=function(s){this.currPenState.setStyles(s);var n=this.chars[this.pos];n.setPenState(this.currPenState)},h}(),ao=function(){function h(l){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var s=0;s<gr;s++)this.rows.push(new n0(l));this.logger=l,this.currRow=gr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var c=h.prototype;return c.reset=function(){for(var s=0;s<gr;s++)this.rows[s].clear();this.currRow=gr-1},c.equals=function(s){for(var n=!0,a=0;a<gr;a++)if(!this.rows[a].equals(s.rows[a])){n=!1;break}return n},c.copy=function(s){for(var n=0;n<gr;n++)this.rows[n].copy(s.rows[n])},c.isEmpty=function(){for(var s=!0,n=0;n<gr;n++)if(!this.rows[n].isEmpty()){s=!1;break}return s},c.backSpace=function(){var s=this.rows[this.currRow];s.backSpace()},c.clearToEndOfRow=function(){var s=this.rows[this.currRow];s.clearToEndOfRow()},c.insertChar=function(s){var n=this.rows[this.currRow];n.insertChar(s)},c.setPen=function(s){var n=this.rows[this.currRow];n.setPenStyles(s)},c.moveCursor=function(s){var n=this.rows[this.currRow];n.moveCursor(s)},c.setCursor=function(s){this.logger.log(ke.INFO,"setCursor: "+s);var n=this.rows[this.currRow];n.setCursor(s)},c.setPAC=function(s){this.logger.log(ke.INFO,"pacData = "+JSON.stringify(s));var n=s.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(var a=0;a<gr;a++)this.rows[a].clear();var u=this.currRow+1-this.nrRollUpRows,d=this.lastOutputScreen;if(d){var v=d.rows[u].cueStartTime,y=this.logger.time;if(v&&y!==null&&v<y)for(var S=0;S<this.nrRollUpRows;S++)this.rows[n-this.nrRollUpRows+S+1].copy(d.rows[u+S])}}this.currRow=n;var k=this.rows[this.currRow];if(s.indent!==null){var L=s.indent,G=Math.max(L-1,0);k.setCursor(s.indent),s.color=k.chars[G].penState.foreground}var H={foreground:s.color,underline:s.underline,italics:s.italics,background:"black",flash:!1};this.setPen(H)},c.setBkgData=function(s){this.logger.log(ke.INFO,"bkgData = "+JSON.stringify(s)),this.backSpace(),this.setPen(s),this.insertChar(32)},c.setRollUpRows=function(s){this.nrRollUpRows=s},c.rollUp=function(){if(this.nrRollUpRows===null){this.logger.log(ke.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(ke.TEXT,this.getDisplayText());var s=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(s,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(ke.INFO,"Rolling up")},c.getDisplayText=function(s){s=s||!1;for(var n=[],a="",u=-1,d=0;d<gr;d++){var v=this.rows[d].getTextString();v&&(u=d+1,s?n.push("Row "+u+": '"+v+"'"):n.push(v.trim()))}return n.length>0&&(s?a="["+n.join(" | ")+"]":a=n.join(`
`)),a},c.getTextAndFormat=function(){return this.rows},h}(),ef=function(){function h(l,s,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=l,this.outputFilter=s,this.mode=null,this.verbose=0,this.displayedMemory=new ao(n),this.nonDisplayedMemory=new ao(n),this.lastOutputScreen=new ao(n),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var c=h.prototype;return c.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[gr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},c.getHandler=function(){return this.outputFilter},c.setHandler=function(s){this.outputFilter=s},c.setPAC=function(s){this.writeScreen.setPAC(s)},c.setBkgData=function(s){this.writeScreen.setBkgData(s)},c.setMode=function(s){s!==this.mode&&(this.mode=s,this.logger.log(ke.INFO,"MODE="+s),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=s)},c.insertChars=function(s){for(var n=0;n<s.length;n++)this.writeScreen.insertChar(s[n]);var a=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(ke.INFO,a+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(ke.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},c.ccRCL=function(){this.logger.log(ke.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},c.ccBS=function(){this.logger.log(ke.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},c.ccAOF=function(){},c.ccAON=function(){},c.ccDER=function(){this.logger.log(ke.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},c.ccRU=function(s){this.logger.log(ke.INFO,"RU("+s+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(s)},c.ccFON=function(){this.logger.log(ke.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},c.ccRDC=function(){this.logger.log(ke.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},c.ccTR=function(){this.logger.log(ke.INFO,"TR"),this.setMode("MODE_TEXT")},c.ccRTD=function(){this.logger.log(ke.INFO,"RTD"),this.setMode("MODE_TEXT")},c.ccEDM=function(){this.logger.log(ke.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},c.ccCR=function(){this.logger.log(ke.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},c.ccENM=function(){this.logger.log(ke.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},c.ccEOC=function(){if(this.logger.log(ke.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var s=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=s,this.writeScreen=this.nonDisplayedMemory,this.logger.log(ke.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},c.ccTO=function(s){this.logger.log(ke.INFO,"TO("+s+") - Tab Offset"),this.writeScreen.moveCursor(s)},c.ccMIDROW=function(s){var n={flash:!1};if(n.underline=s%2===1,n.italics=s>=46,n.italics)n.foreground="white";else{var a=Math.floor(s/2)-16,u=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=u[a]}this.logger.log(ke.INFO,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)},c.outputDataUpdate=function(s){s===void 0&&(s=!1);var n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),s&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))},c.cueSplitAtTime=function(s){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,s,this.displayedMemory),this.cueStartTime=s))},h}(),i0=function(){function h(l,s,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new t0;this.channels=[null,new ef(l,s,a),new ef(l+1,n,a)],this.cmdHistory=rf(),this.logger=a}var c=h.prototype;return c.getHandler=function(s){return this.channels[s].getHandler()},c.setHandler=function(s,n){this.channels[s].setHandler(n)},c.addData=function(s,n){var a,u,d,v=!1;this.logger.time=s;for(var y=0;y<n.length;y+=2)if(u=n[y]&127,d=n[y+1]&127,!(u===0&&d===0)){if(this.logger.log(ke.DATA,"["+_n([n[y],n[y+1]])+"] -> ("+_n([u,d])+")"),a=this.parseCmd(u,d),a||(a=this.parseMidrow(u,d)),a||(a=this.parsePAC(u,d)),a||(a=this.parseBackgroundAttributes(u,d)),!a&&(v=this.parseChars(u,d),v)){var S=this.currentChannel;if(S&&S>0){var k=this.channels[S];k.insertChars(v)}else this.logger.log(ke.WARNING,"No channel found yet. TEXT-MODE?")}!a&&!v&&this.logger.log(ke.WARNING,"Couldn't parse cleaned data "+_n([u,d])+" orig: "+_n([n[y],n[y+1]]))}},c.parseCmd=function(s,n){var a=this.cmdHistory,u=(s===20||s===28||s===21||s===29)&&n>=32&&n<=47,d=(s===23||s===31)&&n>=33&&n<=35;if(!(u||d))return!1;if(tf(s,n,a))return Gn(null,null,a),this.logger.log(ke.DEBUG,"Repeated command ("+_n([s,n])+") is dropped"),!0;var v=s===20||s===21||s===23?1:2,y=this.channels[v];return s===20||s===21||s===28||s===29?n===32?y.ccRCL():n===33?y.ccBS():n===34?y.ccAOF():n===35?y.ccAON():n===36?y.ccDER():n===37?y.ccRU(2):n===38?y.ccRU(3):n===39?y.ccRU(4):n===40?y.ccFON():n===41?y.ccRDC():n===42?y.ccTR():n===43?y.ccRTD():n===44?y.ccEDM():n===45?y.ccCR():n===46?y.ccENM():n===47&&y.ccEOC():y.ccTO(n-32),Gn(s,n,a),this.currentChannel=v,!0},c.parseMidrow=function(s,n){var a=0;if((s===17||s===25)&&n>=32&&n<=47){if(s===17?a=1:a=2,a!==this.currentChannel)return this.logger.log(ke.ERROR,"Mismatch channel in midrow parsing"),!1;var u=this.channels[a];return u?(u.ccMIDROW(n),this.logger.log(ke.DEBUG,"MIDROW ("+_n([s,n])+")"),!0):!1}return!1},c.parsePAC=function(s,n){var a,u=this.cmdHistory,d=(s>=17&&s<=23||s>=25&&s<=31)&&n>=64&&n<=127,v=(s===16||s===24)&&n>=64&&n<=95;if(!(d||v))return!1;if(tf(s,n,u))return Gn(null,null,u),!0;var y=s<=23?1:2;n>=64&&n<=95?a=y===1?qp[s]:Jp[s]:a=y===1?Qp[s]:Zp[s];var S=this.channels[y];return S?(S.setPAC(this.interpretPAC(a,n)),Gn(s,n,u),this.currentChannel=y,!0):!1},c.interpretPAC=function(s,n){var a=n,u={color:null,italics:!1,indent:null,underline:!1,row:s};return n>95?a=n-96:a=n-64,u.underline=(a&1)===1,a<=13?u.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(a/2)]:a<=15?(u.italics=!0,u.color="white"):u.indent=Math.floor((a-16)/2)*4,u},c.parseChars=function(s,n){var a,u=null,d=null;if(s>=25?(a=2,d=s-8):(a=1,d=s),d>=17&&d<=19){var v=n;d===17?v=n+80:d===18?v=n+112:v=n+144,this.logger.log(ke.INFO,"Special char '"+Ju(v)+"' in channel "+a),u=[v]}else s>=32&&s<=127&&(u=n===0?[s]:[s,n]);if(u){var y=_n(u);this.logger.log(ke.DEBUG,"Char codes =  "+y.join(",")),Gn(s,n,this.cmdHistory)}return u},c.parseBackgroundAttributes=function(s,n){var a=(s===16||s===24)&&n>=32&&n<=47,u=(s===23||s===31)&&n>=45&&n<=47;if(!(a||u))return!1;var d,v={};s===16||s===24?(d=Math.floor((n-32)/2),v.background=e0[d],n%2===1&&(v.background=v.background+"_semi")):n===45?v.background="transparent":(v.foreground="black",n===47&&(v.underline=!0));var y=s<=23?1:2,S=this.channels[y];return S.setBkgData(v),Gn(s,n,this.cmdHistory),!0},c.reset=function(){for(var s=0;s<Object.keys(this.channels).length;s++){var n=this.channels[s];n&&n.reset()}this.cmdHistory=rf()},c.cueSplitAtTime=function(s){for(var n=0;n<this.channels.length;n++){var a=this.channels[n];a&&a.cueSplitAtTime(s)}},h}();function Gn(h,c,l){l.a=h,l.b=c}function tf(h,c,l){return l.a===h&&l.b===c}function rf(){return{a:null,b:null}}var nf=i0,Ra=function(){function h(l,s){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=l,this.trackName=s}var c=h.prototype;return c.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},c.newCue=function(s,n,a){(this.startTime===null||this.startTime>s)&&(this.startTime=s),this.endTime=n,this.screen=a,this.timelineController.createCaptionsTrack(this.trackName)},c.reset=function(){this.cueRanges=[]},h}(),so=function(c,l,s){return c.substr(s||0,l.length)===l},a0=function(c){var l=parseInt(c.substr(-3)),s=parseInt(c.substr(-6,2)),n=parseInt(c.substr(-9,2)),a=c.length>9?parseInt(c.substr(0,c.indexOf(":"))):0;if(!Object(w.isFiniteNumber)(l)||!Object(w.isFiniteNumber)(s)||!Object(w.isFiniteNumber)(n)||!Object(w.isFiniteNumber)(a))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+c);return l+=1e3*s,l+=60*1e3*n,l+=60*60*1e3*a,l},oo=function(c){for(var l=5381,s=c.length;s;)l=l*33^c.charCodeAt(--s);return(l>>>0).toString()},s0=function(c,l,s){var n=c[l],a=c[n.prevCC];if(!a||!a.new&&n.new){c.ccOffset=c.presentationOffset=n.start,n.new=!1;return}for(;a&&a.new;)c.ccOffset+=n.start-a.start,n.new=!1,n=a,a=c[n.prevCC];c.presentationOffset=s},o0={parse:function(c,l,s,n,a,u){var d=/\r\n|\n\r|\n|\r/g,v=Object(_i.utf8ArrayToStr)(new Uint8Array(c)).trim().replace(d,`
`).split(`
`),y="00:00.000",S=0,k=0,L=0,G=[],H,ee=!0,ae=!1,he=new Xp;he.oncue=function(fe){var xe=s[n],Ee=s.ccOffset;xe&&xe.new&&(k!==void 0?Ee=s.ccOffset=xe.start:s0(s,n,L)),L&&(Ee=L-s.presentationOffset),ae&&(fe.startTime+=Ee-k,fe.endTime+=Ee-k),fe.id=oo(fe.startTime.toString())+oo(fe.endTime.toString())+oo(fe.text),fe.text=decodeURIComponent(encodeURIComponent(fe.text)),fe.endTime>0&&G.push(fe)},he.onparsingerror=function(fe){H=fe},he.onflush=function(){if(H&&u){u(H);return}a(G)},v.forEach(function(fe){if(ee)if(so(fe,"X-TIMESTAMP-MAP=")){ee=!1,ae=!0,fe.substr(16).split(",").forEach(function(xe){so(xe,"LOCAL:")?y=xe.substr(6):so(xe,"MPEGTS:")&&(S=parseInt(xe.substr(7)))});try{l+(s[n].start*9e4||0)<0&&(l+=8589934592),S-=l,k=a0(y)/1e3,L=S/9e4}catch(xe){ae=!1,H=xe}return}else fe===""&&(ee=!1);he.parse(fe+`
`)}),he.flush()}},l0=o0;function ka(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function u0(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var f0=function(h){u0(c,h);function c(s){var n;if(n=h.call(this,s,g.default.MEDIA_ATTACHING,g.default.MEDIA_DETACHING,g.default.FRAG_PARSING_USERDATA,g.default.FRAG_DECRYPTED,g.default.MANIFEST_LOADING,g.default.MANIFEST_LOADED,g.default.FRAG_LOADED,g.default.INIT_PTS_FOUND)||this,n.media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.captionsTracks={},n.nonNativeCaptionsTracks={},n.captionsProperties=void 0,n.cea608Parser1=void 0,n.cea608Parser2=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=af(),n.hls=s,n.config=s.config,n.Cues=s.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode},textTrack3:{label:n.config.captionsTextTrack3Label,languageCode:n.config.captionsTextTrack3LanguageCode},textTrack4:{label:n.config.captionsTextTrack4Label,languageCode:n.config.captionsTextTrack4LanguageCode}},n.config.enableCEA708Captions){var a=new Ra(ka(n),"textTrack1"),u=new Ra(ka(n),"textTrack2"),d=new Ra(ka(n),"textTrack3"),v=new Ra(ka(n),"textTrack4");n.cea608Parser1=new nf(1,a,u),n.cea608Parser2=new nf(3,d,v)}return n}var l=c.prototype;return l.addCues=function(n,a,u,d,v){for(var y=!1,S=v.length;S--;){var k=v[S],L=d0(k[0],k[1],a,u);if(L>=0&&(k[0]=Math.min(k[0],a),k[1]=Math.max(k[1],u),y=!0,L/(u-a)>.5))return}if(y||v.push([a,u]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[n],a,u,d);else{var G=this.Cues.newCue(null,a,u,d);this.hls.trigger(g.default.CUES_PARSED,{type:"captions",cues:G,track:n})}},l.onInitPtsFound=function(n){var a=this,u=n.frag,d=n.id,v=n.initPTS,y=this.unparsedVttFrags;d==="main"&&(this.initPTS[u.cc]=v),y.length&&(this.unparsedVttFrags=[],y.forEach(function(S){a.onFragLoaded(S)}))},l.getExistingTrack=function(n){var a=this.media;if(a)for(var u=0;u<a.textTracks.length;u++){var d=a.textTracks[u];if(d[n])return d}return null},l.createCaptionsTrack=function(n){this.config.renderTextTracksNatively?this.createNativeTrack(n):this.createNonNativeTrack(n)},l.createNativeTrack=function(n){if(!this.captionsTracks[n]){var a=this.captionsProperties,u=this.captionsTracks,d=this.media,v=a[n],y=v.label,S=v.languageCode,k=this.getExistingTrack(n);if(k)u[n]=k,Tn(u[n]),Bn(u[n],d);else{var L=this.createTextTrack("captions",y,S);L&&(L[n]=!0,u[n]=L)}}},l.createNonNativeTrack=function(n){if(!this.nonNativeCaptionsTracks[n]){var a=this.captionsProperties[n];if(a){var u=a.label,d={_id:n,label:u,kind:"captions",default:a.media?!!a.media.default:!1,closedCaptions:a.media};this.nonNativeCaptionsTracks[n]=d,this.hls.trigger(g.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[d]})}}},l.createTextTrack=function(n,a,u){var d=this.media;if(d)return d.addTextTrack(n,a,u)},l.destroy=function(){h.prototype.destroy.call(this)},l.onMediaAttaching=function(n){this.media=n.media,this._cleanTracks()},l.onMediaDetaching=function(){var n=this.captionsTracks;Object.keys(n).forEach(function(a){Tn(n[a]),delete n[a]}),this.nonNativeCaptionsTracks={}},l.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs=af(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={}},l._cleanTracks=function(){var n=this.media;if(n){var a=n.textTracks;if(a)for(var u=0;u<a.length;u++)Tn(a[u])}},l.onManifestLoaded=function(n){var a=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset()),this.config.enableWebVTT){var u=n.subtitles||[],d=this.tracks&&u&&this.tracks.length===u.length;if(this.tracks=n.subtitles||[],this.config.renderTextTracksNatively){var v=this.media?this.media.textTracks:[];this.tracks.forEach(function(S,k){var L;if(k<v.length){for(var G=null,H=0;H<v.length;H++)if(c0(v[H],S)){G=v[H];break}G&&(L=G)}L||(L=a.createTextTrack("subtitles",S.name,S.lang)),S.default?L.mode=a.hls.subtitleDisplay?"showing":"hidden":L.mode="disabled",a.textTracks.push(L)})}else if(!d&&this.tracks&&this.tracks.length){var y=this.tracks.map(function(S){return{label:S.name,kind:S.type.toLowerCase(),default:S.default,subtitleTrack:S}});this.hls.trigger(g.default.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:y})}}this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(function(S){var k=/(?:CC|SERVICE)([1-4])/.exec(S.instreamId);if(k){var L="textTrack"+k[1],G=a.captionsProperties[L];G&&(G.label=S.name,S.lang&&(G.languageCode=S.lang),G.media=S)}})},l.onFragLoaded=function(n){var a=n.frag,u=n.payload,d=this.cea608Parser1,v=this.cea608Parser2,y=this.initPTS,S=this.lastSn,k=this.unparsedVttFrags;if(a.type==="main"){var L=a.sn;a.sn!==S+1&&d&&v&&(d.reset(),v.reset()),this.lastSn=L}else if(a.type==="subtitle")if(u.byteLength){if(!Object(w.isFiniteNumber)(y[a.cc])){k.push(n),y.length&&this.hls.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a});return}var G=a.decryptdata;(G==null||G.key==null||G.method!=="AES-128")&&this._parseVTTs(a,u)}else this.hls.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:a})},l._parseVTTs=function(n,a){var u=this,d=this.hls,v=this.prevCC,y=this.textTracks,S=this.vttCCs;S[n.cc]||(S[n.cc]={start:n.start,prevCC:v,new:!0},this.prevCC=n.cc),l0.parse(a,this.initPTS[n.cc],S,n.cc,function(k){if(u.config.renderTextTracksNatively){var L=y[n.level];if(L.mode==="disabled"){d.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n});return}k.forEach(function(H){if(!L.cues.getCueById(H.id))try{if(L.addCue(H),!L.cues.getCueById(H.id))throw new Error("addCue is failed for: "+H)}catch(ae){E.logger.debug("Failed occurred on adding cues: "+ae);var ee=new window.TextTrackCue(H.startTime,H.endTime,H.text);ee.id=H.id,L.addCue(ee)}})}else{var G=u.tracks[n.level].default?"default":"subtitles"+n.level;d.trigger(g.default.CUES_PARSED,{type:"subtitles",cues:k,track:G})}d.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},function(k){E.logger.log("Failed to parse VTT cue: "+k),d.trigger(g.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})})},l.onFragDecrypted=function(n){var a=n.frag,u=n.payload;if(a.type==="subtitle"){if(!Object(w.isFiniteNumber)(this.initPTS[a.cc])){this.unparsedVttFrags.push(n);return}this._parseVTTs(a,u)}},l.onFragParsingUserdata=function(n){var a=this.cea608Parser1,u=this.cea608Parser2;if(!(!this.enabled||!(a&&u)))for(var d=0;d<n.samples.length;d++){var v=n.samples[d].bytes;if(v){var y=this.extractCea608Data(v);a.addData(n.samples[d].pts,y[0]),u.addData(n.samples[d].pts,y[1])}}},l.extractCea608Data=function(n){for(var a=n[0]&31,u=2,d=[[],[]],v=0;v<a;v++){var y=n[u++],S=127&n[u++],k=127&n[u++],L=(4&y)!==0,G=3&y;S===0&&k===0||L&&(G===0||G===1)&&(d[G].push(S),d[G].push(k))}return d},c}(D);function c0(h,c){return h&&h.label===c.name&&!(h.textTrack1||h.textTrack2)}function d0(h,c,l,s){return Math.min(c,s)-Math.max(h,l)}function af(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}var h0=f0;function sf(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function p0(h,c,l){return c&&sf(h.prototype,c),l&&sf(h,l),h}function g0(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var v0=function(h){g0(c,h);function c(s){var n;return n=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.MANIFEST_LOADED,g.default.SUBTITLE_TRACK_LOADED)||this,n.tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}var l=c.prototype;return l.destroy=function(){D.prototype.destroy.call(this)},l.onMediaAttached=function(n){var a=this;this.media=n.media,this.media&&(Object(w.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){a.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},l.onMediaDetaching=function(){if(this.media){this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(w.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack);var n=lo(this.media.textTracks);n.forEach(function(a){Tn(a)}),this.subtitleTrack=-1,this.media=null}},l.onManifestLoaded=function(n){var a=this,u=n.subtitles||[];this.tracks=u,this.hls.trigger(g.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:u}),u.forEach(function(d){d.default&&(a.media?a.subtitleTrack=d.id:a.queuedDefaultTrack=d.id)})},l.onSubtitleTrackLoaded=function(n){var a=this,u=n.id,d=n.details,v=this.trackId,y=this.tracks,S=y[v];if(u>=y.length||u!==v||!S||this.stopped){this._clearReloadTimer();return}if(E.logger.log("subtitle track "+u+" loaded"),d.live){var k=Te(S.details,d,n.stats.trequest);E.logger.log("Reloading live subtitle playlist in "+k+"ms"),this.timer=setTimeout(function(){a._loadCurrentTrack()},k)}else this._clearReloadTimer()},l.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},l.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},l._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},l._loadCurrentTrack=function(){var n=this.trackId,a=this.tracks,u=this.hls,d=a[n];n<0||!d||d.details&&!d.details.live||(E.logger.log("Loading subtitle track "+n),u.trigger(g.default.SUBTITLE_TRACK_LOADING,{url:d.url,id:n}))},l._toggleTrackModes=function(n){var a=this.media,u=this.subtitleDisplay,d=this.trackId;if(a){var v=lo(a.textTracks);if(n===-1)[].slice.call(v).forEach(function(k){k.mode="disabled"});else{var y=v[d];y&&(y.mode="disabled")}var S=v[n];S&&(S.mode=u?"showing":"hidden")}},l._setSubtitleTrackInternal=function(n){var a=this.hls,u=this.tracks;!Object(w.isFiniteNumber)(n)||n<-1||n>=u.length||(this.trackId=n,E.logger.log("Switching to subtitle track "+n),a.trigger(g.default.SUBTITLE_TRACK_SWITCH,{id:n}),this._loadCurrentTrack())},l._onTextTracksChanged=function(){if(!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var n=-1,a=lo(this.media.textTracks),u=0;u<a.length;u++)if(a[u].mode==="hidden")n=u;else if(a[u].mode==="showing"){n=u;break}this.subtitleTrack=n}},p0(c,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(n){this.trackId!==n&&(this._toggleTrackModes(n),this._setSubtitleTrackInternal(n))}}]),c}(D);function lo(h){for(var c=[],l=0;l<h.length;l++){var s=h[l];s.kind==="subtitles"&&s.label&&c.push(h[l])}return c}var m0=v0,y0=o("./src/crypt/decrypter.js");function x0(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function E0(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var S0=window,of=S0.performance,uo=500,T0=function(h){E0(c,h);function c(s,n){var a;return a=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.ERROR,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.SUBTITLE_TRACKS_UPDATED,g.default.SUBTITLE_TRACK_SWITCH,g.default.SUBTITLE_TRACK_LOADED,g.default.SUBTITLE_FRAG_PROCESSED,g.default.LEVEL_UPDATED)||this,a.fragmentTracker=n,a.config=s.config,a.state=$.STOPPED,a.tracks=[],a.tracksBuffered=[],a.currentTrackId=-1,a.decrypter=new y0.default(s,s.config),a.lastAVStart=0,a._onMediaSeeking=a.onMediaSeeking.bind(x0(a)),a}var l=c.prototype;return l.startLoad=function(){this.stopLoad(),this.state=$.IDLE;var n=this.tracks[this.currentTrackId];n&&n.details&&(this.setInterval(uo),this.tick())},l.onSubtitleFragProcessed=function(n){var a=n.frag,u=n.success;if(this.fragPrevious=a,this.state=$.IDLE,!!u){var d=this.tracksBuffered[this.currentTrackId];if(d){for(var v,y=a.start,S=0;S<d.length;S++)if(y>=d[S].start&&y<=d[S].end){v=d[S];break}var k=a.start+a.duration;v?v.end=k:(v={start:y,end:k},d.push(v))}}},l.onMediaAttached=function(n){var a=n.media;this.media=a,a.addEventListener("seeking",this._onMediaSeeking),this.state=$.IDLE},l.onMediaDetaching=function(){var n=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(a){n.tracksBuffered[a.id]=[]}),this.media=null,this.state=$.STOPPED)},l.onError=function(n){var a=n.frag;!a||a.type!=="subtitle"||(this.fragCurrent&&this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.state=$.IDLE)},l.onSubtitleTracksUpdated=function(n){var a=this;E.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=n.subtitleTracks,this.tracks.forEach(function(u){a.tracksBuffered[u.id]=[]})},l.onSubtitleTrackSwitch=function(n){if(this.currentTrackId=n.id,!this.tracks||!this.tracks.length||this.currentTrackId===-1){this.clearInterval();return}var a=this.tracks[this.currentTrackId];a&&a.details&&this.setInterval(uo)},l.onSubtitleTrackLoaded=function(n){var a=n.id,u=n.details,d=this.currentTrackId,v=this.tracks,y=v[d];a>=v.length||a!==d||!y||(u.live&&de(y.details,u,this.lastAVStart),y.details=u,this.setInterval(uo))},l.onKeyLoaded=function(){this.state===$.KEY_LOADING&&(this.state=$.IDLE)},l.onFragLoaded=function(n){var a=this.fragCurrent,u=n.frag.decryptdata,d=n.frag,v=this.hls;if(this.state===$.FRAG_LOADING&&a&&n.frag.type==="subtitle"&&a.sn===n.frag.sn&&n.payload.byteLength>0&&u&&u.key&&u.method==="AES-128"){var y=of.now();this.decrypter.decrypt(n.payload,u.key.buffer,u.iv.buffer,function(S){var k=of.now();v.trigger(g.default.FRAG_DECRYPTED,{frag:d,payload:S,stats:{tstart:y,tdecrypt:k}})})}},l.onLevelUpdated=function(n){var a=n.details,u=a.fragments;this.lastAVStart=u.length?u[0].start:0},l.doTick=function(){if(!this.media){this.state=$.IDLE;return}switch(this.state){case $.IDLE:{var n=this.config,a=this.currentTrackId,u=this.fragmentTracker,d=this.media,v=this.tracks;if(!v||!v[a]||!v[a].details)break;var y=n.maxBufferHole,S=n.maxFragLookUpTolerance,k=Math.min(n.maxBufferLength,n.maxMaxBufferLength),L=O.bufferedInfo(this._getBuffered(),d.currentTime,y),G=L.end,H=L.len,ee=v[a].details,ae=ee.fragments,he=ae.length,fe=ae[he-1].start+ae[he-1].duration;if(H>k)return;var xe,Ee=this.fragPrevious;G<fe?(Ee&&ee.hasProgramDateTime&&(xe=Pt(ae,Ee.endProgramDateTime,S)),xe||(xe=it(Ee,ae,G,S))):xe=ae[he-1],xe&&xe.encrypted?(E.logger.log("Loading key for "+xe.sn),this.state=$.KEY_LOADING,this.hls.trigger(g.default.KEY_LOADING,{frag:xe})):xe&&u.getState(xe)===ht.NOT_LOADED&&(this.fragCurrent=xe,this.state=$.FRAG_LOADING,this.hls.trigger(g.default.FRAG_LOADING,{frag:xe}))}}},l.stopLoad=function(){this.lastAVStart=0,this.fragPrevious=null,h.prototype.stopLoad.call(this)},l._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},l.onMediaSeeking=function(){if(this.fragCurrent){var n=this.media?this.media.currentTime:0,a=this.config.maxFragLookUpTolerance,u=this.fragCurrent.start-a,d=this.fragCurrent.start+this.fragCurrent.duration+a;(n<u||n>d)&&(this.fragCurrent.loader&&this.fragCurrent.loader.abort(),this.fragmentTracker.removeFragment(this.fragCurrent),this.fragCurrent=null,this.fragPrevious=null,this.state=$.IDLE,this.tick())}},c}(Ft),jn;(function(h){h.WIDEVINE="com.widevine.alpha",h.PLAYREADY="com.microsoft.playready"})(jn||(jn={}));var _0=function(){return typeof window<"u"&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();function lf(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function w0(h,c,l){return c&&lf(h.prototype,c),l&&lf(h,l),h}function A0(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var uf=3,R0=function(c,l,s){var n={audioCapabilities:[],videoCapabilities:[]};return c.forEach(function(a){n.audioCapabilities.push({contentType:'audio/mp4; codecs="'+a+'"',robustness:s.audioRobustness||""})}),l.forEach(function(a){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+a+'"',robustness:s.videoRobustness||""})}),[n]},k0=function(c,l,s,n){switch(c){case jn.WIDEVINE:return R0(l,s,n);default:throw new Error("Unknown key-system: "+c)}},L0=function(h){A0(c,h);function c(s){var n;return n=h.call(this,s,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHED,g.default.MANIFEST_PARSED)||this,n._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._drmSystemOptions=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n.mediaKeysPromise=null,n._onMediaEncrypted=function(a){if(E.logger.log('Media is encrypted using "'+a.initDataType+'" init data type'),!n.mediaKeysPromise){E.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),n.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var u=function(v){n._media&&(n._attemptSetMediaKeys(v),n._generateRequestWithPreferredKeySession(a.initDataType,a.initData))};n.mediaKeysPromise.then(u).catch(u)},n._config=s.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n._drmSystemOptions=s.config.drmSystemOptions,n}var l=c.prototype;return l.getLicenseServerUrl=function(n){switch(n){case jn.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+n+'"')},l._attemptKeySystemAccess=function(n,a,u){var d=this,v=k0(n,a,u,this._drmSystemOptions);E.logger.log("Requesting encrypted media key-system access");var y=this.requestMediaKeySystemAccess(n,v);this.mediaKeysPromise=y.then(function(S){return d._onMediaKeySystemAccessObtained(n,S)}),y.catch(function(S){E.logger.error('Failed to obtain key-system "'+n+'" access:',S)})},l._onMediaKeySystemAccessObtained=function(n,a){var u=this;E.logger.log('Access for key-system "'+n+'" obtained');var d={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:a,mediaKeySystemDomain:n};this._mediaKeysList.push(d);var v=Promise.resolve().then(function(){return a.createMediaKeys()}).then(function(y){return d.mediaKeys=y,E.logger.log('Media-keys created for key-system "'+n+'"'),u._onMediaKeysCreated(),y});return v.catch(function(y){E.logger.error("Failed to create media-keys:",y)}),v},l._onMediaKeysCreated=function(){var n=this;this._mediaKeysList.forEach(function(a){a.mediaKeysSession||(a.mediaKeysSession=a.mediaKeys.createSession(),n._onNewMediaKeySession(a.mediaKeysSession))})},l._onNewMediaKeySession=function(n){var a=this;E.logger.log("New key-system session "+n.sessionId),n.addEventListener("message",function(u){a._onKeySessionMessage(n,u.message)},!1)},l._onKeySessionMessage=function(n,a){E.logger.log("Got EME message event, creating license request"),this._requestLicense(a,function(u){E.logger.log("Received license data (length: "+(u&&u.byteLength)+"), updating key-session"),n.update(u)})},l._attemptSetMediaKeys=function(n){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var a=this._mediaKeysList[0];if(!a||!a.mediaKeys){E.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}E.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(a.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(n,a){var u=this,d=this._mediaKeysList[0];if(!d){E.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(d.mediaKeysSessionInitialized){E.logger.warn("Key-Session already initialized but requested again");return}var v=d.mediaKeysSession;if(!v){E.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!a){E.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}E.logger.log('Generating key-session request for "'+n+'" init data type'),d.mediaKeysSessionInitialized=!0,v.generateRequest(n,a).then(function(){E.logger.debug("Key-session generation succeeded")}).catch(function(y){E.logger.error("Error generating key-session request:",y),u.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},l._createLicenseXhr=function(n,a,u){var d=new XMLHttpRequest,v=this._licenseXhrSetup;try{if(v)try{v(d,n)}catch{d.open("POST",n,!0),v(d,n)}d.readyState||d.open("POST",n,!0)}catch(y){throw new Error("issue setting up KeySystem license XHR "+y)}return d.responseType="arraybuffer",d.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,d,n,a,u),d},l._onLicenseRequestReadyStageChange=function(n,a,u,d){switch(n.readyState){case 4:if(n.status===200)this._requestLicenseFailureCount=0,E.logger.log("License request succeeded"),n.responseType!=="arraybuffer"&&E.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),d(n.response);else{if(E.logger.error("License Request XHR failed ("+a+"). Status: "+n.status+" ("+n.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>uf){this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var v=uf-this._requestLicenseFailureCount+1;E.logger.warn("Retrying license request, "+v+" attempts left"),this._requestLicense(u,d)}break}},l._generateLicenseRequestChallenge=function(n,a){switch(n.mediaKeySystemDomain){case jn.WIDEVINE:return a}throw new Error("unsupported key-system: "+n.mediaKeySystemDomain)},l._requestLicense=function(n,a){E.logger.log("Requesting content license for key-system");var u=this._mediaKeysList[0];if(!u){E.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var d=this.getLicenseServerUrl(u.mediaKeySystemDomain),v=this._createLicenseXhr(d,n,a);E.logger.log("Sending license request to URL: "+d);var y=this._generateLicenseRequestChallenge(u,n);v.send(y)}catch(S){E.logger.error("Failure requesting DRM license: "+S),this.hls.trigger(g.default.ERROR,{type:m.ErrorTypes.KEY_SYSTEM_ERROR,details:m.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(n){if(this._emeEnabled){var a=n.media;this._media=a,a.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var n=this._media,a=this._mediaKeysList;n&&(n.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(a.map(function(u){if(u.mediaKeysSession)return u.mediaKeysSession.close().catch(function(){})})).then(function(){return n.setMediaKeys(null)}).catch(function(){}))},l.onManifestParsed=function(n){if(this._emeEnabled){var a=n.levels.map(function(d){return d.audioCodec}),u=n.levels.map(function(d){return d.videoCodec});this._attemptKeySystemAccess(jn.WIDEVINE,a,u)}},w0(c,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),c}(D),D0=L0;function ff(h,c){var l=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);c&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(h,n).enumerable})),l.push.apply(l,s)}return l}function cf(h){for(var c=1;c<arguments.length;c++){var l=arguments[c]!=null?arguments[c]:{};c%2?ff(Object(l),!0).forEach(function(s){C0(h,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(l)):ff(Object(l)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(l,s))})}return h}function C0(h,c,l){return c in h?Object.defineProperty(h,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):h[c]=l,h}var I0=cf(cf({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60*1e3*1e3,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Np,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Sp,bufferController:wp,capLevelController:Lp,fpsController:Pp,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:_0,testBandwidth:!0},O0()),{},{subtitleStreamController:T0,subtitleTrackController:m0,timelineController:h0,audioStreamController:Vp,audioTrackController:Up,emeController:D0});function O0(){return{cueHandler:f,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function df(h,c){var l=Object.keys(h);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(h);c&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(h,n).enumerable})),l.push.apply(l,s)}return l}function hf(h){for(var c=1;c<arguments.length;c++){var l=arguments[c]!=null?arguments[c]:{};c%2?df(Object(l),!0).forEach(function(s){P0(h,s,l[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(l)):df(Object(l)).forEach(function(s){Object.defineProperty(h,s,Object.getOwnPropertyDescriptor(l,s))})}return h}function P0(h,c,l){return c in h?Object.defineProperty(h,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):h[c]=l,h}function pt(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function pf(h,c){for(var l=0;l<c.length;l++){var s=c[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(h,s.key,s)}}function gf(h,c,l){return c&&pf(h.prototype,c),l&&pf(h,l),h}function F0(h,c){h.prototype=Object.create(c.prototype),h.prototype.constructor=h,h.__proto__=c}var vf=function(h){F0(c,h),c.isSupported=function(){return no()},gf(c,null,[{key:"version",get:function(){return"0.14.17"}},{key:"Events",get:function(){return g.default}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return c.defaultConfig?c.defaultConfig:I0},set:function(n){c.defaultConfig=n}}]);function c(s){var n;s===void 0&&(s={}),n=h.call(this)||this,n.config=void 0,n._autoLevelCapping=void 0,n.abrController=void 0,n.capLevelController=void 0,n.levelController=void 0,n.streamController=void 0,n.networkControllers=void 0,n.audioTrackController=void 0,n.subtitleTrackController=void 0,n.emeController=void 0,n.coreComponents=void 0,n.media=null,n.url=null;var a=c.DefaultConfig;if((s.liveSyncDurationCount||s.liveMaxLatencyDurationCount)&&(s.liveSyncDuration||s.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");n.config=hf(hf({},a),s);var u=pt(n),d=u.config;if(d.liveMaxLatencyDurationCount!==void 0&&d.liveMaxLatencyDurationCount<=d.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(d.liveMaxLatencyDuration!==void 0&&(d.liveSyncDuration===void 0||d.liveMaxLatencyDuration<=d.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(E.enableLogs)(d.debug),n._autoLevelCapping=-1;var v=n.abrController=new d.abrController(pt(n)),y=new d.bufferController(pt(n)),S=n.capLevelController=new d.capLevelController(pt(n)),k=new d.fpsController(pt(n)),L=new Gt(pt(n)),G=new Rt(pt(n)),H=new mn(pt(n)),ee=new ro(pt(n)),ae=n.levelController=new to(pt(n)),he=new Zs(pt(n)),fe=n.streamController=new Ea(pt(n),he),xe=[ae,fe],Ee=d.audioStreamController;Ee&&xe.push(new Ee(pt(n),he)),n.networkControllers=xe;var Ce=[L,G,H,v,y,S,k,ee,he];if(Ee=d.audioTrackController,Ee){var et=new Ee(pt(n));n.audioTrackController=et,Ce.push(et)}if(Ee=d.subtitleTrackController,Ee){var $t=new Ee(pt(n));n.subtitleTrackController=$t,xe.push($t)}if(Ee=d.emeController,Ee){var St=new Ee(pt(n));n.emeController=St,Ce.push(St)}return Ee=d.subtitleStreamController,Ee&&xe.push(new Ee(pt(n),he)),Ee=d.timelineController,Ee&&Ce.push(new Ee(pt(n))),n.coreComponents=Ce,n}var l=c.prototype;return l.destroy=function(){E.logger.log("destroy"),this.trigger(g.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(n){n.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},l.attachMedia=function(n){E.logger.log("attachMedia"),this.media=n,this.trigger(g.default.MEDIA_ATTACHING,{media:n})},l.detachMedia=function(){E.logger.log("detachMedia"),this.trigger(g.default.MEDIA_DETACHING),this.media=null},l.loadSource=function(n){n=p.buildAbsoluteURL(window.location.href,n,{alwaysNormalize:!0}),E.logger.log("loadSource:"+n),this.url=n,this.trigger(g.default.MANIFEST_LOADING,{url:n})},l.startLoad=function(n){n===void 0&&(n=-1),E.logger.log("startLoad("+n+")"),this.networkControllers.forEach(function(a){a.startLoad(n)})},l.stopLoad=function(){E.logger.log("stopLoad"),this.networkControllers.forEach(function(n){n.stopLoad()})},l.swapAudioCodec=function(){E.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){E.logger.log("recoverMediaError");var n=this.media;this.detachMedia(),n&&this.attachMedia(n)},l.removeLevel=function(n,a){a===void 0&&(a=0),this.levelController.removeLevel(n,a)},gf(c,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(n){E.logger.log("set currentLevel:"+n),this.loadLevel=n,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(n){E.logger.log("set nextLevel:"+n),this.levelController.manualLevel=n,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(n){E.logger.log("set loadLevel:"+n),this.levelController.manualLevel=n}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(n){this.levelController.nextLoadLevel=n}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(n){E.logger.log("set firstLevel:"+n),this.levelController.firstLevel=n}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(n){E.logger.log("set startLevel:"+n),n!==-1&&(n=Math.max(n,this.minAutoLevel)),this.levelController.startLevel=n}},{key:"capLevelToPlayerSize",set:function(n){var a=!!n;a!==this.config.capLevelToPlayerSize&&(a?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=a)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(n){E.logger.log("set autoLevelCapping:"+n),this._autoLevelCapping=n}},{key:"bandwidthEstimate",get:function(){var n=this.abrController._bwEstimator;return n?n.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var n=this.levels,a=this.config.minAutoBitrate,u=n?n.length:0,d=0;d<u;d++){var v=n[d].realBitrate?Math.max(n[d].realBitrate,n[d].bitrate):n[d].bitrate;if(v>a)return d}return 0}},{key:"maxAutoLevel",get:function(){var n=this.levels,a=this.autoLevelCapping,u;return a===-1&&n&&n.length?u=n.length-1:u=a,u}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(n){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,n)}},{key:"audioTracks",get:function(){var n=this.audioTrackController;return n?n.audioTracks:[]}},{key:"audioTrack",get:function(){var n=this.audioTrackController;return n?n.audioTrack:-1},set:function(n){var a=this.audioTrackController;a&&(a.audioTrack=n)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var n=this.subtitleTrackController;return n?n.subtitleTrack:-1},set:function(n){var a=this.subtitleTrackController;a&&(a.subtitleTrack=n)}},{key:"subtitleDisplay",get:function(){var n=this.subtitleTrackController;return n?n.subtitleDisplay:!1},set:function(n){var a=this.subtitleTrackController;a&&(a.subtitleDisplay=n)}}]),c}(W);vf.defaultConfig=void 0},"./src/polyfills/number.js":function(r,i,o){o.r(i),o.d(i,"isFiniteNumber",function(){return f}),o.d(i,"MAX_SAFE_INTEGER",function(){return p});var f=Number.isFinite||function(m){return typeof m=="number"&&isFinite(m)},p=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/utils/get-self-scope.js":function(r,i,o){o.r(i),o.d(i,"getSelfScope",function(){return f});function f(){return typeof window>"u"?self:window}},"./src/utils/logger.js":function(r,i,o){o.r(i),o.d(i,"enableLogs",function(){return D}),o.d(i,"logger",function(){return P});var f=o("./src/utils/get-self-scope.js");function p(){}var m={trace:p,debug:p,log:p,warn:p,info:p,error:p},w=m;function g(C,z){return z="["+C+"] > "+z,z}var E=Object(f.getSelfScope)();function B(C){var z=E.console[C];return z?function(){for(var A=arguments.length,_=new Array(A),F=0;F<A;F++)_[F]=arguments[F];_[0]&&(_[0]=g(C,_[0])),z.apply(E.console,_)}:p}function T(C){for(var z=arguments.length,A=new Array(z>1?z-1:0),_=1;_<z;_++)A[_-1]=arguments[_];A.forEach(function(F){w[F]=C[F]?C[F].bind(C):B(F)})}var D=function(z){if(E.console&&z===!0||typeof z=="object"){T(z,"debug","log","info","warn","error");try{w.log()}catch{w=m}}else w=m},P=w}}).default})})(Qh);var fm=Qh.exports;const $r=bc(fm);var Qi=function(){return Qi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Qi.apply(this,arguments)},cm=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};function dm(e){var t=e.hlsConfig,r=e.playerRef,i=r===void 0?Ja.createRef():r,o=e.src,f=e.autoPlay,p=cm(e,["hlsConfig","playerRef","src","autoPlay"]);return qt.useEffect(function(){var m;function w(){m!=null&&m.destroy();var g=new $r(Qi({enableWorker:!1},t));i.current!=null&&g.attachMedia(i.current),g.on($r.Events.MEDIA_ATTACHED,function(){g.loadSource(o),g.on($r.Events.MANIFEST_PARSED,function(){var E;f&&((E=i==null?void 0:i.current)===null||E===void 0||E.play().catch(function(){return console.log("Unable to autoplay prior to user interaction with the dom.")}))})}),g.on($r.Events.ERROR,function(E,B){if(B.fatal)switch(B.type){case $r.ErrorTypes.NETWORK_ERROR:g.startLoad();break;case $r.ErrorTypes.MEDIA_ERROR:g.recoverMediaError();break;default:w();break}}),m=g}return $r.isSupported()&&w(),function(){m!=null&&m.destroy()}},[f,t,i,o]),$r.isSupported()?Ja.createElement("video",Qi({ref:i},p)):Ja.createElement("video",Qi({ref:i,src:o,autoPlay:f},p))}const Pr=Object.create(null);Pr.open="0";Pr.close="1";Pr.ping="2";Pr.pong="3";Pr.message="4";Pr.upgrade="5";Pr.noop="6";const us=Object.create(null);Object.keys(Pr).forEach(e=>{us[Pr[e]]=e});const Pl={type:"error",data:"parser error"},Jh=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Zh=typeof ArrayBuffer=="function",ep=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Pu=({type:e,data:t},r,i)=>Jh&&t instanceof Blob?r?i(t):kc(t,i):Zh&&(t instanceof ArrayBuffer||ep(t))?r?i(t):kc(new Blob([t]),i):i(Pr[e]+(t||"")),kc=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function Lc(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Bo;function hm(e,t){if(Jh&&e.data instanceof Blob)return e.data.arrayBuffer().then(Lc).then(t);if(Zh&&(e.data instanceof ArrayBuffer||ep(e.data)))return t(Lc(e.data));Pu(e,!1,r=>{Bo||(Bo=new TextEncoder),t(Bo.encode(r))})}const Dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ji=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Dc.length;e++)ji[Dc.charCodeAt(e)]=e;const pm=e=>{let t=e.length*.75,r=e.length,i,o=0,f,p,m,w;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),E=new Uint8Array(g);for(i=0;i<r;i+=4)f=ji[e.charCodeAt(i)],p=ji[e.charCodeAt(i+1)],m=ji[e.charCodeAt(i+2)],w=ji[e.charCodeAt(i+3)],E[o++]=f<<2|p>>4,E[o++]=(p&15)<<4|m>>2,E[o++]=(m&3)<<6|w&63;return g},gm=typeof ArrayBuffer=="function",Fu=(e,t)=>{if(typeof e!="string")return{type:"message",data:tp(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:vm(e.substring(1),t)}:us[r]?e.length>1?{type:us[r],data:e.substring(1)}:{type:us[r]}:Pl},vm=(e,t)=>{if(gm){const r=pm(e);return tp(r,t)}else return{base64:!0,data:e}},tp=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},rp="",mm=(e,t)=>{const r=e.length,i=new Array(r);let o=0;e.forEach((f,p)=>{Pu(f,!1,m=>{i[p]=m,++o===r&&t(i.join(rp))})})},ym=(e,t)=>{const r=e.split(rp),i=[];for(let o=0;o<r.length;o++){const f=Fu(r[o],t);if(i.push(f),f.type==="error")break}return i};function xm(){return new TransformStream({transform(e,t){hm(e,r=>{const i=r.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const f=new DataView(o.buffer);f.setUint8(0,126),f.setUint16(1,i)}else{o=new Uint8Array(9);const f=new DataView(o.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(r)})}})}let Uo;function Wa(e){return e.reduce((t,r)=>t+r.length,0)}function Ya(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let o=0;o<t;o++)r[o]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function Em(e,t){Uo||(Uo=new TextDecoder);const r=[];let i=0,o=-1,f=!1;return new TransformStream({transform(p,m){for(r.push(p);;){if(i===0){if(Wa(r)<1)break;const w=Ya(r,1);f=(w[0]&128)===128,o=w[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(Wa(r)<2)break;const w=Ya(r,2);o=new DataView(w.buffer,w.byteOffset,w.length).getUint16(0),i=3}else if(i===2){if(Wa(r)<8)break;const w=Ya(r,8),g=new DataView(w.buffer,w.byteOffset,w.length),E=g.getUint32(0);if(E>Math.pow(2,21)-1){m.enqueue(Pl);break}o=E*Math.pow(2,32)+g.getUint32(4),i=3}else{if(Wa(r)<o)break;const w=Ya(r,o);m.enqueue(Fu(f?w:Uo.decode(w),t)),i=0}if(o===0||o>e){m.enqueue(Pl);break}}}})}const np=4;function lt(e){if(e)return Sm(e)}function Sm(e){for(var t in lt.prototype)e[t]=lt.prototype[t];return e}lt.prototype.on=lt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};lt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};lt.prototype.off=lt.prototype.removeListener=lt.prototype.removeAllListeners=lt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,o=0;o<r.length;o++)if(i=r[o],i===t||i.fn===t){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+e],this};lt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,o=r.length;i<o;++i)r[i].apply(this,t)}return this};lt.prototype.emitReserved=lt.prototype.emit;lt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};lt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const sr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function ip(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const Tm=sr.setTimeout,_m=sr.clearTimeout;function Js(e,t){t.useNativeTimers?(e.setTimeoutFn=Tm.bind(sr),e.clearTimeoutFn=_m.bind(sr)):(e.setTimeoutFn=sr.setTimeout.bind(sr),e.clearTimeoutFn=sr.clearTimeout.bind(sr))}const wm=1.33;function Am(e){return typeof e=="string"?Rm(e):Math.ceil((e.byteLength||e.size)*wm)}function Rm(e){let t=0,r=0;for(let i=0,o=e.length;i<o;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function km(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Lm(e){let t={},r=e.split("&");for(let i=0,o=r.length;i<o;i++){let f=r[i].split("=");t[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return t}class Dm extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class Nu extends lt{constructor(t){super(),this.writable=!1,Js(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,r,i){return super.emitReserved("error",new Dm(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Fu(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=km(t);return r.length?"?"+r:""}}const ap="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Fl=64,Cm={};let Cc=0,Xa=0,Ic;function Oc(e){let t="";do t=ap[e%Fl]+t,e=Math.floor(e/Fl);while(e>0);return t}function sp(){const e=Oc(+new Date);return e!==Ic?(Cc=0,Ic=e):e+"."+Oc(Cc++)}for(;Xa<Fl;Xa++)Cm[ap[Xa]]=Xa;let op=!1;try{op=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Im=op;function lp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Im))return new XMLHttpRequest}catch{}if(!t)try{return new sr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Om(){}const Pm=function(){return new lp({xdomain:!1}).responseType!=null}();class Fm extends Nu{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let o=location.port;o||(o=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}const r=t&&t.forceBase64;this.supportsBinary=Pm&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};ym(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,mm(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=sp()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Or(this.uri(),t)}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(o,f)=>{this.onError("xhr post error",o,f)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}class Or extends lt{constructor(t,r){super(),Js(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;const r=ip(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const i=this.xhr=new lp(r);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this.opts.extraHeaders[o])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document<"u"&&(this.index=Or.requestsCount++,Or.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=Om,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Or.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Or.requestsCount=0;Or.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Pc);else if(typeof addEventListener=="function"){const e="onpagehide"in sr?"pagehide":"unload";addEventListener(e,Pc,!1)}}function Pc(){for(let e in Or.requests)Or.requests.hasOwnProperty(e)&&Or.requests[e].abort()}const Mu=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),$a=sr.WebSocket||sr.MozWebSocket,Fc=!0,Nm="arraybuffer",Nc=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Mm extends Nu{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,i=Nc?{}:ip(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=Fc&&!Nc?r?new $a(t,r):new $a(t):new $a(t,r,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],o=r===t.length-1;Pu(i,this.supportsBinary,f=>{const p={};try{Fc&&this.ws.send(f)}catch{}o&&Mu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=sp()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}check(){return!!$a}}class bm extends Nu{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const r=Em(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),o=xm();o.readable.pipeTo(t.writable),this.writer=o.writable.getWriter();const f=()=>{i.read().then(({done:m,value:w})=>{m||(this.onPacket(w),f())}).catch(m=>{})};f();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this.writer.write(p).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],o=r===t.length-1;this.writer.write(i).then(()=>{o&&Mu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const Bm={websocket:Mm,webtransport:bm,polling:Fm},Um=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Gm=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Nl(e){if(e.length>2e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let o=Um.exec(e||""),f={},p=14;for(;p--;)f[Gm[p]]=o[p]||"";return r!=-1&&i!=-1&&(f.source=t,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=jm(f,f.path),f.queryKey=Km(f,f.query),f}function jm(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Km(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,f){o&&(r[o]=f)}),r}let up=class Hn extends lt{constructor(t,r={}){super(),this.binaryType=Nm,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=Nl(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=Nl(r.host).host),Js(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Lm(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=np,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new Bm[t](i)}open(){let t;if(this.opts.rememberUpgrade&&Hn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),i=!1;Hn.priorWebsocketSuccess=!1;const o=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",B=>{if(!i)if(B.type==="pong"&&B.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Hn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(E(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const T=new Error("probe error");T.transport=r.name,this.emitReserved("upgradeError",T)}}))};function f(){i||(i=!0,E(),r.close(),r=null)}const p=B=>{const T=new Error("probe error: "+B);T.transport=r.name,f(),this.emitReserved("upgradeError",T)};function m(){p("transport closed")}function w(){p("socket closed")}function g(B){r&&B.name!==r.name&&f()}const E=()=>{r.removeListener("open",o),r.removeListener("error",p),r.removeListener("close",m),this.off("close",w),this.off("upgrading",g)};r.once("open",o),r.once("error",p),r.once("close",m),this.once("close",w),this.once("upgrading",g),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Hn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(r+=Am(o)),i>0&&r>this.maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}write(t,r,i){return this.sendPacket("message",t,r,i),this}send(t,r,i){return this.sendPacket("message",t,r,i),this}sendPacket(t,r,i,o){if(typeof r=="function"&&(o=r,r=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const f={type:t,data:r,options:i};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}onError(t){Hn.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let i=0;const o=t.length;for(;i<o;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}};up.protocol=np;function zm(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=Nl(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const f=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+f+":"+i.port+t,i.href=i.protocol+"://"+f+(r&&r.port===i.port?"":":"+i.port),i}const Vm=typeof ArrayBuffer=="function",Hm=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,fp=Object.prototype.toString,Wm=typeof Blob=="function"||typeof Blob<"u"&&fp.call(Blob)==="[object BlobConstructor]",Ym=typeof File=="function"||typeof File<"u"&&fp.call(File)==="[object FileConstructor]";function bu(e){return Vm&&(e instanceof ArrayBuffer||Hm(e))||Wm&&e instanceof Blob||Ym&&e instanceof File}function fs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(fs(e[r]))return!0;return!1}if(bu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return fs(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&fs(e[r]))return!0;return!1}function Xm(e){const t=[],r=e.data,i=e;return i.data=Ml(r,t),i.attachments=t.length,{packet:i,buffers:t}}function Ml(e,t){if(!e)return e;if(bu(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=Ml(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Ml(e[i],t));return r}return e}function $m(e,t){return e.data=bl(e.data,t),delete e.attachments,e}function bl(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=bl(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=bl(e[r],t));return e}const qm=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Qm=5;var Oe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Oe||(Oe={}));class Jm{constructor(t){this.replacer=t}encode(t){return(t.type===Oe.EVENT||t.type===Oe.ACK)&&fs(t)?this.encodeAsBinary({type:t.type===Oe.EVENT?Oe.BINARY_EVENT:Oe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Oe.BINARY_EVENT||t.type===Oe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=Xm(t),i=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(i),o}}function Mc(e){return Object.prototype.toString.call(e)==="[object Object]"}class Bu extends lt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===Oe.BINARY_EVENT;i||r.type===Oe.BINARY_ACK?(r.type=i?Oe.EVENT:Oe.ACK,this.reconstructor=new Zm(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(bu(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(Oe[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Oe.BINARY_EVENT||i.type===Oe.BINARY_ACK){const f=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const p=t.substring(f,r);if(p!=Number(p)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(p)}if(t.charAt(r+1)==="/"){const f=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(f,r)}else i.nsp="/";const o=t.charAt(r+1);if(o!==""&&Number(o)==o){const f=r+1;for(;++r;){const p=t.charAt(r);if(p==null||Number(p)!=p){--r;break}if(r===t.length)break}i.id=Number(t.substring(f,r+1))}if(t.charAt(++r)){const f=this.tryParse(t.substr(r));if(Bu.isPayloadValid(i.type,f))i.data=f;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Oe.CONNECT:return Mc(r);case Oe.DISCONNECT:return r===void 0;case Oe.CONNECT_ERROR:return typeof r=="string"||Mc(r);case Oe.EVENT:case Oe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&qm.indexOf(r[0])===-1);case Oe.ACK:case Oe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Zm{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=$m(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const ey=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Bu,Encoder:Jm,get PacketType(){return Oe},protocol:Qm},Symbol.toStringTag,{value:"Module"}));function xr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const ty=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class cp extends lt{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[xr(t,"open",this.onopen.bind(this)),xr(t,"packet",this.onpacket.bind(this)),xr(t,"error",this.onerror.bind(this)),xr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(ty.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const i={type:Oe.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const p=this.ids++,m=r.pop();this._registerAckCallback(p,m),i.id=p}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(t,r){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[t]=r;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},o);this.acks[t]=(...p)=>{this.io.clearTimeoutFn(f),r.apply(this,[null,...p])}}emitWithAck(t,...r){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,f)=>{r.push((p,m)=>i?p?f(p):o(m):o(p)),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...f)=>i!==this._queue[0]?void 0:(o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...f)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Oe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Oe.EVENT:case Oe.BINARY_EVENT:this.onevent(t);break;case Oe.ACK:case Oe.BINARY_ACK:this.onack(t);break;case Oe.DISCONNECT:this.ondisconnect();break;case Oe.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...o){i||(i=!0,r.packet({type:Oe.ACK,id:t,data:o}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function Ei(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ei.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Ei.prototype.reset=function(){this.attempts=0};Ei.prototype.setMin=function(e){this.ms=e};Ei.prototype.setMax=function(e){this.max=e};Ei.prototype.setJitter=function(e){this.jitter=e};class Bl extends lt{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Js(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Ei({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const o=r.parser||ey;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new up(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=xr(r,"open",function(){i.onopen(),t&&t()}),f=m=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",m),t?t(m):this.maybeReconnectOnOpen()},p=xr(r,"error",f);if(this._timeout!==!1){const m=this._timeout,w=this.setTimeoutFn(()=>{o(),f(new Error("timeout")),r.close()},m);this.opts.autoUnref&&w.unref(),this.subs.push(()=>{this.clearTimeoutFn(w)})}return this.subs.push(o),this.subs.push(p),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(xr(t,"ping",this.onping.bind(this)),xr(t,"data",this.ondata.bind(this)),xr(t,"error",this.onerror.bind(this)),xr(t,"close",this.onclose.bind(this)),xr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Mu(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new cp(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Mi={};function cs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=zm(e,t.path||"/socket.io"),i=r.source,o=r.id,f=r.path,p=Mi[o]&&f in Mi[o].nsps,m=t.forceNew||t["force new connection"]||t.multiplex===!1||p;let w;return m?w=new Bl(i,t):(Mi[o]||(Mi[o]=new Bl(i,t)),w=Mi[o]),r.query&&!t.query&&(t.query=r.queryKey),w.socket(r.path,t)}Object.assign(cs,{Manager:Bl,Socket:cp,io:cs,connect:cs});function ry(){const[e,t]=qt.useState([]),[r,i]=qt.useState(null),[o,f]=qt.useState(null),[p,m]=qt.useState(localStorage.getItem("roomId"));qt.useState(!1);const w=qt.useRef(null),g=qt.useRef(null),E=qt.useRef(null),B=async()=>{const P=g.current.value;o.emit("room:changeRoom",P.trim())},T=async()=>{const P=w.current.value;o.emit("player:searchFilms",P,localStorage.getItem("roomId"))},D=async P=>{o.emit("player:uploadFilm",P,localStorage.getItem("roomId"))};return qt.useEffect(()=>{const P=cs("http://localhost:3000/");f(P),localStorage.getItem("roomId")?P.emit("message:setLocalRoom",localStorage.getItem("roomId")):P.emit("message:getRoom"),P.on("roomId",_=>{localStorage.setItem("roomId",_),m(_)}),P.on("disk",_=>{console.log(_)}),P.on("player:films",_=>{console.log(_),t(_)}),P.on("player:film",_=>{console.log(_),i(_)}),P.on("room:roomState",(_,F)=>{localStorage.setItem("roomId",_),console.log(F),m(_),t(F.films),i(F.film),E.current.removeEventListener("seeked",A),E.current.currentTime=F.time,F.isPlaying?E.current.play():E.current.pause(),E.current.addEventListener("seeked",A)}),P.on("player:playVideo",()=>{E.current.play(),E.current.play()}),P.on("player:pauseVideo",()=>{E.current.pause(),E.current.pause()}),P.on("player:seekVideo",_=>{E.current.removeEventListener("seeked",A),E.current.currentTime=_,setTimeout(()=>{E.current.addEventListener("seeked",A)},50)});const C=async()=>{P.emit("playVideo",localStorage.getItem("roomId"))},z=async()=>{P.emit("pauseVideo",localStorage.getItem("roomId"))},A=async()=>{P.emit("seekVideo",localStorage.getItem("roomId"),E.current.currentTime)};return E.current.addEventListener("play",C),E.current.addEventListener("pause",z),E.current.addEventListener("seeked",A),()=>{P.disconnect(),f(P)}},[]),st.jsx(st.Fragment,{children:st.jsxs("div",{className:"main",children:[st.jsx("div",{className:"room__id",children:p}),st.jsx("div",{className:"users"}),st.jsxs("div",{className:"search-films",children:[st.jsx("input",{className:"input",type:"text",ref:w}),st.jsx("button",{className:"button-search",onClick:T,children:"Поиск"})]}),st.jsx(dm,{src:r,autoPlay:!1,controls:!0,width:"70%",height:"50%",playerRef:E}),st.jsx("ul",{className:"films",children:e.map((P,C)=>st.jsxs("li",{className:"film","data-url":P.href,onClick:()=>D(P.href),children:[st.jsx("img",{src:P.img,alt:"",className:"film__image"}),st.jsxs("div",{className:"film__text",children:[st.jsx("span",{className:"film__title",children:P.title}),st.jsx("span",{className:"film__year",children:P.year})]})]},C))}),st.jsxs("div",{className:"rooms",children:[st.jsx("input",{type:"text",ref:g}),st.jsx("button",{className:"button-search",onClick:B,children:"Поиск комнаты"})]})]})})}Go.createRoot(document.getElementById("root")).render(st.jsx(Ja.StrictMode,{children:st.jsx(ry,{})}));
